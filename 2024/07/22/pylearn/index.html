<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Python基本语法 | StudyinCAU</title><meta name="author" content="小楼一夜听春雨 &amp; Rico"><meta name="copyright" content="小楼一夜听春雨 &amp; Rico"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Python基本语法总结 本文参考《Python 数据之道》，为重温语法制作。 本文适合有一定编程基础或复习语法的读者阅读。 print(&quot;Hello Python&quot;) Hello Python   字符串   创建字符串 在 Python 中处理文本数据是使用 str 对象，也称为字符串。字符串字面值有多种不同的写法：  单引号: ‘允许包含有 “双” 引号’ 双引号: “允许包含有 ‘单’">
<meta property="og:type" content="article">
<meta property="og:title" content="Python基本语法">
<meta property="og:url" content="https://studyincau.github.io/2024/07/22/pylearn/index.html">
<meta property="og:site_name" content="StudyinCAU">
<meta property="og:description" content="Python基本语法总结 本文参考《Python 数据之道》，为重温语法制作。 本文适合有一定编程基础或复习语法的读者阅读。 print(&quot;Hello Python&quot;) Hello Python   字符串   创建字符串 在 Python 中处理文本数据是使用 str 对象，也称为字符串。字符串字面值有多种不同的写法：  单引号: ‘允许包含有 “双” 引号’ 双引号: “允许包含有 ‘单’">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://studyincau.github.io/images/python3.png">
<meta property="article:published_time" content="2024-07-22T12:43:35.000Z">
<meta property="article:modified_time" content="2024-07-22T12:43:36.000Z">
<meta property="article:author" content="小楼一夜听春雨 &amp; Rico">
<meta property="article:tag" content="Python">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://studyincau.github.io/images/python3.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://studyincau.github.io/2024/07/22/pylearn/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Python基本语法',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-07-22 20:43:36'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.1.1">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">126</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">225</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">57</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/../images/python3.png')"><nav id="nav"><span id="blog-info"><a href="/" title="StudyinCAU"><span class="site-name">StudyinCAU</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Python基本语法</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-07-22T12:43:35.000Z" title="发表于 2024-07-22 20:43:35">2024-07-22</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-07-22T12:43:36.000Z" title="更新于 2024-07-22 20:43:36">2024-07-22</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Python/">Python</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Python/Python%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/">Python基本使用</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">23.9k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>106分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Python基本语法"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="python基本语法总结"><a class="markdownIt-Anchor" href="#python基本语法总结"></a> Python基本语法总结</h1>
<p>本文参考《Python 数据之道》，为重温语法制作。</p>
<p>本文适合有一定编程基础或复习语法的读者阅读。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">"Hello Python"</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>Hello Python
</code></pre>
<h1 id="字符串"><a class="markdownIt-Anchor" href="#字符串"></a> 字符串</h1>
<p><img src="../../../../images/pylearn/Python%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%80%9F%E6%9F%A5%E8%A1%A8.png" alt></p>
<h2 id="创建字符串"><a class="markdownIt-Anchor" href="#创建字符串"></a> 创建字符串</h2>
<p>在 Python 中处理文本数据是使用 str 对象，也称为字符串。字符串字面值有多种不同的写法：</p>
<ul>
<li>单引号: ‘允许包含有 “双” 引号’</li>
<li>双引号: “允许包含有 ‘单’ 引号”。</li>
<li>三重引号: ’‘’ 三重单引号” ’, ””“三重双引号”””</li>
</ul>
<p>使用三重引号的字符串可以跨越多行 —— 其中所有的空白字符都将包含在该字符串字面值中</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">s1 = <span class="string">'hello'</span></span><br><span class="line">s2 = <span class="string">"world"</span></span><br><span class="line">s3 = <span class="string">'''</span></span><br><span class="line"><span class="string">    my</span></span><br><span class="line"><span class="string">    python</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(s1)</span><br><span class="line"><span class="built_in">print</span>(s2)</span><br><span class="line"><span class="built_in">print</span>(s3)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>hello
world

    my
    python
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">s4 = <span class="string">'''</span></span><br><span class="line"><span class="string">my</span></span><br><span class="line"><span class="string">python</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="built_in">print</span>(s4)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>my
python
</code></pre>
<h2 id="访问字符串中的值"><a class="markdownIt-Anchor" href="#访问字符串中的值"></a> 访问字符串中的值</h2>
<p>字符串（string）支持用切片的方式来访问字符串中的值。该功能在 Python 的 <code>list</code> 中经常会用到。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">s1 = <span class="string">"hello world 你好，Python"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(s1[<span class="number">0</span>])</span><br><span class="line"><span class="built_in">print</span>(s1[:<span class="number">5</span>])</span><br><span class="line"><span class="built_in">print</span>(s1[<span class="number">6</span>:])</span><br></pre></td></tr></tbody></table></figure>
<pre><code>h
hello
world 你好，Python
</code></pre>
<h2 id="字符串格式化"><a class="markdownIt-Anchor" href="#字符串格式化"></a> 字符串格式化</h2>
<p>Python 支持格式化字符串的输出，一般有 3 种方式可以实现，包括 <code>format</code> ，<code>%</code> ，<code>f-string</code> 。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">s1 = <span class="string">'hello'</span></span><br><span class="line">s2 = <span class="string">'world'</span></span><br><span class="line"></span><br><span class="line">s = <span class="string">'s1 = {0}, s2 = {1}'</span>.<span class="built_in">format</span>(s1,s2)</span><br><span class="line"><span class="built_in">print</span>(s3)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>s1 = hello, s2 = world
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">'s1 = %s, s2 = %s'</span> % (s1,s2))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>s1 = hello, s2 = world
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">f's1 = <span class="subst">{s1}</span>, s2 = <span class="subst">{s2}</span>'</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>s1 = hello, s2 = world
</code></pre>
<h3 id="数字格式化"><a class="markdownIt-Anchor" href="#数字格式化"></a> 数字格式化</h3>
<p>在进行字符串格式化时，经常会遇到需要经<strong>数字</strong>格式化为<strong>字符串</strong>，并且要按某种特定的格式来显示。</p>
<p>数字格式化为字符串，可以用 format 、% 或 f-string 方法来实现。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">n1 = <span class="number">1.23456789</span></span><br><span class="line">n2 = <span class="number">12345.6789</span></span><br><span class="line">n3 = <span class="number">0.123456789</span></span><br><span class="line">n4 = <span class="number">12</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 保 留 两 位 小 数 的 数 字 格 式</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">'保留两位小数：%.2f'</span> % n1)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">'保留两位小数：{0:.2f}, {1:.2f}'</span>.<span class="built_in">format</span>(n1,n2))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f'保留两位小数：<span class="subst">{n1:<span class="number">.2</span>f}</span>'</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>保留两位小数：1.23
保留两位小数：1.23, 12345.68
保留两位小数：1.23
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 百分比</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f'百分比：<span class="subst">{n1:<span class="number">.2</span>%}</span>'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 既有千分位分隔符又有精度设定的数字格式</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f'百分比：<span class="subst">{n2:,<span class="number">.2</span>f}</span>'</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>百分比：123.46%
百分比：12,345.68
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">#字符串对齐格式，设置默认宽度为8</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f'<span class="subst">{n4:&gt;<span class="number">8</span>}</span>'</span>)         <span class="comment">#右对齐</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f'<span class="subst">{n4:&lt;<span class="number">8</span>}</span>'</span>) <span class="comment">#左对齐</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f'<span class="subst">{n4:^<span class="number">8</span>}</span>'</span>) <span class="comment">#居中对齐</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<pre><code>      12
12      
   12   
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">#数字补零，或者补特定符号，比如‘-’</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f'左边补零：<span class="subst">{n4:<span class="number">0</span>&gt;<span class="number">4</span>}</span>'</span>) <span class="comment">#左边补0，宽度为4</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f'右边补 -：<span class="subst">{n4:-&lt;<span class="number">4</span>}</span>'</span>) <span class="comment">#右边补x，宽度为4</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>左边补零：0012
右边补 -：12--
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">n1 = <span class="number">1.23456</span></span><br><span class="line">n2 = -<span class="number">123.456</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 带符号保留小数点后两位</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># +</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">'正数前加正号，负数前加负号：'</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f'<span class="subst">{n1:+<span class="number">.2</span>f}</span>'</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f'<span class="subst">{n2:+<span class="number">.2</span>f}</span>\n'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># -</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">'正数前无符号，负数前加负号：'</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f'<span class="subst">{n1:-<span class="number">.2</span>f}</span>'</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f'<span class="subst">{n2:-<span class="number">.2</span>f}</span>\n'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 空格</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">'正数前加空格，负数前加负号：'</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f'<span class="subst">{n1: <span class="number">.2</span>f}</span>'</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f'<span class="subst">{n2: <span class="number">.2</span>f}</span>'</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>正数前加正号，负数前加负号：
+1.23
-123.46

正数前无符号，负数前加负号：
1.23
-123.46

正数前加空格，负数前加负号：
 1.23
-123.46
</code></pre>
<p>数字格式化常见的格式整理如下：</p>
<p><img src="../../../../images/pylearn/%E6%95%B0%E5%AD%97%E6%A0%BC%E5%BC%8F%E5%8C%96.png" alt></p>
<h2 id="字符串的基本运算"><a class="markdownIt-Anchor" href="#字符串的基本运算"></a> 字符串的基本运算</h2>
<h3 id="拼接字符串"><a class="markdownIt-Anchor" href="#拼接字符串"></a> 拼接字符串</h3>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">s1 = <span class="string">'hello'</span></span><br><span class="line">s2 = <span class="string">'world'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(s1+<span class="string">' '</span>+s2+<span class="string">'!'</span>)</span><br><span class="line"><span class="built_in">print</span>(s1 * <span class="number">2</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>hello world!
hellohello
</code></pre>
<h3 id="字符串的大小写转换"><a class="markdownIt-Anchor" href="#字符串的大小写转换"></a> 字符串的大小写转换</h3>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">s = <span class="string">'Hello, My world!'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 每个单词的首字母大写，title()</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">'每个单词的首字母大写：'</span>,s.title())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 段落的首字母大写，capitalize()</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">'段落的首字母大写：'</span>,s.capitalize())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 所有字母小写，lower()</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">'所有字母小写：'</span>,s.lower())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 所有字母大写，upper()</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">'所有字母大写：'</span>,s.upper())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 大写转小写，小写转大写，swapcase()</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">'大写转小写，小写转大写：'</span>,s.swapcase())</span><br></pre></td></tr></tbody></table></figure>
<pre><code>每个单词的首字母大写： Hello, My World!
段落的首字母大写： Hello, my world!
所有字母小写： hello, my world!
所有字母大写： HELLO, MY WORLD!
大写转小写，小写转大写： hELLO, mY WORLD!
</code></pre>
<h3 id="使用换行和制表符"><a class="markdownIt-Anchor" href="#使用换行和制表符"></a> 使用换行和制表符</h3>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># \n 换行</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">'hello\nworld'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># \t 制表符</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">'hello\tworld'</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>hello
world
hello	world
</code></pre>
<h3 id="字符串分割"><a class="markdownIt-Anchor" href="#字符串分割"></a> 字符串分割</h3>
<p>字符串的分割，通常有 <code>split</code> 和 <code>partition</code> 系列方法。</p>
<ol>
<li>
<p>split</p>
<p>split 系列方法包括 split() 、rsplit() 、splitlines() 等。</p>
<p>split() 将一个字符串分隔成多个字符串组成的列表，不含分隔符；rsplit() 的功能与 split() 类似，只不过是从字符串最后面开始分割；splitlines() 按照 (\n, \r, \r\n 等) 分隔，分割成列表。</p>
</li>
</ol>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">s = <span class="string">'''Technology is evolving at a rapid pace, significantly impacting our daily lives.</span></span><br><span class="line"><span class="string">This progress brings both opportunities and challenges that we must navigate carefully.'''</span></span><br><span class="line"><span class="built_in">print</span>(s)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>Technology is evolving at a rapid pace, significantly impacting our daily lives.
This progress brings both opportunities and challenges that we must navigate carefully.
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 按空格分割</span></span><br><span class="line">s1 = s.split()</span><br><span class="line"><span class="built_in">print</span>(s1)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>['Technology', 'is', 'evolving', 'at', 'a', 'rapid', 'pace,', 'significantly', 'impacting', 'our', 'daily', 'lives.', 'This', 'progress', 'brings', 'both', 'opportunities', 'and', 'challenges', 'that', 'we', 'must', 'navigate', 'carefully.']
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 按某个字符分割</span></span><br><span class="line">s2 = s.split(<span class="string">'a'</span>)</span><br><span class="line"><span class="built_in">print</span>(s2)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>['Technology is evolving ', 't ', ' r', 'pid p', 'ce, signific', 'ntly imp', 'cting our d', 'ily lives.\nThis progress brings both opportunities ', 'nd ch', 'llenges th', 't we must n', 'vig', 'te c', 'refully.']
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 按某个字符分割，只分割一次</span></span><br><span class="line">s3 = s.split(<span class="string">'a'</span>,<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(s3)</span><br><span class="line">s4 = s.rsplit(<span class="string">'a'</span>,<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(s4)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>['Technology is evolving ', 't a rapid pace, significantly impacting our daily lives.\nThis progress brings both opportunities and challenges that we must navigate carefully.']
['Technology is evolving at a rapid pace, significantly impacting our daily lives.\nThis progress brings both opportunities and challenges that we must navigate c', 'refully.']
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 去掉换行符，以换行符分割成列表</span></span><br><span class="line">s5 = s.splitlines()</span><br><span class="line"><span class="built_in">print</span>(s5)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>['Technology is evolving at a rapid pace, significantly impacting our daily lives.', 'This progress brings both opportunities and challenges that we must navigate carefully.']
</code></pre>
<ol start="2">
<li>
<p>partition</p>
<p>partition 系列方法包括 partition() 和 rpartition()</p>
<p>partition() 根据指定的分隔符 (sep) 将字符串进行分割，从字符串左边开始索引分隔符 sep, 索引到则停止索引，返回的是一个包含三个元素的元组 (tuple)，即 (head, sep, tail)。</p>
</li>
</ol>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 遇到第一个分隔符后就停止索引</span></span><br><span class="line"><span class="built_in">print</span>(s.partition(<span class="string">'e'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 没有遇到分隔符，返回原字符串和两个空字符串</span></span><br><span class="line"><span class="built_in">print</span>(s.partition(<span class="string">'z'</span>))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>('T', 'e', 'chnology is evolving at a rapid pace, significantly impacting our daily lives.\nThis progress brings both opportunities and challenges that we must navigate carefully.')
('Technology is evolving at a rapid pace, significantly impacting our daily lives.\nThis progress brings both opportunities and challenges that we must navigate carefully.', '', '')
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># rpartition() 的功能与 partition() 类似，从字符串最后面开始分割。</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(s.rpartition(<span class="string">'e'</span>))</span><br><span class="line"><span class="built_in">print</span>(s.rpartition(<span class="string">'z'</span>))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>('Technology is evolving at a rapid pace, significantly impacting our daily lives.\nThis progress brings both opportunities and challenges that we must navigate car', 'e', 'fully.')
('', '', 'Technology is evolving at a rapid pace, significantly impacting our daily lives.\nThis progress brings both opportunities and challenges that we must navigate carefully.')
</code></pre>
<ol start="3">
<li>split 和 partition 系列方法的区别</li>
</ol>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><menclose notation="left right"><mtable rowspacing="0.15999999999999992em" columnalign="center center center" columnspacing="1em" rowlines="solid none"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>&nbsp;方法&nbsp;</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>&nbsp;返回类型&nbsp;</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>&nbsp;是否包含分隔符&nbsp;</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>&nbsp;split&nbsp;系列方法&nbsp;</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi mathvariant="normal">list</mi><mo>⁡</mo><mo stretchy="false">(</mo><mtext>&nbsp;列表)&nbsp;</mtext></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>&nbsp;否&nbsp;</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>&nbsp;partition&nbsp;系列方法&nbsp;</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>&nbsp;tuple(元组)&nbsp;</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>&nbsp;是&nbsp;</mtext></mstyle></mtd></mtr></mtable></menclose></mrow><annotation encoding="application/x-tex">\begin{array}{ccc}
\hline \text { 方法 } &amp; \text { 返回类型 } &amp; \text { 是否包含分隔符 } \\
\hline \text { split 系列方法 } &amp; \operatorname{list}(\text { 列表) } &amp; \text { 否 } \\
\text { partition 系列方法 } &amp; \text { tuple(元组) } &amp; \text { 是 } \\
\hline
\end{array}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.6400000000000006em;vertical-align:-1.5500000000000007em;"></span><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.09em;"><span style="top:-4.05em;"><span class="pstrut" style="height:4.05em;"></span><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">&nbsp;</span><span class="mord cjk_fallback">方法</span><span class="mord">&nbsp;</span></span></span></span><span style="top:-3.0099999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">&nbsp;split&nbsp;</span><span class="mord cjk_fallback">系列方法</span><span class="mord">&nbsp;</span></span></span></span><span style="top:-1.8099999999999994em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">&nbsp;partition&nbsp;</span><span class="mord cjk_fallback">系列方法</span><span class="mord">&nbsp;</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">&nbsp;</span><span class="mord cjk_fallback">返回类型</span><span class="mord">&nbsp;</span></span></span></span><span style="top:-3.0099999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mop"><span class="mord mathrm">l</span><span class="mord mathrm">i</span><span class="mord mathrm">s</span><span class="mord mathrm">t</span></span><span class="mopen">(</span><span class="mord text"><span class="mord">&nbsp;</span><span class="mord cjk_fallback">列表</span><span class="mord">)&nbsp;</span></span></span></span><span style="top:-1.8099999999999994em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">&nbsp;tuple(</span><span class="mord cjk_fallback">元组</span><span class="mord">)&nbsp;</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">&nbsp;</span><span class="mord cjk_fallback">是否包含分隔符</span><span class="mord">&nbsp;</span></span></span></span><span style="top:-3.0099999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">&nbsp;</span><span class="mord cjk_fallback">否</span><span class="mord">&nbsp;</span></span></span></span><span style="top:-1.8099999999999994em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">&nbsp;</span><span class="mord cjk_fallback">是</span><span class="mord">&nbsp;</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span><span style="top:-2.4999999999999996em;"><span class="pstrut" style="height:4.05em;"></span><span class="hline" style="border-bottom-width:0.04em;"></span></span><span style="top:-4.8999999999999995em;"><span class="pstrut" style="height:4.05em;"></span><span class="hline" style="border-bottom-width:0.04em;"></span></span><span style="top:-6.1em;"><span class="pstrut" style="height:4.05em;"></span><span class="hline" style="border-bottom-width:0.04em;"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span></span></span></span></span></p>
<h3 id="去除字符串两边的空白"><a class="markdownIt-Anchor" href="#去除字符串两边的空白"></a> 去除字符串两边的空白</h3>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">s = <span class="string">'     hello world   '</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 去除字符串两端的空白</span></span><br><span class="line">s.strip()</span><br></pre></td></tr></tbody></table></figure>
<pre><code>'hello world'
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 去除字符串右侧的空白</span></span><br><span class="line">s.rstrip()</span><br></pre></td></tr></tbody></table></figure>
<pre><code>'     hello world'
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 去除字符串左侧的空白</span></span><br><span class="line">s.lstrip()</span><br></pre></td></tr></tbody></table></figure>
<pre><code>'hello world   '
</code></pre>
<h3 id="其他一些运算"><a class="markdownIt-Anchor" href="#其他一些运算"></a> 其他一些运算</h3>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">s = <span class="string">'''Technology is evolving at a rapid pace, significantly impacting our daily lives.</span></span><br><span class="line"><span class="string">This progress brings both opportunities and challenges that we must navigate carefully.'''</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 统计相同字符的个数</span></span><br><span class="line"><span class="built_in">print</span>(s.count(<span class="string">'a'</span>))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>13
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 计算字符串的长度</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(s))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>168
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 字符替换</span></span><br><span class="line"><span class="built_in">print</span>(s.replace(<span class="string">'a'</span>,<span class="string">'A'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#如果指定第三个参数max，则替换不超过max次</span></span><br><span class="line"><span class="built_in">print</span>(s.replace(<span class="string">'a'</span>,<span class="string">'A'</span>,<span class="number">1</span>))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>Technology is evolving At A rApid pAce, significAntly impActing our dAily lives.
This progress brings both opportunities And chAllenges thAt we must nAvigAte cArefully.
Technology is evolving At a rapid pace, significantly impacting our daily lives.
This progress brings both opportunities and challenges that we must navigate carefully.
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 判断是否以某字符开头</span></span><br><span class="line">s.startswith(<span class="string">'a'</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>False
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 判断是否以某字符结尾</span></span><br><span class="line">s.endswith(<span class="string">'.'</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>True
</code></pre>
<h1 id="list"><a class="markdownIt-Anchor" href="#list"></a> List</h1>
<h2 id="初识-list"><a class="markdownIt-Anchor" href="#初识-list"></a> 初识 list</h2>
<p>list 是 Python 内置的一种高级数据类型，是一种有序的集合。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">names = [<span class="string">'James'</span>, <span class="string">'Michael'</span>, <span class="string">'Emma'</span>, <span class="string">'Emily'</span>]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(names))</span><br><span class="line"><span class="built_in">print</span>(names)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用 len() 可获得 list 的长度，即 list 集合所包含的元素个数</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(names))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>&lt;class 'list'&gt;
['James', 'Michael', 'Emma', 'Emily']
4
</code></pre>
<h2 id="访问列表中的值"><a class="markdownIt-Anchor" href="#访问列表中的值"></a> 访问列表中的值</h2>
<p>用索引来访问 list 中的每个元素，请注意索引是从 0 开始，最后一个的索引编号为 n-1，即所有元素的编号依次为(0,1, 2, …, n-1)。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(names[<span class="number">0</span>])</span><br><span class="line"><span class="built_in">print</span>(names[:<span class="number">3</span>])</span><br></pre></td></tr></tbody></table></figure>
<pre><code>James
['James', 'Michael', 'Emma']
</code></pre>
<p>还可以通过 for 循环来列出所有元素</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> name <span class="keyword">in</span> names:</span><br><span class="line">    <span class="built_in">print</span>(name)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>James
Michael
Emma
Emily
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(names)):</span><br><span class="line">    <span class="built_in">print</span>(names[i])</span><br></pre></td></tr></tbody></table></figure>
<pre><code>James
Michael
Emma
Emily
</code></pre>
<h2 id="列表的操作-函数及方法"><a class="markdownIt-Anchor" href="#列表的操作-函数及方法"></a> 列表的操作、函数及方法</h2>
<h3 id="list-中元素的增-改-删等操作"><a class="markdownIt-Anchor" href="#list-中元素的增-改-删等操作"></a> list 中元素的增、改、删等操作</h3>
<p>list 是一个可变的有序列表，可以通过添加、修改、删除等操作来操作 list 中的元素。</p>
<p><strong>往 list 中添加元素</strong></p>
<p>可以通过 append() 和 insert() 方法来往 list 中添加元素。</p>
<p>其中，append() 方法是在 list 的末尾添加元素；insert() 是在指定位置添加元素。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">names = [<span class="string">'James'</span>, <span class="string">'Michael'</span>, <span class="string">'Emma'</span>, <span class="string">'Emily'</span>]</span><br><span class="line">names.append(<span class="string">'Tom'</span>)</span><br><span class="line"><span class="built_in">print</span>(names)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>['James', 'Michael', 'Emma', 'Emily', 'Tom']
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">names.insert(<span class="number">1</span>,<span class="string">'Jack'</span>)</span><br><span class="line"><span class="built_in">print</span>(names)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>['James', 'Jack', 'Michael', 'Emma', 'Emily', 'Tom']
</code></pre>
<p><strong>删除 list 中的元素</strong></p>
<ul>
<li>用 pop() 方法删除 list 末尾的元素</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">names.pop()</span><br></pre></td></tr></tbody></table></figure>
<pre><code>'Tom'
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(names)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>['James', 'Jack', 'Michael', 'Emma', 'Emily']
</code></pre>
<ul>
<li>删除指定位置的元素，用 pop(i) 方法</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">names.pop(<span class="number">0</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>'James'
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(names)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>['Jack', 'Michael', 'Emma', 'Emily']
</code></pre>
<p><strong>修改 list 中的元素</strong></p>
<p>可以直接通过 list 的索引进行赋值来实现</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">names[<span class="number">1</span>] = <span class="string">'Black'</span></span><br><span class="line"><span class="built_in">print</span>(names)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>['Jack', 'Black', 'Emma', 'Emily']
</code></pre>
<h3 id="列表操作符"><a class="markdownIt-Anchor" href="#列表操作符"></a> 列表操作符</h3>
<p>列表可以进行“+”和“*”运算</p>
<p>“+”相当于拼接链表</p>
<p>“*”相当于重复列表</p>
<p>此外，还可以判断元素是否存在于列表中</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">l1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">l2 = [<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 列表相加</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">'列表相加：'</span>,l1+l2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 列表相乘</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">'列表相乘：'</span>,l1*<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 判断元素是否存在于列表中</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">'判断元素是否存在于列表中：'</span>,<span class="number">1</span> <span class="keyword">in</span> l1, <span class="string">'a'</span> <span class="keyword">in</span> l1)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>列表相加： [1, 2, 3, 'a', 'b', 'c']
列表相乘： [1, 2, 3, 1, 2, 3]
判断元素是否存在于列表中： True False
</code></pre>
<h3 id="列表函数-方法"><a class="markdownIt-Anchor" href="#列表函数-方法"></a> 列表函数 &amp; 方法</h3>
<p>列表的<strong>常用函数</strong>：</p>
<ul>
<li><code>len(list)</code>，列表的长度，即列表元素个数</li>
<li><code>max(list)</code>，返回列表最大值</li>
<li><code>min(list)</code>，返回列表最小值</li>
<li><code>list(sep)</code>，将元组转为列表</li>
</ul>
<p>列表的<strong>常用方法</strong>：</p>
<p>除了前面提到的增、改、删等方法外，还有其他一些常用方法</p>
<ul>
<li><code>list.count(obj)</code>，统计某个元素在列表中出现的次数</li>
<li><code>list.extend(seq)</code>，在列表末尾一次性追加另一个序列中的多个值（用新列表扩展原来的列表）</li>
<li><code>list.index(obj)</code>，从列表中找出某个值的第一个匹配项的索引位置</li>
<li><code>list.remove(obj)</code>，移除列表中某个值的第一个匹配项</li>
<li><code>list.sort()</code>，对列表进行排序</li>
<li><code>list.reverse()</code>，对列表进行反向排序</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">l1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">9</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">1</span>]</span><br><span class="line">l2 = [<span class="number">7</span>,<span class="number">5</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">2</span>]</span><br><span class="line">t = (<span class="number">10</span>,<span class="number">100</span>,<span class="number">50</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">'列表的最大值：'</span>,<span class="built_in">max</span>(l1))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">'列表的最小值：'</span>,<span class="built_in">min</span>(l1))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">'将元组转为列表：'</span>,<span class="built_in">list</span>(t))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>列表的最大值： 9
列表的最小值： 1
将元组转为列表： [10, 100, 50]
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">'count：'</span>,l1.count(<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">l1.extend(l2)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">'extend：'</span>,l1)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">'index：'</span>,l1.index(<span class="number">2</span>))</span><br><span class="line"></span><br><span class="line">l2.remove(<span class="number">7</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">'remove：'</span>,l2)</span><br><span class="line"></span><br><span class="line">l2.sort()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">'sort：'</span>,l2)</span><br><span class="line"></span><br><span class="line">l2.reverse()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">'reverse：'</span>,l2)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>count： 2
extend： [1, 2, 3, 5, 4, 6, 9, 8, 7, 1, 7, 5, 1, 3, 2]
index： 1
remove： [5, 1, 3, 2]
sort： [1, 2, 3, 5]
reverse： [5, 3, 2, 1]
</code></pre>
<h2 id="list-中元素的类型"><a class="markdownIt-Anchor" href="#list-中元素的类型"></a> list 中元素的类型</h2>
<p>同一个 list 中的元素的类型可以是字符串（str）、整型（int）、布尔型（Boolean）、以及嵌套的 list 等等</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">list_1 = [<span class="string">'Tom'</span>, <span class="number">1</span>, <span class="number">2</span>, [<span class="number">1.1</span>, <span class="number">2.2</span>], <span class="literal">True</span>]</span><br><span class="line"><span class="built_in">print</span>(list_1)</span><br><span class="line"><span class="built_in">print</span>(list_1[<span class="number">3</span>])</span><br><span class="line"><span class="built_in">print</span>(list_1[<span class="number">3</span>][<span class="number">0</span>])</span><br></pre></td></tr></tbody></table></figure>
<pre><code>['Tom', 1, 2, [1.1, 2.2], True]
[1.1, 2.2]
1.1
</code></pre>
<h2 id="list-的切片slices"><a class="markdownIt-Anchor" href="#list-的切片slices"></a> list 的切片（slices）</h2>
<p>可以通过切片 (slices) 的形式来获取 list 部分连续的元素。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">list_1 =  [<span class="string">'James'</span>, <span class="string">'Ava'</span>, <span class="string">'Michael'</span>, <span class="string">'Emma'</span>, <span class="string">'Emily'</span>, <span class="string">'Jacob'</span>]</span><br><span class="line"><span class="built_in">print</span>(list_1)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>['James', 'Ava', 'Michael', 'Emma', 'Emily', 'Jacob']
</code></pre>
<p>list 中以切片形式使用时，其结构可以参考：<code>new_list[start:end:step]</code></p>
<p>其中 start 和 end 表示索引位置的开始和结束，选取的元素包括 start ，但是不包含 end</p>
<p>step 表示步长，默认 step 为1</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(list_1[<span class="number">0</span>:<span class="number">2</span>])</span><br><span class="line"><span class="built_in">print</span>(list_1[::<span class="number">2</span>])</span><br><span class="line"><span class="built_in">print</span>(list_1[-<span class="number">1</span>])</span><br><span class="line"><span class="built_in">print</span>(list_1[::-<span class="number">1</span>])</span><br></pre></td></tr></tbody></table></figure>
<pre><code>['James', 'Ava']
['James', 'Michael', 'Emily']
Jacob
['Jacob', 'Emily', 'Emma', 'Michael', 'Ava', 'James']
</code></pre>
<p>当 step 为正数时，从左到右以该步长来获取列表中的元素；</p>
<p>当 step 为负数时，从右到左以该步长的绝对值来获取列表中的元素。</p>
<h2 id="列表推导式"><a class="markdownIt-Anchor" href="#列表推导式"></a> 列表推导式</h2>
<p>但是如果想获取<strong>离散的元素</strong>，比如想获取第 1、3、4 个元素</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(list_1[<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>])</span><br></pre></td></tr></tbody></table></figure>
<pre><code>---------------------------------------------------------------------------

TypeError                                 Traceback (most recent call last)

Cell In[158], line 1
----&gt; 1 print(list_1[1,3,4])


TypeError: list indices must be integers or slices, not tuple
</code></pre>
<p>可以看到直接报错，直接使用离散的索引是不行的，它提示 list 的索引必须是整数或者 slices。</p>
<p>此时，则可以使用列表推导式完成任务。</p>
<h3 id="列表推导式的一般情况"><a class="markdownIt-Anchor" href="#列表推导式的一般情况"></a> 列表推导式的一般情况</h3>
<p>列表推导式的一般语法结构：</p>
<p><code>new_list = [x for x in iterable]</code></p>
<p>其中，<code>iterable</code>表示可迭代的对象，包括字符串（str）、列表（list）、元组（tuple）、字典（dict）、集合（set），以及生成器（generator）等。</p>
<p>几个简单的示例：</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">str_list = [x.lower() <span class="keyword">for</span> x <span class="keyword">in</span> <span class="string">'Hello, World'</span>]</span><br><span class="line"><span class="built_in">print</span>(str_list)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>['h', 'e', 'l', 'l', 'o', ',', ' ', 'w', 'o', 'r', 'l', 'd']
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">list_list = [x*<span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]]</span><br><span class="line"><span class="built_in">print</span>(list_list)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[2, 4, 6, 8]
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">tuple_list = [x**<span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> (<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)]</span><br><span class="line"><span class="built_in">print</span>(tuple_list)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[1, 4, 9, 16]
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">ge_list = [x <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">8</span>)]</span><br><span class="line"><span class="built_in">print</span>(ge_list)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[0, 1, 2, 3, 4, 5, 6, 7]
</code></pre>
<h3 id="两层-for-循环的列表推导式"><a class="markdownIt-Anchor" href="#两层-for-循环的列表推导式"></a> 两层 for 循环的列表推导式</h3>
<p>列表推导式中，可以同时包含多个 for 循环，比如同时两个 for 循环</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">two_for_list = [x**<span class="number">2</span>+y <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>) <span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span> (<span class="number">4</span>,<span class="number">8</span>)]</span><br><span class="line"><span class="built_in">print</span>(two_for_list)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[4, 5, 6, 7, 5, 6, 7, 8, 8, 9, 10, 11, 13, 14, 15, 16, 20, 21, 22, 23]
</code></pre>
<p>上述结果跟下面的写法结果是一致的：</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">two_for_list = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line">    <span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">4</span>,<span class="number">8</span>):</span><br><span class="line">        two_for_list.append(x**<span class="number">2</span>+y)</span><br><span class="line"><span class="built_in">print</span>(two_for_list)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[4, 5, 6, 7, 5, 6, 7, 8, 8, 9, 10, 11, 13, 14, 15, 16, 20, 21, 22, 23]
</code></pre>
<h3 id="使用两个变量来生成-list"><a class="markdownIt-Anchor" href="#使用两个变量来生成-list"></a> 使用两个变量来生成 list</h3>
<p>列表推导式也可以使用两个或多个变量来生成 list，结合字典的使用，举例如下：</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">d = {<span class="string">'x'</span>:<span class="string">'1'</span>, <span class="string">'y'</span>:<span class="string">'2'</span>, <span class="string">'z'</span>:<span class="string">'3'</span>}</span><br><span class="line">d_list = [k + <span class="string">'='</span> + v <span class="keyword">for</span> k,v <span class="keyword">in</span> d.items()]</span><br><span class="line"><span class="built_in">print</span>(d_list)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>['x=1', 'y=2', 'z=3']
</code></pre>
<h3 id="含-if-语句的列表推导式"><a class="markdownIt-Anchor" href="#含-if-语句的列表推导式"></a> 含 if 语句的列表推导式</h3>
<p>列表推导式中还可以引入 if 条件语句</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">if_list = [x <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>) <span class="keyword">if</span> x%<span class="number">2</span>==<span class="number">0</span>]</span><br><span class="line"><span class="built_in">print</span>(if_list)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[0, 2, 4, 6, 8]
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">if_list = []</span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">    <span class="keyword">if</span>(x%<span class="number">2</span>==<span class="number">0</span>):</span><br><span class="line">        if_list.append(x)</span><br><span class="line"><span class="built_in">print</span>(if_list)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[0, 2, 4, 6, 8]
</code></pre>
<p>当然，如果仅仅是编写上更简洁，可能不一定能显现出列表推导式的优势，下面我们来对比下上述两种方式的运行效率。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">%%timeit</span><br><span class="line"></span><br><span class="line">if_list = [x <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>) <span class="keyword">if</span> x%<span class="number">2</span>==<span class="number">0</span>]</span><br><span class="line">if_list</span><br></pre></td></tr></tbody></table></figure>
<pre><code>689 ns ± 6.58 ns per loop (mean ± std. dev. of 7 runs, 1,000,000 loops each)
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">%%timeit</span><br><span class="line"></span><br><span class="line">if_list = []</span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">    <span class="keyword">if</span>(x%<span class="number">2</span>==<span class="number">0</span>):</span><br><span class="line">        if_list.append(x)</span><br><span class="line">if_list</span><br></pre></td></tr></tbody></table></figure>
<pre><code>729 ns ± 2.9 ns per loop (mean ± std. dev. of 7 runs, 1,000,000 loops each)
</code></pre>
<p>从上面的运行结果进行对比，可以看出列表推导式的运行效率要高于普通的 for 循环编写方式。</p>
<p><strong>包含 if-else 语句的列表推导式</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">[x**<span class="number">2</span> <span class="keyword">if</span> x%<span class="number">2</span>==<span class="number">0</span> <span class="keyword">else</span> x+<span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)]</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[0, 3, 4, 5, 16, 7, 36, 9, 64, 11]
</code></pre>
<p><strong>包含两个 if 语句的列表推导式</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">[x**<span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>) <span class="keyword">if</span> x%<span class="number">2</span>==<span class="number">0</span> <span class="keyword">if</span> x%<span class="number">3</span>==<span class="number">0</span>]</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[0, 36]
</code></pre>
<h2 id="小结"><a class="markdownIt-Anchor" href="#小结"></a> 小结</h2>
<p>如果想获取离散的元素：</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">list_1 =  [<span class="string">'James'</span>, <span class="string">'Ava'</span>, <span class="string">'Michael'</span>, <span class="string">'Emma'</span>, <span class="string">'Emily'</span>, <span class="string">'Jacob'</span>]</span><br><span class="line">[list_1[i] <span class="keyword">for</span> i <span class="keyword">in</span> [<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>]]</span><br></pre></td></tr></tbody></table></figure>
<pre><code>['Ava', 'Emma', 'Emily']
</code></pre>
<h1 id="字典"><a class="markdownIt-Anchor" href="#字典"></a> 字典</h1>
<p>主要内容包括：</p>
<ul>
<li>字典的基本用法</li>
<li>字典推导式</li>
<li>字典合并</li>
<li>嵌套字典</li>
</ul>
<h2 id="基本用法"><a class="markdownIt-Anchor" href="#基本用法"></a> 基本用法</h2>
<p>字典是一种可以将相关的两个信息关联起来的操作，并且字典可存储的信息量几乎不受限制。</p>
<p>字典用于存放具有映射关系的数据。</p>
<p>为了保存具有映射关系的数据，Python 提供了字典，字典相当于保存了两组数据，其中一组数据是关键数据，被称为 key；另一组数据可通过 key 来访问，被称为 value。</p>
<h3 id="创建字典"><a class="markdownIt-Anchor" href="#创建字典"></a> 创建字典</h3>
<p>字典是以 key、value 的形式创建的。</p>
<p>字典的每个键值 <code>key=&gt;value</code> 对用冒号 : 分割，每个键值对之间用逗号 , 分割，整个字典包括在花括号 {} 中, 格式如下所示：<br>
d = {key1 : value1, key2 : value2 }</p>
<p>一般情况下，字典的创建可以有以下几种方式：</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 创建一个空的字典</span></span><br><span class="line">dic_1 = {}</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建key值为整数的字典</span></span><br><span class="line">dic_2 = {<span class="number">1</span>:<span class="string">'one'</span>, <span class="number">2</span>:<span class="string">'second'</span>}</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建key值为string的字典</span></span><br><span class="line">dic_3 = {<span class="string">'name'</span>:<span class="string">'Tom'</span>, <span class="string">'age'</span>:<span class="string">'22'</span>}</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建key值为数字和string混合的字典</span></span><br><span class="line">dic_4 = {<span class="string">'name'</span>: <span class="string">'Tom'</span>, <span class="number">1</span>: [<span class="number">2</span>, <span class="number">4</span>, <span class="number">3</span>]}</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用dict()函数创建字典</span></span><br><span class="line">dic_5 = <span class="built_in">dict</span>({<span class="number">1</span>:<span class="string">'Tom'</span>, <span class="number">2</span>:<span class="string">'Jack'</span>})</span><br><span class="line"></span><br><span class="line"><span class="comment"># 以元组的形式组成序列创建字典</span></span><br><span class="line">dic_6 = <span class="built_in">dict</span>([(<span class="number">1</span>,<span class="string">'apple'</span>), (<span class="number">2</span>,<span class="string">'ball'</span>)])</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">'dic_1:'</span>,dic_1)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">'dic_2:'</span>,dic_2)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">'dic_3:'</span>,dic_3)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">'dic_4:'</span>,dic_4)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">'dic_5:'</span>,dic_5)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">'dic_6:'</span>,dic_6)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>dic_1: {}
dic_2: {1: 'one', 2: 'second'}
dic_3: {'name': 'Tom', 'age': '22'}
dic_4: {'name': 'Tom', 1: [2, 4, 3]}
dic_5: {1: 'Tom', 2: 'Jack'}
dic_6: {1: 'apple', 2: 'ball'}
</code></pre>
<h3 id="获取字典中的元素"><a class="markdownIt-Anchor" href="#获取字典中的元素"></a> 获取字典中的元素</h3>
<p><strong>通过 key 来获取 value</strong></p>
<p>获取字典中的元素，可以直接通过 key 值来获取对应的 value，如下：</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">dic_ = {<span class="string">'name'</span>: <span class="string">'John'</span>, <span class="string">'age'</span>: <span class="number">25</span> , <span class="number">1</span>: [<span class="number">2</span>, <span class="number">4</span>, <span class="number">3</span>]}</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(dic_[<span class="string">'name'</span>])</span><br><span class="line"><span class="built_in">print</span>(dic_.get(<span class="string">'name'</span>))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>John
John
</code></pre>
<p>如果字典的 key 值中没有该元素，则不能获取相应的 value，这种情况下产生错误。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(dic_[<span class="string">'name1'</span>])</span><br></pre></td></tr></tbody></table></figure>
<pre><code>---------------------------------------------------------------------------

KeyError                                  Traceback (most recent call last)

Cell In[205], line 1
----&gt; 1 print(dic_['name1'])


KeyError: 'name1'
</code></pre>
<p><strong>通过 value 来获取 key</strong></p>
<p>通过 value 来获取 key 值，在 Python 中并没有提供直接的方法，但是可以通过自定义函数来实现，如下：</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">get_keys</span>(<span class="params">d,value</span>):</span><br><span class="line">    <span class="keyword">return</span> [k <span class="keyword">for</span> k,v <span class="keyword">in</span> d.items() <span class="keyword">if</span> v==value]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(get_keys(dic_,<span class="string">'John'</span>))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>['name']
</code></pre>
<h3 id="在字典中修改或添加元素"><a class="markdownIt-Anchor" href="#在字典中修改或添加元素"></a> 在字典中修改或添加元素</h3>
<p>在字典中，可以修改已有 key 对应的 value 值，或者添加新的 key-value 键值对数据，如下：</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">dic_ = {<span class="string">'name'</span>: <span class="string">'John'</span>, <span class="string">'age'</span>: <span class="number">25</span> , <span class="number">1</span>: [<span class="number">2</span>, <span class="number">4</span>, <span class="number">3</span>]}</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改已有key对应的value的值</span></span><br><span class="line">dic_[<span class="string">'age'</span>] = <span class="number">35</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加新的key-value数据组</span></span><br><span class="line">dic_[<span class="string">'gender'</span>] = <span class="string">'man'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(dic_)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>{'name': 'John', 'age': 35, 1: [2, 4, 3], 'gender': 'man'}
</code></pre>
<h3 id="从字典中删除元素"><a class="markdownIt-Anchor" href="#从字典中删除元素"></a> 从字典中删除元素</h3>
<p><strong>pop()方法</strong></p>
<p>移除字典数据 pop() 方法的作用是：删除指定给定键所对应的值，返回这个值并从字典中把它移除。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 使用pop()方法来删除</span></span><br><span class="line"></span><br><span class="line">dic_ = {<span class="string">'name'</span>: <span class="string">'John'</span>, <span class="string">'age'</span>: <span class="number">25</span> , <span class="number">1</span>: [<span class="number">2</span>, <span class="number">4</span>, <span class="number">3</span>]}</span><br><span class="line"></span><br><span class="line">dic_.pop(<span class="string">'age'</span>)</span><br><span class="line"><span class="built_in">print</span>(dic_)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>{'name': 'John', 1: [2, 4, 3]}
</code></pre>
<p><strong>del 方法</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 使用 del 方法来删除</span></span><br><span class="line"></span><br><span class="line">dic_ = {<span class="string">'name'</span>: <span class="string">'John'</span>, <span class="string">'age'</span>: <span class="number">25</span> , <span class="number">1</span>: [<span class="number">2</span>, <span class="number">4</span>, <span class="number">3</span>]}</span><br><span class="line"></span><br><span class="line"><span class="keyword">del</span> dic_[<span class="string">'age'</span>]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(dic_)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>{'name': 'John', 1: [2, 4, 3]}
</code></pre>
<p>另外，del 可以删除整个字典</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">dic_ = {<span class="string">'name'</span>: <span class="string">'John'</span>, <span class="string">'age'</span>: <span class="number">25</span> , <span class="number">1</span>: [<span class="number">2</span>, <span class="number">4</span>, <span class="number">3</span>]}</span><br><span class="line"></span><br><span class="line"><span class="keyword">del</span> dic_</span><br><span class="line"><span class="built_in">print</span>(dic_)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>---------------------------------------------------------------------------

NameError                                 Traceback (most recent call last)

Cell In[214], line 4
      1 dic_ = {'name': 'John', 'age': 25 , 1: [2, 4, 3]}
      3 del dic_
----&gt; 4 print(dic_)


NameError: name 'dic_' is not defined
</code></pre>
<p><strong>clear() 方法</strong></p>
<p>clear() 方法是用来清除字典中的所有数据，因为是原地操作，所以返回 None（也可以理解为没有返回值）</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 使用 clear() 方法来清空字典中的所有数据，返回的是一个空字典</span></span><br><span class="line"></span><br><span class="line">dic_ = {<span class="string">'name'</span>: <span class="string">'John'</span>, <span class="string">'age'</span>: <span class="number">25</span> , <span class="number">1</span>: [<span class="number">2</span>, <span class="number">4</span>, <span class="number">3</span>]}</span><br><span class="line"></span><br><span class="line">dic_.clear()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(dic_)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>{}
</code></pre>
<h3 id="字典内置函数-方法"><a class="markdownIt-Anchor" href="#字典内置函数-方法"></a> 字典内置函数 &amp; 方法</h3>
<p>Python 字典包含了以下内置函数：</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><menclose notation="left"><mtable rowspacing="0.15999999999999992em" columnalign="left left" columnspacing="1em" rowlines="solid none none"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>&nbsp;序号&nbsp;</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>&nbsp;函数及描述&nbsp;</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>&nbsp;len(dict)&nbsp;</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>&nbsp;计算字典元素个数,&nbsp;即键的总数&nbsp;</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>&nbsp;str(dict)&nbsp;</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>&nbsp;输出字典可打印的字符串表示&nbsp;</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>&nbsp;type(variable)&nbsp;</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>&nbsp;返回输入的变量类型,&nbsp;如果变量是字典就返回字典类型&nbsp;</mtext></mstyle></mtd></mtr></mtable></menclose></mrow><annotation encoding="application/x-tex">\begin{array}{ll}
\hline \text { 序号 } &amp; \text { 函数及描述 } \\
\hline \text { len(dict) } &amp; \text { 计算字典元素个数, 即键的总数 } \\
\text { str(dict) } &amp; \text { 输出字典可打印的字符串表示 } \\
\text { type(variable) } &amp; \text { 返回输入的变量类型, 如果变量是字典就返回字典类型 }
\end{array}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:4.840000000000001em;vertical-align:-2.1500000000000004em;"></span><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6900000000000004em;"><span style="top:-4.65em;"><span class="pstrut" style="height:4.65em;"></span><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6500000000000004em;"><span style="top:-4.8100000000000005em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">&nbsp;</span><span class="mord cjk_fallback">序号</span><span class="mord">&nbsp;</span></span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">&nbsp;len(dict)&nbsp;</span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">&nbsp;str(dict)&nbsp;</span></span></span></span><span style="top:-1.2099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">&nbsp;type(variable)&nbsp;</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.1500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.6500000000000004em;"><span style="top:-4.8100000000000005em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">&nbsp;</span><span class="mord cjk_fallback">函数及描述</span><span class="mord">&nbsp;</span></span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">&nbsp;</span><span class="mord cjk_fallback">计算字典元素个数</span><span class="mord">,&nbsp;</span><span class="mord cjk_fallback">即键的总数</span><span class="mord">&nbsp;</span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">&nbsp;</span><span class="mord cjk_fallback">输出字典可打印的字符串表示</span><span class="mord">&nbsp;</span></span></span></span><span style="top:-1.2099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">&nbsp;</span><span class="mord cjk_fallback">返回输入的变量类型</span><span class="mord">,&nbsp;</span><span class="mord cjk_fallback">如果变量是字典就返回字典类型</span><span class="mord">&nbsp;</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.1500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span><span style="top:-6.1000000000000005em;"><span class="pstrut" style="height:4.65em;"></span><span class="hline" style="border-bottom-width:0.04em;"></span></span><span style="top:-7.300000000000001em;"><span class="pstrut" style="height:4.65em;"></span><span class="hline" style="border-bottom-width:0.04em;"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.1500000000000004em;"><span></span></span></span></span></span></span></span></span></span></p>
<p><strong>len(), str(), type() 函数</strong>：</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">dic_ = {<span class="string">'name'</span>: <span class="string">'John'</span>, <span class="string">'age'</span>: <span class="number">25</span> , <span class="number">1</span>: [<span class="number">2</span>, <span class="number">4</span>, <span class="number">3</span>]}</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(dic_))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">str</span>(dic_))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(dic_))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>3
{'name': 'John', 'age': 25, 1: [2, 4, 3]}
&lt;class 'dict'&gt;
</code></pre>
<p>Python 字典包含以下一些方法：</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><menclose notation="top bottom left right"><mtable rowspacing="0.15999999999999992em" columnalign="center center" columnlines="solid" columnspacing="1em" rowlines="solid solid solid solid solid solid solid solid solid solid solid"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>&nbsp;函数&nbsp;</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>&nbsp;函数描述&nbsp;</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>&nbsp;clear()&nbsp;</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>&nbsp;删除字典内所有元素,&nbsp;返回空字典&nbsp;</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi mathvariant="normal">copy</mi><mo>⁡</mo><mo stretchy="false">(</mo><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>&nbsp;返回一个字典的浅复制&nbsp;</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtable rowspacing="0.15999999999999992em" columnalign="left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>&nbsp;fromkeys(seq[,&nbsp;</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>&nbsp;val])&nbsp;</mtext></mstyle></mtd></mtr></mtable></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>&nbsp;创建一个新字典,&nbsp;以序列&nbsp;seq&nbsp;中元素做字典的键,&nbsp;val&nbsp;为字典所有键对应的初始值&nbsp;</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtable rowspacing="0.15999999999999992em" columnalign="left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>&nbsp;get(key,&nbsp;</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>&nbsp;default=None)&nbsp;</mtext></mstyle></mtd></mtr></mtable></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>&nbsp;返回指定键的值，如果值不在字典中返回&nbsp;default&nbsp;值&nbsp;</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>&nbsp;items()&nbsp;</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>&nbsp;以列表返回可遍历的&nbsp;(键,&nbsp;值)&nbsp;元组数组&nbsp;</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>&nbsp;keys()&nbsp;</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>&nbsp;以列表返回一个字典所有的键&nbsp;</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtable rowspacing="0.15999999999999992em" columnalign="left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>&nbsp;setdefault(key,&nbsp;</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>&nbsp;default=None)&nbsp;</mtext></mstyle></mtd></mtr></mtable></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>&nbsp;和&nbsp;get()&nbsp;类似,&nbsp;但如果键不存在于字典中,&nbsp;将会添加键并将值设为&nbsp;default&nbsp;</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>&nbsp;update(dict2)&nbsp;</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>&nbsp;把字典&nbsp;dict2&nbsp;的键/值对更新到&nbsp;dict&nbsp;里&nbsp;</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>&nbsp;values()&nbsp;</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>&nbsp;以列表返回字典中的所有值&nbsp;</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>&nbsp;pop(key[,default])&nbsp;</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtable rowspacing="0.15999999999999992em" columnalign="left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>&nbsp;删除字典给定键&nbsp;key&nbsp;所对应的值，返回值为被删除的值。key&nbsp;值必须给出。否则，返回&nbsp;</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>&nbsp;default&nbsp;值。&nbsp;</mtext></mstyle></mtd></mtr></mtable></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>&nbsp;popitem()&nbsp;</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtable rowspacing="0.15999999999999992em" columnalign="left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>&nbsp;随机返回并删除字典中的一对键和值。Python&nbsp;</mtext><mn>3.6</mn><mtext>&nbsp;及以后版本,&nbsp;以&nbsp;LIFO&nbsp;的原则进行删除&nbsp;</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>&nbsp;的,&nbsp;是有序进行删除的。&nbsp;</mtext></mstyle></mtd></mtr></mtable></mstyle></mtd></mtr></mtable></menclose></mrow><annotation encoding="application/x-tex">\begin{array}{|c|c|}
\hline \text { 函数 } &amp; \text { 函数描述 } \\
\hline \text { clear() } &amp; \text { 删除字典内所有元素, 返回空字典 } \\
\hline \operatorname{copy}() &amp; \text { 返回一个字典的浅复制 } \\
\hline \begin{array}{l}
\text { fromkeys(seq[, } \\
\text { val]) }
\end{array} &amp; \text { 创建一个新字典, 以序列 seq 中元素做字典的键, val 为字典所有键对应的初始值 } \\
\hline \begin{array}{l}
\text { get(key, } \\
\text { default=None) }
\end{array} &amp; \text { 返回指定键的值，如果值不在字典中返回 default 值 } \\
\hline \text { items() } &amp; \text { 以列表返回可遍历的 (键, 值) 元组数组 } \\
\hline \text { keys() } &amp; \text { 以列表返回一个字典所有的键 } \\
\hline \begin{array}{l}
\text { setdefault(key, } \\
\text { default=None) }
\end{array} &amp; \text { 和 get() 类似, 但如果键不存在于字典中, 将会添加键并将值设为 default } \\
\hline \text { update(dict2) } &amp; \text { 把字典 dict2 的键/值对更新到 dict 里 } \\
\hline \text { values() } &amp; \text { 以列表返回字典中的所有值 } \\
\hline \text { pop(key[,default]) } &amp; \begin{array}{l}
\text { 删除字典给定键 key 所对应的值，返回值为被删除的值。key 值必须给出。否则，返回 } \\
\text { default 值。 }
\end{array} \\
\hline \text { popitem() } &amp; \begin{array}{l}
\text { 随机返回并删除字典中的一对键和值。Python } 3.6 \text { 及以后版本, 以 LIFO 的原则进行删除 } \\
\text { 的, 是有序进行删除的。 }
\end{array} \\
\hline
\end{array}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:20.43999999999999em;vertical-align:-9.95em;"></span><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:10.489999999999991em;"><span style="top:-12.45em;"><span class="pstrut" style="height:12.45em;"></span><span class="mtable"><span class="vertical-separator" style="height:20.399999999999995em;border-right-width:0.04em;border-right-style:solid;margin:0 -0.02em;vertical-align:-9.949999999999998em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:10.45em;"><span style="top:-13.059999999999999em;"><span class="pstrut" style="height:3.45em;"></span><span class="mord"><span class="mord text"><span class="mord">&nbsp;</span><span class="mord cjk_fallback">函数</span><span class="mord">&nbsp;</span></span></span></span><span style="top:-11.859999999999996em;"><span class="pstrut" style="height:3.45em;"></span><span class="mord"><span class="mord text"><span class="mord">&nbsp;clear()&nbsp;</span></span></span></span><span style="top:-10.659999999999997em;"><span class="pstrut" style="height:3.45em;"></span><span class="mord"><span class="mop"><span class="mord mathrm">c</span><span class="mord mathrm">o</span><span class="mord mathrm">p</span><span class="mord mathrm" style="margin-right:0.01389em;">y</span></span><span class="mopen">(</span><span class="mclose">)</span></span></span><span style="top:-8.849999999999998em;"><span class="pstrut" style="height:3.45em;"></span><span class="mord"><span class="mord"><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">&nbsp;fromkeys(seq[,&nbsp;</span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">&nbsp;val])&nbsp;</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span></span></span><span style="top:-6.4499999999999975em;"><span class="pstrut" style="height:3.45em;"></span><span class="mord"><span class="mord"><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">&nbsp;get(key,&nbsp;</span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">&nbsp;default=None)&nbsp;</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span></span></span><span style="top:-4.6599999999999975em;"><span class="pstrut" style="height:3.45em;"></span><span class="mord"><span class="mord text"><span class="mord">&nbsp;items()&nbsp;</span></span></span></span><span style="top:-3.4599999999999977em;"><span class="pstrut" style="height:3.45em;"></span><span class="mord"><span class="mord text"><span class="mord">&nbsp;keys()&nbsp;</span></span></span></span><span style="top:-1.6499999999999992em;"><span class="pstrut" style="height:3.45em;"></span><span class="mord"><span class="mord"><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">&nbsp;setdefault(key,&nbsp;</span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">&nbsp;default=None)&nbsp;</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span></span></span><span style="top:0.14000000000000218em;"><span class="pstrut" style="height:3.45em;"></span><span class="mord"><span class="mord text"><span class="mord">&nbsp;update(dict2)&nbsp;</span></span></span></span><span style="top:1.3400000000000019em;"><span class="pstrut" style="height:3.45em;"></span><span class="mord"><span class="mord text"><span class="mord">&nbsp;values()&nbsp;</span></span></span></span><span style="top:3.1500000000000004em;"><span class="pstrut" style="height:3.45em;"></span><span class="mord"><span class="mord text"><span class="mord">&nbsp;pop(key[,default])&nbsp;</span></span></span></span><span style="top:5.549999999999999em;"><span class="pstrut" style="height:3.45em;"></span><span class="mord"><span class="mord text"><span class="mord">&nbsp;popitem()&nbsp;</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:9.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="vertical-separator" style="height:20.399999999999995em;border-right-width:0.04em;border-right-style:solid;margin:0 -0.02em;vertical-align:-9.949999999999998em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:10.45em;"><span style="top:-13.059999999999999em;"><span class="pstrut" style="height:3.45em;"></span><span class="mord"><span class="mord text"><span class="mord">&nbsp;</span><span class="mord cjk_fallback">函数描述</span><span class="mord">&nbsp;</span></span></span></span><span style="top:-11.859999999999996em;"><span class="pstrut" style="height:3.45em;"></span><span class="mord"><span class="mord text"><span class="mord">&nbsp;</span><span class="mord cjk_fallback">删除字典内所有元素</span><span class="mord">,&nbsp;</span><span class="mord cjk_fallback">返回空字典</span><span class="mord">&nbsp;</span></span></span></span><span style="top:-10.659999999999997em;"><span class="pstrut" style="height:3.45em;"></span><span class="mord"><span class="mord text"><span class="mord">&nbsp;</span><span class="mord cjk_fallback">返回一个字典的浅复制</span><span class="mord">&nbsp;</span></span></span></span><span style="top:-8.849999999999998em;"><span class="pstrut" style="height:3.45em;"></span><span class="mord"><span class="mord text"><span class="mord">&nbsp;</span><span class="mord cjk_fallback">创建一个新字典</span><span class="mord">,&nbsp;</span><span class="mord cjk_fallback">以序列</span><span class="mord">&nbsp;seq&nbsp;</span><span class="mord cjk_fallback">中元素做字典的键</span><span class="mord">,&nbsp;val&nbsp;</span><span class="mord cjk_fallback">为字典所有键对应的初始值</span><span class="mord">&nbsp;</span></span></span></span><span style="top:-6.4499999999999975em;"><span class="pstrut" style="height:3.45em;"></span><span class="mord"><span class="mord text"><span class="mord">&nbsp;</span><span class="mord cjk_fallback">返回指定键的值，如果值不在字典中返回</span><span class="mord">&nbsp;default&nbsp;</span><span class="mord cjk_fallback">值</span><span class="mord">&nbsp;</span></span></span></span><span style="top:-4.6599999999999975em;"><span class="pstrut" style="height:3.45em;"></span><span class="mord"><span class="mord text"><span class="mord">&nbsp;</span><span class="mord cjk_fallback">以列表返回可遍历的</span><span class="mord">&nbsp;(</span><span class="mord cjk_fallback">键</span><span class="mord">,&nbsp;</span><span class="mord cjk_fallback">值</span><span class="mord">)&nbsp;</span><span class="mord cjk_fallback">元组数组</span><span class="mord">&nbsp;</span></span></span></span><span style="top:-3.4599999999999977em;"><span class="pstrut" style="height:3.45em;"></span><span class="mord"><span class="mord text"><span class="mord">&nbsp;</span><span class="mord cjk_fallback">以列表返回一个字典所有的键</span><span class="mord">&nbsp;</span></span></span></span><span style="top:-1.6499999999999992em;"><span class="pstrut" style="height:3.45em;"></span><span class="mord"><span class="mord text"><span class="mord">&nbsp;</span><span class="mord cjk_fallback">和</span><span class="mord">&nbsp;get()&nbsp;</span><span class="mord cjk_fallback">类似</span><span class="mord">,&nbsp;</span><span class="mord cjk_fallback">但如果键不存在于字典中</span><span class="mord">,&nbsp;</span><span class="mord cjk_fallback">将会添加键并将值设为</span><span class="mord">&nbsp;default&nbsp;</span></span></span></span><span style="top:0.14000000000000218em;"><span class="pstrut" style="height:3.45em;"></span><span class="mord"><span class="mord text"><span class="mord">&nbsp;</span><span class="mord cjk_fallback">把字典</span><span class="mord">&nbsp;dict2&nbsp;</span><span class="mord cjk_fallback">的键</span><span class="mord">/</span><span class="mord cjk_fallback">值对更新到</span><span class="mord">&nbsp;dict&nbsp;</span><span class="mord cjk_fallback">里</span><span class="mord">&nbsp;</span></span></span></span><span style="top:1.3400000000000019em;"><span class="pstrut" style="height:3.45em;"></span><span class="mord"><span class="mord text"><span class="mord">&nbsp;</span><span class="mord cjk_fallback">以列表返回字典中的所有值</span><span class="mord">&nbsp;</span></span></span></span><span style="top:3.1500000000000004em;"><span class="pstrut" style="height:3.45em;"></span><span class="mord"><span class="mord"><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">&nbsp;</span><span class="mord cjk_fallback">删除字典给定键</span><span class="mord">&nbsp;key&nbsp;</span><span class="mord cjk_fallback">所对应的值，返回值为被删除的值。</span><span class="mord">key&nbsp;</span><span class="mord cjk_fallback">值必须给出。否则，返回</span><span class="mord">&nbsp;</span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">&nbsp;default&nbsp;</span><span class="mord cjk_fallback">值。</span><span class="mord">&nbsp;</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span></span></span><span style="top:5.549999999999999em;"><span class="pstrut" style="height:3.45em;"></span><span class="mord"><span class="mord"><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">&nbsp;</span><span class="mord cjk_fallback">随机返回并删除字典中的一对键和值。</span><span class="mord">Python&nbsp;</span></span><span class="mord">3</span><span class="mord">.</span><span class="mord">6</span><span class="mord text"><span class="mord">&nbsp;</span><span class="mord cjk_fallback">及以后版本</span><span class="mord">,&nbsp;</span><span class="mord cjk_fallback">以</span><span class="mord">&nbsp;LIFO&nbsp;</span><span class="mord cjk_fallback">的原则进行删除</span><span class="mord">&nbsp;</span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">&nbsp;</span><span class="mord cjk_fallback">的</span><span class="mord">,&nbsp;</span><span class="mord cjk_fallback">是有序进行删除的。</span><span class="mord">&nbsp;</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:9.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="vertical-separator" style="height:20.399999999999995em;border-right-width:0.04em;border-right-style:solid;margin:0 -0.02em;vertical-align:-9.949999999999998em;"></span></span></span><span style="top:-2.5em;"><span class="pstrut" style="height:12.45em;"></span><span class="hline" style="border-bottom-width:0.04em;"></span></span><span style="top:-4.899999999999998em;"><span class="pstrut" style="height:12.45em;"></span><span class="hline" style="border-bottom-width:0.04em;"></span></span><span style="top:-7.299999999999996em;"><span class="pstrut" style="height:12.45em;"></span><span class="hline" style="border-bottom-width:0.04em;"></span></span><span style="top:-8.499999999999996em;"><span class="pstrut" style="height:12.45em;"></span><span class="hline" style="border-bottom-width:0.04em;"></span></span><span style="top:-9.699999999999996em;"><span class="pstrut" style="height:12.45em;"></span><span class="hline" style="border-bottom-width:0.04em;"></span></span><span style="top:-12.099999999999994em;"><span class="pstrut" style="height:12.45em;"></span><span class="hline" style="border-bottom-width:0.04em;"></span></span><span style="top:-13.299999999999994em;"><span class="pstrut" style="height:12.45em;"></span><span class="hline" style="border-bottom-width:0.04em;"></span></span><span style="top:-14.499999999999993em;"><span class="pstrut" style="height:12.45em;"></span><span class="hline" style="border-bottom-width:0.04em;"></span></span><span style="top:-16.899999999999995em;"><span class="pstrut" style="height:12.45em;"></span><span class="hline" style="border-bottom-width:0.04em;"></span></span><span style="top:-19.299999999999994em;"><span class="pstrut" style="height:12.45em;"></span><span class="hline" style="border-bottom-width:0.04em;"></span></span><span style="top:-20.499999999999993em;"><span class="pstrut" style="height:12.45em;"></span><span class="hline" style="border-bottom-width:0.04em;"></span></span><span style="top:-21.699999999999992em;"><span class="pstrut" style="height:12.45em;"></span><span class="hline" style="border-bottom-width:0.04em;"></span></span><span style="top:-22.89999999999999em;"><span class="pstrut" style="height:12.45em;"></span><span class="hline" style="border-bottom-width:0.04em;"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:9.95em;"><span></span></span></span></span></span></span></span></span></span></p>
<p><strong>copy, keys, values, items 方法</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">dic_ =  {<span class="string">'name'</span>: <span class="string">'John'</span>, <span class="string">'age'</span>: <span class="number">25</span> , <span class="number">1</span>: [<span class="number">2</span>, <span class="number">4</span>, <span class="number">3</span>], <span class="string">'gender'</span>: <span class="string">'man'</span>}</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">'copy:'</span>,dic_.copy())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">'keys:'</span>,dic_.keys())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">'values:'</span>,dic_.values())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">'items:'</span>,dic_.items())</span><br></pre></td></tr></tbody></table></figure>
<pre><code>copy: {'name': 'John', 'age': 25, 1: [2, 4, 3], 'gender': 'man'}
keys: dict_keys(['name', 'age', 1, 'gender'])
values: dict_values(['John', 25, [2, 4, 3], 'man'])
items: dict_items([('name', 'John'), ('age', 25), (1, [2, 4, 3]), ('gender', 'man')])
</code></pre>
<p><strong>update 方法</strong></p>
<p>通过 update 方法，可以更新字典的数据内容：</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">dic_1 =  {<span class="string">'name'</span>: <span class="string">'Lemon'</span>, <span class="string">'age'</span>: <span class="number">25</span> , <span class="number">1</span>: [<span class="number">2</span>, <span class="number">4</span>, <span class="number">3</span>], <span class="string">'gender'</span>: <span class="string">'man'</span>}</span><br><span class="line">dic_2 =  {<span class="string">'name'</span>: <span class="string">'John'</span>, <span class="string">'age'</span>: <span class="number">35</span> , <span class="number">1</span>: [<span class="number">2</span>, <span class="number">4</span>, <span class="number">3</span>], <span class="string">'gender'</span>: <span class="string">'man'</span>}</span><br><span class="line"></span><br><span class="line">dic_1.update(dic_2)</span><br><span class="line"><span class="built_in">print</span>(dic_1)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>{'name': 'John', 'age': 35, 1: [2, 4, 3], 'gender': 'man'}
</code></pre>
<p><strong>fromkeys 方法</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">seq = [<span class="string">'brand'</span>, <span class="string">'model'</span>, <span class="string">'year'</span>]</span><br><span class="line">value = [<span class="string">'Toyota'</span>, <span class="string">'Corolla'</span>, <span class="number">2020</span>]</span><br><span class="line"></span><br><span class="line">dic_ = <span class="built_in">dict</span>.fromkeys(seq, value)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(dic_)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<pre><code>{'brand': ['Toyota', 'Corolla', 2020], 'model': ['Toyota', 'Corolla', 2020], 'year': ['Toyota', 'Corolla', 2020]}
</code></pre>
<p><strong>zip（）方法</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">seq = [<span class="string">'brand'</span>, <span class="string">'model'</span>, <span class="string">'year'</span>]</span><br><span class="line">value = [<span class="string">'Toyota'</span>, <span class="string">'Corolla'</span>, <span class="number">2020</span>]</span><br><span class="line"></span><br><span class="line">dic_ = <span class="built_in">dict</span>(<span class="built_in">zip</span>(seq,value))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(dic_)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>{'brand': 'Toyota', 'model': 'Corolla', 'year': 2020}
</code></pre>
<p>注意<code>zip</code>和<code>fromkeys</code>的区别</p>
<p><strong>setdefault 方法</strong></p>
<p>dict.setdefault(key, default=None)</p>
<p>该方法接收两个参数，第一个参数是健的名称，第二个参数是默认值。</p>
<p>假如字典中不存在给定的键，则把默认值赋值给对应的 value，并返回默认值；</p>
<p>反之，不修改 value，只返回 value。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">dic_ = {</span><br><span class="line">    <span class="string">'name'</span>: <span class="string">'Alice'</span>,                   <span class="comment"># 字符串</span></span><br><span class="line">    <span class="string">'age'</span>: <span class="number">30</span>,                         <span class="comment"># 整数</span></span><br><span class="line">    <span class="string">'height'</span>: <span class="number">5.5</span>,                     <span class="comment"># 浮点数</span></span><br><span class="line">    <span class="string">'hobbies'</span>: [<span class="string">'reading'</span>, <span class="string">'hiking'</span>],  <span class="comment"># 列表</span></span><br><span class="line">    <span class="string">'address'</span>: (<span class="string">'123 Main St'</span>, <span class="string">'Apt 4'</span>), <span class="comment"># 元组</span></span><br><span class="line">    <span class="string">'skills'</span>: {<span class="string">'Python'</span>, <span class="string">'Data Analysis'</span>}, <span class="comment"># 集合</span></span><br><span class="line">    <span class="string">'job'</span>: {                           <span class="comment"># 嵌套字典</span></span><br><span class="line">        <span class="string">'title'</span>: <span class="string">'Data Scientist'</span>,</span><br><span class="line">        <span class="string">'salary'</span>: <span class="number">120000</span></span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">'字典中存在的key，返回对应value：'</span>, dic_.setdefault(<span class="string">'age'</span>,<span class="number">0</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">'字典中不存在的key，返回默认值： '</span>, dic_.setdefault(<span class="string">'age1'</span>,<span class="number">0</span>))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>字典中存在的key，返回对应value： 30
字典中不存在的key，返回默认值：  0
</code></pre>
<p>此外，还可以用 setdefault() 方法统计一个列表里单词出现的次数：</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">words_list = [<span class="string">'apple'</span>, <span class="string">'banana'</span>, <span class="string">'apple'</span>, <span class="string">'orange'</span>, <span class="string">'banana'</span>, <span class="string">'apple'</span>, <span class="string">'grape'</span>, <span class="string">'orange'</span>, <span class="string">'grape'</span>, <span class="string">'grape'</span>]</span><br><span class="line"></span><br><span class="line">cnts = {}</span><br><span class="line"><span class="keyword">for</span> w <span class="keyword">in</span> words_list:</span><br><span class="line">    cnts[w] = cnts.setdefault(w,<span class="number">0</span>)+<span class="number">1</span></span><br><span class="line">    </span><br><span class="line"><span class="built_in">print</span>(cnts)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>{'apple': 3, 'banana': 2, 'orange': 2, 'grape': 3}
</code></pre>
<h2 id="字典推导式"><a class="markdownIt-Anchor" href="#字典推导式"></a> 字典推导式</h2>
<p>字典推导式的一般表达式如下：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">{key: value for (key, value)in iterable}</span><br></pre></td></tr></tbody></table></figure>
<p>有些用法与列表推导式是类似的。</p>
<p>用字典推导式的方法创建字典：</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">dic_ = {x:x**<span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">6</span>)}</span><br><span class="line"><span class="built_in">print</span>(dic_)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>{0: 0, 1: 1, 2: 4, 3: 9, 4: 16, 5: 25}
</code></pre>
<p>通过两个 list 创建字典：</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">keys = [<span class="string">'name'</span>, <span class="string">'age'</span>, <span class="string">'city'</span>, <span class="string">'profession'</span>]</span><br><span class="line">values = [<span class="string">'Alice'</span>, <span class="number">30</span>, <span class="string">'New York'</span>, <span class="string">'Engineer'</span>]</span><br><span class="line"></span><br><span class="line">dic_ = {k:v <span class="keyword">for</span> (k,v) <span class="keyword">in</span> <span class="built_in">zip</span>(keys,values)}</span><br><span class="line"><span class="built_in">print</span>(dic_)</span><br><span class="line"></span><br><span class="line"><span class="comment">#也可以直接使用zip</span></span><br><span class="line">dic_1 = <span class="built_in">dict</span>(<span class="built_in">zip</span>(keys,values))</span><br><span class="line"><span class="built_in">print</span>(dic_1)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>{'name': 'Alice', 'age': 30, 'city': 'New York', 'profession': 'Engineer'}
{'name': 'Alice', 'age': 30, 'city': 'New York', 'profession': 'Engineer'}
</code></pre>
<p>在特定条件下，用字典推导式的方法创建字典：</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">dic_ = {x:x*<span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>) <span class="keyword">if</span> x%<span class="number">2</span>==<span class="number">0</span>}</span><br><span class="line"><span class="built_in">print</span>(dic_)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>{0: 0, 2: 4, 4: 8, 6: 12, 8: 16}
</code></pre>
<h2 id="字典合并"><a class="markdownIt-Anchor" href="#字典合并"></a> 字典合并</h2>
<p>先来看看下面的运行结果</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">x = {<span class="string">'a'</span>:<span class="number">1</span>, <span class="string">'b'</span>:<span class="number">2</span>}</span><br><span class="line">y = {<span class="string">'b'</span>:<span class="number">4</span>, <span class="string">'c'</span>:<span class="number">5</span>}</span><br><span class="line">z = x.update(y)</span><br><span class="line"><span class="built_in">print</span>(z)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>None
</code></pre>
<p>发现 z 返回的是 None 值，并不是我们想要的结果。</p>
<p>再来看一下此时 x 的返回结果，发现 x 已经是合并的结果。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(x)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>{'a': 1, 'b': 4, 'c': 5}
</code></pre>
<h3 id="1字典解包"><a class="markdownIt-Anchor" href="#1字典解包"></a> 1.字典解包</h3>
<p>字典解包（dictionary unpacking）是指使用 ** 操作符将一个字典的键值对解包成独立的键值对，可以将它们合并到另一个字典中或传递给一个函数。在Python中，解包操作符 ** 可以用于将字典中的内容展开成关键字参数。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">x = {<span class="string">'a'</span>:<span class="number">1</span>, <span class="string">'b'</span>:<span class="number">2</span>}</span><br><span class="line">y = {<span class="string">'b'</span>:<span class="number">4</span>, <span class="string">'c'</span>:<span class="number">5</span>}</span><br><span class="line"></span><br><span class="line">z1 = {**x, **y}</span><br><span class="line">z1</span><br></pre></td></tr></tbody></table></figure>
<pre><code>{'a': 1, 'b': 4, 'c': 5}
</code></pre>
<p>在这个例子中，<code>**x</code> 将字典 x 的内容解包，<code>**y</code> 将字典 y 的内容解包，并且把它们合并到新的字典 z 中。如果两个字典中有相同的键，后一个字典的值会覆盖前一个字典的值。</p>
<h3 id="2自定义函数"><a class="markdownIt-Anchor" href="#2自定义函数"></a> 2.自定义函数</h3>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">merge</span>(<span class="params">x,y</span>):</span><br><span class="line">    z = x.copy()</span><br><span class="line">    z.update(y)</span><br><span class="line">    <span class="keyword">return</span> z</span><br><span class="line">z2 = merge(x,y)</span><br><span class="line">z2</span><br></pre></td></tr></tbody></table></figure>
<pre><code>{'a': 1, 'b': 4, 'c': 5}
</code></pre>
<h3 id="3多个-dict-进行合并"><a class="markdownIt-Anchor" href="#3多个-dict-进行合并"></a> 3.多个 dict 进行合并</h3>
<p>多个 dictionary 合并同样可以通过自定义的形式来实现。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">merge_dicts</span>(<span class="params">*dict_args</span>):</span><br><span class="line">    result = {}</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> dict_args:</span><br><span class="line">        result.update(item)</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line">x = {<span class="string">'a'</span>:<span class="number">1</span>, <span class="string">'b'</span>:<span class="number">2</span>}</span><br><span class="line">y = {<span class="string">'b'</span>:<span class="number">4</span>, <span class="string">'c'</span>:<span class="number">5</span>}</span><br><span class="line">z = {<span class="string">'d'</span>:<span class="number">8</span>, <span class="string">'e'</span>:<span class="number">10</span>}</span><br><span class="line"></span><br><span class="line">ans = merge_dicts(x,y,z)</span><br><span class="line">ans</span><br></pre></td></tr></tbody></table></figure>
<pre><code>{'a': 1, 'b': 4, 'c': 5, 'd': 8, 'e': 10}
</code></pre>
<p>在函数定义中，星号（*）表示将所有位置参数收集到一个元组中。</p>
<h2 id="嵌套型字典"><a class="markdownIt-Anchor" href="#嵌套型字典"></a> 嵌套型字典</h2>
<p>字典是以 <code>key</code>,<code>value</code>的形式创建的，而嵌套型的字典有一个特征，就是<code>key</code>对应的<code>value</code>值也可以是一个字典。</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">dic_ = {key_1 : {key1:value1},</span><br><span class="line">        key_2 : {key2:value2} }</span><br></pre></td></tr></tbody></table></figure>
<h3 id="创建一个嵌套型字典"><a class="markdownIt-Anchor" href="#创建一个嵌套型字典"></a> 创建一个嵌套型字典</h3>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">dic_ = {</span><br><span class="line">    <span class="string">'student'</span>: {</span><br><span class="line">        <span class="string">'name'</span>: <span class="string">'John'</span>,</span><br><span class="line">        <span class="string">'age'</span>: <span class="number">22</span></span><br><span class="line">    },</span><br><span class="line">    <span class="string">'course'</span>: {</span><br><span class="line">        <span class="string">'title'</span>: <span class="string">'Introduction to Python'</span>,</span><br><span class="line">        <span class="string">'instructor'</span>: <span class="string">'Dr. Smith'</span></span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="built_in">print</span>(dic_)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>{'student': {'name': 'John', 'age': 22}, 'course': {'title': 'Introduction to Python', 'instructor': 'Dr. Smith'}}
</code></pre>
<h3 id="从嵌套型字典中获取元素"><a class="markdownIt-Anchor" href="#从嵌套型字典中获取元素"></a> 从嵌套型字典中获取元素</h3>
<p>从嵌套型字典中获取元素，跟从 list，以及数组中获取元素时有些类似的。</p>
<p>嵌套型字典用 [] 进行不同层级元素的获取。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(dic_[<span class="string">'student'</span>])</span><br><span class="line"><span class="built_in">print</span>(dic_[<span class="string">'student'</span>][<span class="string">'name'</span>])</span><br></pre></td></tr></tbody></table></figure>
<pre><code>{'name': 'John', 'age': 22}
John
</code></pre>
<h3 id="修改嵌套型字典的元素更改-增加或删除元素"><a class="markdownIt-Anchor" href="#修改嵌套型字典的元素更改-增加或删除元素"></a> 修改嵌套型字典的元素（更改、增加或删除元素）</h3>
<p><strong>增加一个空的字典</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">dic_ = {</span><br><span class="line">    <span class="number">1</span>: {</span><br><span class="line">        <span class="string">'product'</span>: <span class="string">'Laptop'</span>,</span><br><span class="line">        <span class="string">'price'</span>: <span class="number">999.99</span></span><br><span class="line">    },</span><br><span class="line">    <span class="number">2</span>: {</span><br><span class="line">        <span class="string">'product'</span>: <span class="string">'Smartphone'</span>,</span><br><span class="line">        <span class="string">'price'</span>: <span class="number">499.99</span></span><br><span class="line">    },</span><br><span class="line">    <span class="number">3</span>: {</span><br><span class="line">        <span class="string">'product'</span>: <span class="string">'Tablet'</span>,</span><br><span class="line">        <span class="string">'price'</span>: <span class="number">299.99</span></span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">dic_[<span class="number">4</span>] = {}</span><br><span class="line">dic_</span><br></pre></td></tr></tbody></table></figure>
<pre><code>{1: {'product': 'Laptop', 'price': 999.99},
 2: {'product': 'Smartphone', 'price': 499.99},
 3: {'product': 'Tablet', 'price': 299.99},
 4: {}}
</code></pre>
<p><strong>修改或增加新的元素</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 修改</span></span><br><span class="line">dic_[<span class="number">3</span>][<span class="string">'price'</span>] = <span class="number">599.99</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#增加</span></span><br><span class="line">dic_[<span class="number">3</span>][<span class="string">'count'</span>] = <span class="number">10</span></span><br><span class="line"></span><br><span class="line">dic_</span><br></pre></td></tr></tbody></table></figure>
<pre><code>{1: {'product': 'Laptop', 'price': 999.99},
 2: {'product': 'Smartphone', 'price': 499.99},
 3: {'product': 'Tablet', 'price': 599.99, 'count': 10},
 4: {}}
</code></pre>
<p><strong>在嵌套型字典中直接添加一个字典</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">dic_[<span class="number">5</span>] = {<span class="string">'product'</span>: <span class="string">'Smartwatch'</span>,</span><br><span class="line">           <span class="string">'price'</span>: <span class="number">199.99</span>}</span><br><span class="line"></span><br><span class="line">dic_</span><br></pre></td></tr></tbody></table></figure>
<pre><code>{1: {'product': 'Laptop', 'price': 999.99},
 2: {'product': 'Smartphone', 'price': 499.99},
 3: {'product': 'Tablet', 'price': 599.99, 'count': 10},
 4: {},
 5: {'product': 'Smartwatch', 'price': 199.99}}
</code></pre>
<p><strong>删除某个具体元素内容</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">del</span> dic_[<span class="number">3</span>][<span class="string">'count'</span>]</span><br><span class="line">dic_</span><br></pre></td></tr></tbody></table></figure>
<pre><code>{1: {'product': 'Laptop', 'price': 999.99},
 2: {'product': 'Smartphone', 'price': 499.99},
 3: {'product': 'Tablet', 'price': 599.99},
 4: {},
 5: {'product': 'Smartwatch', 'price': 199.99}}
</code></pre>
<h3 id="通过-for-循环来获取嵌套字典内的元素"><a class="markdownIt-Anchor" href="#通过-for-循环来获取嵌套字典内的元素"></a> 通过 for 循环来获取嵌套字典内的元素</h3>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> id_,info <span class="keyword">in</span> dic_.items():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'id='</span>,id_)</span><br><span class="line">    <span class="keyword">for</span> k,v <span class="keyword">in</span> info.items():</span><br><span class="line">        <span class="built_in">print</span>(k+<span class="string">':'</span>+<span class="built_in">str</span>(v))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'\n'</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>id= 1
product:Laptop
price:999.99
</code></pre>
<p>​<br>
​    id= 2<br>
​    product:Smartphone<br>
​    price:499.99</p>
<p>​<br>
​    id= 3<br>
​    product:Tablet<br>
​    price:599.99</p>
<p>​<br>
​    id= 4</p>
<p>​<br>
​    id= 5<br>
​    product:Smartwatch<br>
​    price:199.99</p>
<h3 id="用-pprint-输出嵌套型字典"><a class="markdownIt-Anchor" href="#用-pprint-输出嵌套型字典"></a> 用 pprint 输出嵌套型字典</h3>
<p>用 pprint 可以使字典显示层次更清晰，需要安装 pprint，在jupyter notebook中的安装命令如下：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">!pip install pprint</span><br></pre></td></tr></tbody></table></figure>
<p>pprint 可以使字典显示层次更清晰</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">#!pip install pprint</span></span><br><span class="line"><span class="keyword">import</span> pprint </span><br><span class="line"></span><br><span class="line">library = {<span class="string">'fiction'</span>: {<span class="string">'fantasy'</span>: {<span class="string">'Harry Potter'</span>: <span class="string">'excellent'</span>,<span class="string">'Lord of the Rings'</span>: <span class="string">'good'</span>},<span class="string">'mystery'</span>: {<span class="string">'Sherlock Holmes'</span>: <span class="string">'excellent'</span>,<span class="string">'Agatha Christie'</span>: {<span class="string">'Poirot'</span>: <span class="string">'good'</span>,<span class="string">'Miss Marple'</span>: <span class="string">'average'</span>}}},<span class="string">'non-fiction'</span>: {<span class="string">'history'</span>: {<span class="string">'Sapiens'</span>: <span class="string">'excellent'</span>,<span class="string">'Guns, Germs, and Steel'</span>: <span class="string">'good'</span>},<span class="string">'science'</span>: {<span class="string">'Cosmos'</span>: <span class="string">'excellent'</span>,<span class="string">'Brief History of Time'</span>: {<span class="string">'Stephen Hawking'</span>: <span class="string">'excellent'</span>,<span class="string">'others'</span>: <span class="string">'average'</span>}}}}</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(library)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">'\n'</span>)</span><br><span class="line">pprint.pprint(library)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>{'fiction': {'fantasy': {'Harry Potter': 'excellent', 'Lord of the Rings': 'good'}, 'mystery': {'Sherlock Holmes': 'excellent', 'Agatha Christie': {'Poirot': 'good', 'Miss Marple': 'average'}}}, 'non-fiction': {'history': {'Sapiens': 'excellent', 'Guns, Germs, and Steel': 'good'}, 'science': {'Cosmos': 'excellent', 'Brief History of Time': {'Stephen Hawking': 'excellent', 'others': 'average'}}}}
</code></pre>
<p>​<br>
​    {‘fiction’: {‘fantasy’: {‘Harry Potter’: ‘excellent’,<br>
​                             ‘Lord of the Rings’: ‘good’},<br>
​                 ‘mystery’: {‘Agatha Christie’: {‘Miss Marple’: ‘average’,<br>
​                                                 ‘Poirot’: ‘good’},<br>
​                             ‘Sherlock Holmes’: ‘excellent’}},<br>
​     ‘non-fiction’: {‘history’: {‘Guns, Germs, and Steel’: ‘good’,<br>
​                                 ‘Sapiens’: ‘excellent’},<br>
​                     ‘science’: {‘Brief History of Time’: {‘Stephen Hawking’: ‘excellent’,<br>
​                                                           ‘others’: ‘average’},<br>
​                                 ‘Cosmos’: ‘excellent’}}}</p>
<h3 id="嵌套型字典的一些用途"><a class="markdownIt-Anchor" href="#嵌套型字典的一些用途"></a> 嵌套型字典的一些用途</h3>
<p>这里分享一个用途。嵌套型字典，经常在机器学习中的决策树算法中涉及到。</p>
<p>使用了 scikit-learn 库的内置数据集 load_wine 来加载一个葡萄酒数据集。</p>
<p>这个数据集包含不同类型的葡萄酒样本及其相关的化学特征，用于分类任务。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.tree <span class="keyword">import</span> DecisionTreeClassifier, export_graphviz</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> tree</span><br><span class="line"><span class="keyword">from</span> sklearn.datasets <span class="keyword">import</span> load_wine</span><br><span class="line"><span class="keyword">from</span> IPython.display <span class="keyword">import</span> Image, display</span><br><span class="line"><span class="keyword">from</span> graphviz <span class="keyword">import</span> Source</span><br><span class="line"></span><br><span class="line"><span class="comment"># 加载数据集</span></span><br><span class="line">data = load_wine()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 分离特征和标签</span></span><br><span class="line">X = data.data</span><br><span class="line">y = data.target</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取特征名称</span></span><br><span class="line">labels = data.feature_names</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建决策树分类器</span></span><br><span class="line">estimator = DecisionTreeClassifier()</span><br><span class="line">estimator.fit(X, y)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 可视化决策树</span></span><br><span class="line">graph = Source(tree.export_graphviz(estimator, out_file=<span class="literal">None</span>,</span><br><span class="line">                                    feature_names=labels,</span><br><span class="line">                                    class_names=data.target_names,</span><br><span class="line">                                    filled=<span class="literal">True</span>))</span><br><span class="line">png_data = graph.pipe(<span class="built_in">format</span>=<span class="string">'png'</span>)</span><br><span class="line">display(Image(png_data))</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<p><img src="../../../../images/pylearn/output_169_0.png" alt></p>
<h1 id="内置时间模块datetime"><a class="markdownIt-Anchor" href="#内置时间模块datetime"></a> 内置时间模块：Datetime</h1>
<h2 id="简介"><a class="markdownIt-Anchor" href="#简介"></a> 简介</h2>
<p>Python 内置时间处理模块主要包括：</p>
<ul>
<li>Datetime</li>
<li>Time</li>
<li>Calendar</li>
</ul>
<p>概括来说，时间和日期处理的模块和库，有几个主要的概念都是会涉及的，包括：</p>
<p><strong>日期，时间，时间戳，时间和字符串的转换，时区</strong>等。</p>
<p><code>Datetime</code>、<code>Time</code>、<code>Calendar</code>这三个模块中，用的较多的是<code>Datetime</code>。</p>
<p>针对<code>Datetime</code>模块，从<strong>构建时间对象实例、时间转换、时间对象的运算</strong>三个方面进行了梳理，共涉及 13 个知识<br>
点，整理的大纲如下：</p>
<p><img src="../../../../images/pylearn/datetime.png" alt></p>
<p>针对<code>Time</code>模块，从<strong>时间获取和时间转换</strong>两个方面进行了梳理，共涉及 6 个知识点，整理的大纲如下：</p>
<p><img src="../../../../images/pylearn/time.png" alt></p>
<p>首先要介绍的是用的较多的 datetime 模块, 它属于 Python 的内置模块，功能相对较全。</p>
<h2 id="构建时间对象实例"><a class="markdownIt-Anchor" href="#构建时间对象实例"></a> 构建时间对象实例</h2>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"><span class="comment"># from datetime import date, datetime,time,timedelta,tzinfo</span></span><br><span class="line"><span class="keyword">import</span> time</span><br></pre></td></tr></tbody></table></figure>
<p>时间实例的构造包括日期（如 2024 年 6 月 26 日），时间（如 22 点 28 分 32 秒），</p>
<p>或者是包含 date 和 time 的datetime （如 2024 年 6 月 26 日 22 点 28 分 32 秒）。</p>
<h3 id="日期date实例的构造"><a class="markdownIt-Anchor" href="#日期date实例的构造"></a> 日期（date）实例的构造</h3>
<p>date 是一个理想化的简单型日期，属性有 year , month , day</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 构造日期date</span></span><br><span class="line">d1 = datetime.date(<span class="number">2024</span>,<span class="number">6</span>,<span class="number">26</span>)</span><br><span class="line">d1</span><br></pre></td></tr></tbody></table></figure>
<pre><code>datetime.date(2024, 6, 26)
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(d1)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>2024-06-26
</code></pre>
<p>除了上面的构造方式，在 date 实例化的时候，还可以通过 date.today() 来构造当天的日期。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">datetime.date.today()</span><br></pre></td></tr></tbody></table></figure>
<pre><code>datetime.date(2024, 6, 26)
</code></pre>
<p><code>date</code> 类型的日期，可以通过 <code>.year</code> , <code>.month</code> , <code>.day</code> 来获取日期所属的年份，月份，和具体的日期号。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">'日期所属的年份为：'</span>,d1.year)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">'日期所属的月份为：'</span>,d1.month)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">'日期具体的日期号为：'</span>,d1.day)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>日期所属的年份为： 2024
日期所属的月份为： 6
日期具体的日期号为： 26
</code></pre>
<h3 id="时间-time-实例的构造"><a class="markdownIt-Anchor" href="#时间-time-实例的构造"></a> 时间 time 实例的构造</h3>
<p><code>time</code> 是一个独立于任何特定日期的理想化时间，其属性有 <code>hour</code>（小时），<code>minute</code>（分钟），<code>second</code>（秒），<code>microsecond</code>（微秒）</p>
<p>和 <code>tzinfo</code>（时区信息）</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">t1 = datetime.time(<span class="number">22</span>,<span class="number">43</span>,<span class="number">46</span>)</span><br><span class="line">t1</span><br></pre></td></tr></tbody></table></figure>
<pre><code>datetime.time(22, 43, 46)
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">'time所属的小时为:'</span>,t1.hour)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">'time所属的分钟为:'</span>,t1.minute)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">'time所属的秒为:'</span>,t1.second)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>time所属的小时为: 22
time所属的分钟为: 43
time所属的秒为: 46
</code></pre>
<h3 id="datetime-实例的构造"><a class="markdownIt-Anchor" href="#datetime-实例的构造"></a> datetime 实例的构造</h3>
<p><code>datetime</code> 是日期和时间的结合，其属性有 <code>year</code>，<code>month</code>，<code>day</code>，<code>hour</code>，<code>minute</code>，<code>second</code> ，<code>microsecond</code> 和<code>tzinfo</code>。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">dt1 = datetime.datetime(<span class="number">2024</span>,<span class="number">6</span>,<span class="number">26</span>,<span class="number">22</span>,<span class="number">49</span>,<span class="number">50</span>)</span><br><span class="line">dt1</span><br></pre></td></tr></tbody></table></figure>
<pre><code>datetime.datetime(2024, 6, 26, 22, 49, 50)
</code></pre>
<p>除了上面的构造方式，在 <code>datetime</code> 实例化的时候，还有其他的一些方式，包括使用 <code>datetime.now()</code> 和<br>
<code>datetime.today()</code>，以及在 <code>date</code> 的基础上使用 <code>combine</code> 方法等。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">dt2 = datetime.datetime.now()</span><br><span class="line">dt2</span><br></pre></td></tr></tbody></table></figure>
<pre><code>datetime.datetime(2024, 6, 26, 22, 51, 24, 544538)
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">dt3 = datetime.datetime.today()</span><br><span class="line">dt3</span><br></pre></td></tr></tbody></table></figure>
<pre><code>datetime.datetime(2024, 6, 26, 22, 52, 24, 233317)
</code></pre>
<p>区别：</p>
<ul>
<li>时区参数：datetime.datetime.now() 可以接受一个 tz 参数，以返回指定时区的当前时间，而 datetime.datetime.today() 则没有此功能，总是返回本地时间。</li>
<li>功能：在没有提供 tz 参数的情况下，这两个方法的功能实际上是相同的，都是返回本地时间。</li>
</ul>
<p><code>datetime.datetime.combine(date, time)</code> 它可以将一个日期对象 (date) 和一个时间对象 (time) 结合起来，创建一个新的 datetime 对象。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">dt4 = datetime.datetime.combine(d1,t1)</span><br><span class="line">dt4</span><br></pre></td></tr></tbody></table></figure>
<pre><code>datetime.datetime(2024, 6, 26, 22, 43, 46)
</code></pre>
<p>通过 datetime 的实例化，是我们使用时间是经常用到的方法，在日常具体使用过程中，可能只需要具体到某天，</p>
<p>或者只需要具体到某天的某个时间点，这时候，也可以通过 datetime 的一些方法来实现</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">dt_ = datetime.datetime.now()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从datetime来获取日期</span></span><br><span class="line">dt_.date()</span><br></pre></td></tr></tbody></table></figure>
<pre><code>datetime.date(2024, 6, 26)
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 从datetime来获取具体的时间点</span></span><br><span class="line">dt_.time()</span><br></pre></td></tr></tbody></table></figure>
<pre><code>datetime.time(22, 58, 24, 467936)
</code></pre>
<p>同样的 <code>datetime</code> 类型的时间，可以通过 <code>.year</code> , <code>.month</code> , <code>.day</code> 来获取日期所属的年份，月份，和具体的日期号。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">f'日期所属的年份为：<span class="subst">{dt_.year}</span>'</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f'日期所属的月份为：<span class="subst">{dt_.month}</span>'</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f'日期所属的日期为：<span class="subst">{dt_.day}</span>'</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>日期所属的年份为：2024
日期所属的月份为：6
日期所属的日期为：26
</code></pre>
<p>还有一个可能涉及到的时间是获取某天属于星期几，可以通过<code>weekday()</code> 和 <code>isoweekday()</code> 方法来实现。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 从 datetime 来获取日期是星期几</span></span><br><span class="line"><span class="comment"># 使用 weekday 方法</span></span><br><span class="line"><span class="comment"># 数字从0开始，0代表星期一，1代表星期二，以此类推</span></span><br><span class="line">dt_.weekday()</span><br></pre></td></tr></tbody></table></figure>
<pre><code>2
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 从 datetime 来获取日期是星期几</span></span><br><span class="line"><span class="comment"># 使用 isoweekday 方法</span></span><br><span class="line"><span class="comment"># 数字从1开始，1代表星期一，2代表星期二，以此类推</span></span><br><span class="line">dt_.isoweekday()</span><br></pre></td></tr></tbody></table></figure>
<pre><code>3
</code></pre>
<p>datetime 还有一种方法。如果 datetime 的值由于某些原因弄错了，还可以通过 <code>replace()</code> 方法来进行更正。<br>
replace 方法的参数如下：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">datetime.replace(year=self.year, month=self.month, day=self.day, hour=self.hour,</span><br><span class="line">minute=self.minute, second=self.second, microsecond=self.microsecond, tzinfo=self.</span><br><span class="line">tzinfo, * fold=0)</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">dt_new = dt_.replace(month = <span class="number">7</span>)</span><br><span class="line">dt_new</span><br></pre></td></tr></tbody></table></figure>
<pre><code>datetime.datetime(2024, 7, 26, 22, 58, 24, 467936)
</code></pre>
<h3 id="timedelta-对象的构造"><a class="markdownIt-Anchor" href="#timedelta-对象的构造"></a> timedelta 对象的构造</h3>
<p>timedelta 对象表示两个 date 或者 time 或者 datetime 的时间间隔。</p>
 <figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line"> class datetime.timedelta(days=0, seconds=0, microseconds=0, milliseconds=0,</span><br><span class="line">minutes=0, hours=0, weeks=0)</span><br></pre></td></tr></tbody></table></figure>
<p>所有参数都是可选的并且默认为 0。这些参数可以是整数或者浮点数，也可以是正数或者负数。</p>
<p>只有 <code>days</code>, <code>seconds</code> 和 <code>microseconds</code> 会存储在内部。参数单位的换算规则如下：</p>
<ul>
<li>1 毫秒会转换成 1000 微秒。</li>
<li>1 分钟会转换成 60 秒。</li>
<li>1 小时会转换成 3600 秒。</li>
<li>1 星期会转换成 7 天。</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">delta = datetime.timedelta(weeks=<span class="number">3</span>,</span><br><span class="line">                           days=<span class="number">10</span>,</span><br><span class="line">                           hours=<span class="number">6</span>,</span><br><span class="line">                           minutes=<span class="number">50</span>,</span><br><span class="line">                           seconds=<span class="number">30</span>,</span><br><span class="line">                           microseconds=<span class="number">1000</span>,</span><br><span class="line">                           milliseconds=<span class="number">10000</span>)</span><br><span class="line"></span><br><span class="line">delta</span><br></pre></td></tr></tbody></table></figure>
<pre><code>datetime.timedelta(days=31, seconds=24640, microseconds=1000)
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(delta)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>31 days, 6:50:40.001000
</code></pre>
<h3 id="tzinfo-介绍"><a class="markdownIt-Anchor" href="#tzinfo-介绍"></a> tzinfo 介绍</h3>
<p><code>datetime.tzinfo</code> 返回 datetime 对象的时区，前提是在创建 datetime 对象时需传入 tzinfo 参数，如果没有传入则返回值为 None 。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pytz</span><br><span class="line"></span><br><span class="line">sh = pytz.timezone(<span class="string">'Asia/Shanghai'</span>)</span><br><span class="line">d_tz = datetime.datetime.now(sh)</span><br><span class="line"></span><br><span class="line">d_tz.tzinfo</span><br></pre></td></tr></tbody></table></figure>
<pre><code>&lt;DstTzInfo 'Asia/Shanghai' CST+8:00:00 STD&gt;
</code></pre>
<h2 id="时间转换"><a class="markdownIt-Anchor" href="#时间转换"></a> 时间转换</h2>
<p>时间的三种存在方式：时间对象，时间字符串，时间戳。</p>
<p>时间对象，比如前面介绍的 date 、datetime 、time 对象等；</p>
<p>时间字符串，如：“2024-6-27”；</p>
<p>时间戳，如 <code>time.time()</code> 返回的就是时间戳。</p>
<p>在数据处理过程中，经常会遇到需要将不同形式的时间进行转换。这里介绍下常用的方法：</p>
<h3 id="时间对象转字符串"><a class="markdownIt-Anchor" href="#时间对象转字符串"></a> 时间对象转字符串</h3>
<p>时间对象转换为字符串，可以通过 isoformat 或 strftime 方法来实现。</p>
<p>isoformat 是 ISO 8601 格式的缩写，ISO 是 International Organization for Standardization（国际标准化组织）的缩写，因此 isoformat 的全称可以解释为 ISO 8601 format，即“国际标准化组织 8601 格式”。</p>
<p>strftime 的英文全称是 str format time ，根据给定的格式将时间对象转换为字符串</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 将 date 时间对象转换为字符串</span></span><br><span class="line">d_ = datetime.date.today()</span><br><span class="line">d_.isoformat()</span><br></pre></td></tr></tbody></table></figure>
<pre><code>'2024-06-27'
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">#用 srtftime 来转换</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># YYYY-MM-DD 形式</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">'YYYY-MM-DD:'</span>,d_.strftime(<span class="string">'%Y-%m-%d'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#MM DD, YYYY 形 式</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">'MM DD,YYYY:'</span>,d_.strftime(<span class="string">'%b %d, %Y'</span>))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>YYYY-MM-DD: 2024-06-27
MM DD,YYYY: Jun 27, 2024
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 将 time 时间对象转换为字符串</span></span><br><span class="line">t_ = datetime.datetime.now().time()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(t_.strftime(<span class="string">'%H:%M:%S'</span>))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>00:17:02
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 将 datetime 时间对象转换为字符串</span></span><br><span class="line">dt_ = datetime.datetime.now()</span><br><span class="line">dt_.strftime(<span class="string">'%Y-%m-%d %H:%M:%S'</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>'2024-06-27 00:17:11'
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">dt_.isoformat()</span><br></pre></td></tr></tbody></table></figure>
<pre><code>'2024-06-27T00:17:11.564718'
</code></pre>
<p>python 中常见的时间日期格式化符号：</p>
<table>
<thead>
<tr>
<th style="text-align:center">指令</th>
<th style="text-align:center">意义</th>
<th style="text-align:center">示例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">%a</td>
<td style="text-align:center">当地工作日的缩写。</td>
<td style="text-align:center">Sun, Mon, …, Sat (en_US); So, Mo, …, Sa (de_DE)</td>
</tr>
<tr>
<td style="text-align:center">%A</td>
<td style="text-align:center">本地化的星期中每日的完整名称。</td>
<td style="text-align:center">Sunday, Monday, …, Saturday (en_US); Sonntag, Montag, …, Samstag (de_DE)</td>
</tr>
<tr>
<td style="text-align:center">%w</td>
<td style="text-align:center">以十进制数显示的工作日，其中 0 表示星期日，6 表示星期六。</td>
<td style="text-align:center">0, 1, …, 6</td>
</tr>
<tr>
<td style="text-align:center">%d</td>
<td style="text-align:center">补零后，以十进制数显示的月份中的一天。</td>
<td style="text-align:center">01, 02, …, 31</td>
</tr>
<tr>
<td style="text-align:center">%b</td>
<td style="text-align:center">当地月份的缩写。</td>
<td style="text-align:center">Jan, Feb, …, Dec (en_US); Jan, Feb, …, Dez (de_DE)</td>
</tr>
<tr>
<td style="text-align:center">%B</td>
<td style="text-align:center">本地化的月份全名。</td>
<td style="text-align:center">January, February, …, December (en_US); Januar, Februar, …, Dezember (de_DE)</td>
</tr>
<tr>
<td style="text-align:center">%m</td>
<td style="text-align:center">补零后，以十进制数显示的月份。</td>
<td style="text-align:center">01, 02, …, 12</td>
</tr>
<tr>
<td style="text-align:center">%y</td>
<td style="text-align:center">补零后，以十进制数表示的，不带世纪的年份。</td>
<td style="text-align:center">00, 01, …, 99</td>
</tr>
<tr>
<td style="text-align:center">%Y</td>
<td style="text-align:center">十进制数表示的带世纪的年份。</td>
<td style="text-align:center">0001, 0002, …, 2013, 2014, …, 9998, 9999</td>
</tr>
<tr>
<td style="text-align:center">%H</td>
<td style="text-align:center">以补零后的十进制数表示的小时 (24 小时制)。</td>
<td style="text-align:center">00, 01, …, 23</td>
</tr>
<tr>
<td style="text-align:center">%I</td>
<td style="text-align:center">以补零后的十进制数表示的小时（12 小时制）。</td>
<td style="text-align:center">01, 02, …, 12</td>
</tr>
<tr>
<td style="text-align:center">%p</td>
<td style="text-align:center">本地化的 AM 或 PM。</td>
<td style="text-align:center">AM, PM (en_US); am, pm (de_DE)</td>
</tr>
<tr>
<td style="text-align:center">%M</td>
<td style="text-align:center">补零后，以十进制数显示的分钟。</td>
<td style="text-align:center">00, 01, …, 59</td>
</tr>
<tr>
<td style="text-align:center">%S</td>
<td style="text-align:center">补零后，以十进制数显示的秒。</td>
<td style="text-align:center">00, 01, …, 59</td>
</tr>
<tr>
<td style="text-align:center">%f</td>
<td style="text-align:center">以十进制数表示的微秒，在左侧补零。</td>
<td style="text-align:center">000000, 000001, …, 999999</td>
</tr>
<tr>
<td style="text-align:center">%z</td>
<td style="text-align:center">UTC 偏移量，格式为 ±HHMM [SS[.ffffff]]（如果是简单型对象则为空字符串）。</td>
<td style="text-align:center">(空), +0000, -0400, +1030, +063415, -030712.345216</td>
</tr>
<tr>
<td style="text-align:center">%Z</td>
<td style="text-align:center">时区名称（如果对象为简单型则为空字符串）。</td>
<td style="text-align:center">(空), UTC, GMT</td>
</tr>
<tr>
<td style="text-align:center">%j</td>
<td style="text-align:center">以补零后的十进制数表示的一年中的日序号。</td>
<td style="text-align:center">001, 002, …, 366</td>
</tr>
<tr>
<td style="text-align:center">%U</td>
<td style="text-align:center">以补零后的十进制数表示的一年中的周序号（星期日作为每周的第一天）。在新的一年中第一个星期日之前的所有日子都被视为是在第 0 周。</td>
<td style="text-align:center">00, 01, …, 53</td>
</tr>
<tr>
<td style="text-align:center">%W</td>
<td style="text-align:center">以十进制数表示的一年中的周序号（星期一作为每周的第一天）。在新的一年中第一个星期一之前的所有日子都被视为是在第 0 周。</td>
<td style="text-align:center">00, 01, …, 53</td>
</tr>
<tr>
<td style="text-align:center">%c</td>
<td style="text-align:center">本地化的适当日期和时间表示。</td>
<td style="text-align:center">Tue Aug 16 21:30:00 1988 (en_US); Di 16 Aug 21:30:00 1988 (de_DE)</td>
</tr>
<tr>
<td style="text-align:center">%x</td>
<td style="text-align:center">本地化的适当日期表示。</td>
<td style="text-align:center">08/16/88 (None); 08/16/1988 (en_US); 16.08.1988 (de_DE)</td>
</tr>
<tr>
<td style="text-align:center">%X</td>
<td style="text-align:center">本地化的适当时间表示。</td>
<td style="text-align:center">21:30:00 (en_US); 21:30:00 (de_DE)</td>
</tr>
<tr>
<td style="text-align:center">%%</td>
<td style="text-align:center">字面的 ‘%’ 字符。</td>
<td style="text-align:center">%</td>
</tr>
</tbody>
</table>
<h3 id="字符串转时间对象"><a class="markdownIt-Anchor" href="#字符串转时间对象"></a> 字符串转时间对象</h3>
<p>字符串转时间对象，用的是 <code>strptime</code> 方法，与 <code>strftime</code> 方法刚好相反。</p>
<p><code>strptime</code> 的英文全称是 str parse time ，将字符串解析为给定相应格式的时间对象。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">s1 = <span class="string">'2024-6-27'</span></span><br><span class="line">d = datetime.datetime.strptime(s1,<span class="string">'%Y-%m-%d'</span>)</span><br><span class="line">d</span><br></pre></td></tr></tbody></table></figure>
<pre><code>datetime.datetime(2024, 6, 27, 0, 0)
</code></pre>
<p>下面提供了 strftime 方法与 strptime 方法的比较：</p>
<table>
<thead>
<tr>
<th style="text-align:left"></th>
<th style="text-align:left">strftime</th>
<th style="text-align:left">strptime</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">用法</td>
<td style="text-align:left">根据给定的格式将对象转换为字符串</td>
<td style="text-align:left">将字符串解析为给定相应格式的 datetime 对象</td>
</tr>
<tr>
<td style="text-align:left">方法类型</td>
<td style="text-align:left">实例方法</td>
<td style="text-align:left">类方法</td>
</tr>
<tr>
<td style="text-align:left">方法</td>
<td style="text-align:left">date; datetime; time</td>
<td style="text-align:left">datetime</td>
</tr>
<tr>
<td style="text-align:left">签名</td>
<td style="text-align:left">strftime(format)</td>
<td style="text-align:left">strptime(date_string, format)</td>
</tr>
</tbody>
</table>
<p>需要注意的是，<code>strftime</code> 方法可供 <code>date</code>、<code>time</code> 和 <code>datetime</code> 对象使用，而 <code>strptime</code> 方法仅供 <code>datetime</code>对象使用。</p>
<h3 id="时间戳转换为时间对象"><a class="markdownIt-Anchor" href="#时间戳转换为时间对象"></a> 时间戳转换为时间对象</h3>
<p>时间戳是指格林威治时间 1970 年 01 月 01 日 00 时 00 分 00 秒 (北京时间 1970 年 01 月 01 日 08 时 00 分 00秒) 起至现在的总秒数。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取当前的时间戳</span></span><br><span class="line">ts_1 = time.time()</span><br><span class="line">ts_1</span><br></pre></td></tr></tbody></table></figure>
<pre><code>1719478791.584069
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 获取当天 00:00:00 的时间戳</span></span><br><span class="line">ts_2 = <span class="built_in">int</span>(time.time()/<span class="number">86400</span>)*<span class="number">86400</span></span><br><span class="line">ts_2</span><br></pre></td></tr></tbody></table></figure>
<pre><code>1719446400
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 获取当天 23:59:59 的时间戳</span></span><br><span class="line">ts_3 = <span class="built_in">int</span>(time.time()/<span class="number">86400</span>)*<span class="number">86400</span>+<span class="number">86400</span>-<span class="number">1</span></span><br><span class="line">ts_3</span><br></pre></td></tr></tbody></table></figure>
<pre><code>1719532799
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 将时间戳转换为时间对象</span></span><br><span class="line">datetime.datetime.fromtimestamp(ts_1)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>datetime.datetime(2024, 6, 27, 16, 59, 51, 584069)
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 将时间戳转换为时间对象</span></span><br><span class="line">datetime.date.fromtimestamp(ts_1)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>datetime.date(2024, 6, 27)
</code></pre>
<h3 id="将时间对象转换为时间戳"><a class="markdownIt-Anchor" href="#将时间对象转换为时间戳"></a> 将时间对象转换为时间戳</h3>
<p>鉴于时间戳是指从格林威治时间 (UTC) 1970 年 1 月 1 日 00:00:00 (北京时间 1970 年 1 月 1 日 08:00:00) 起至现在所经过的总秒数。</p>
<p>因此，当我们将一个时间对象转换为时间戳时，只需计算该时间对象与基准时间（即1970年1月1日）的时间差 (timedelta)，并将该时间差以秒为单位表示即可。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">dt_n = datetime.datetime.now()</span><br><span class="line">dt_n</span><br></pre></td></tr></tbody></table></figure>
<pre><code>datetime.datetime(2024, 6, 27, 17, 10, 49, 468455)
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 注意这里要使用北京时间</span></span><br><span class="line">dt_s = datetime.datetime(<span class="number">1970</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">8</span>)</span><br><span class="line">dt_s</span><br></pre></td></tr></tbody></table></figure>
<pre><code>datetime.datetime(1970, 1, 1, 8, 0)
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">timedelta_1 = dt_n-dt_s</span><br><span class="line">timedelta_s = timedelta_1.total_seconds()</span><br><span class="line">timedelta_s</span><br></pre></td></tr></tbody></table></figure>
<pre><code>1719479449.468455
</code></pre>
<p>再将得到的时间戳转换为时间对象：</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">datetime.datetime.fromtimestamp(timedelta_s)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>datetime.datetime(2024, 6, 27, 17, 10, 49, 468455)
</code></pre>
<h2 id="时间对象的运算"><a class="markdownIt-Anchor" href="#时间对象的运算"></a> 时间对象的运算</h2>
<h3 id="获取当天最小时间和最大时间"><a class="markdownIt-Anchor" href="#获取当天最小时间和最大时间"></a> 获取当天最小时间和最大时间</h3>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 获取当天最小时间</span></span><br><span class="line">datetime.datetime.combine(datetime.date.today(),datetime.time.<span class="built_in">min</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>datetime.datetime(2024, 6, 27, 0, 0)
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 获取当天最大时间</span></span><br><span class="line">datetime.datetime.combine(datetime.date.today(),datetime.time.<span class="built_in">max</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>datetime.datetime(2024, 6, 27, 23, 59, 59, 999999)
</code></pre>
<h3 id="获取当前日期的前几天后几天"><a class="markdownIt-Anchor" href="#获取当前日期的前几天后几天"></a> 获取当前日期的前几天/后几天</h3>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 获取明天</span></span><br><span class="line">datetime.date.today() + datetime.timedelta(days=<span class="number">1</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>datetime.date(2024, 6, 28)
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 获取前一天</span></span><br><span class="line">datetime.date.today() - datetime.timedelta(days=<span class="number">1</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>datetime.date(2024, 6, 26)
</code></pre>
<h3 id="获取本周或本月第一天及最后一天"><a class="markdownIt-Anchor" href="#获取本周或本月第一天及最后一天"></a> 获取本周或本月第一天及最后一天</h3>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">date_today = datetime.date.today()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取本周第一天</span></span><br><span class="line">date_today - datetime.timedelta(date_today.weekday())</span><br></pre></td></tr></tbody></table></figure>
<pre><code>datetime.date(2024, 6, 24)
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 获取本周最后一天</span></span><br><span class="line">date_today + datetime.timedelta(<span class="number">6</span>-date_today.weekday())</span><br></pre></td></tr></tbody></table></figure>
<pre><code>datetime.date(2024, 6, 30)
</code></pre>
<h3 id="计算两个日期相差多少天"><a class="markdownIt-Anchor" href="#计算两个日期相差多少天"></a> 计算两个日期相差多少天</h3>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">dt1 = datetime.datetime(<span class="number">2024</span>,<span class="number">6</span>,<span class="number">19</span>)</span><br><span class="line">dt2 = datetime.datetime.now()</span><br><span class="line"></span><br><span class="line">td1 = dt2 - dt1</span><br><span class="line">td1</span><br></pre></td></tr></tbody></table></figure>
<pre><code>datetime.timedelta(days=8, seconds=62919, microseconds=847392)
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">td1.days</span><br></pre></td></tr></tbody></table></figure>
<pre><code>8
</code></pre>
<p>如果需要计算两个日期之间总共相差多少秒，应该用 <code>total_seconds()</code> 方法。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">td1.seconds</span><br></pre></td></tr></tbody></table></figure>
<pre><code>62919
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">td1.total_seconds()</span><br></pre></td></tr></tbody></table></figure>
<pre><code>754119.847392
</code></pre>
<h1 id="内置时间模块time"><a class="markdownIt-Anchor" href="#内置时间模块time"></a> 内置时间模块:Time</h1>
<h2 id="简介-2"><a class="markdownIt-Anchor" href="#简介-2"></a> 简介</h2>
<p>time 模块提供了各种时间相关的函数。</p>
<p>由于时间处理涉及到时区相关的知识，在开始之前，有一些术语和惯例需要阐述：</p>
<ul>
<li>
<p><strong>UTC</strong> 是协调世界时（以前称为格林威治标准时间，或 GMT）。缩写 UTC 不是错误，而是英语和法语之间的妥协。在中国，UTC+8 表示中国标准时间。</p>
</li>
<li>
<p><strong>DST</strong> 是夏令时，是在一年中的一部分时间调整时区一小时的制度。DST 规则非常复杂（由当地法律确定），并且每年都会发生变化。C 库中有一个包含本地规则的表（通常从系统文件中读取以获得灵活性），并且在这方面是 TrueWisdom 的唯一来源。</p>
</li>
<li>
<p><strong>时间戳</strong> 是指从格林威治时间 1970 年 1 月 1 日 00:00:00 (北京时间 1970 年 1 月 1 日 08:00:00) 起至现在所经过的总秒数。</p>
</li>
<li>
<p><strong>时间元组 (struct_time)</strong> 方式：<code>struct_time</code> 元组共有 9 个元素，返回 <code>struct_time</code> 的函数主要有 <code>gmtime()</code>、<code>localtime()</code> 和 <code>strptime()</code>。下面列出这种方式元组中的几个元素：</p>
</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">索引 (Index)</th>
<th style="text-align:center">属性（Attribute）</th>
<th style="text-align:center">值（Values）</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center">tm_year(年)</td>
<td style="text-align:center">比如 2020</td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">tm_mon (月)</td>
<td style="text-align:center">1-12</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">tm_mday(日)</td>
<td style="text-align:center">1-31</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">tm_hour(时)</td>
<td style="text-align:center">0-23</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:center">tm_min (分)</td>
<td style="text-align:center">0-59</td>
</tr>
<tr>
<td style="text-align:center">5</td>
<td style="text-align:center">tm_sec (秒)</td>
<td style="text-align:center">0-61</td>
</tr>
<tr>
<td style="text-align:center">6</td>
<td style="text-align:center">tm_wday (一周中的第几日)</td>
<td style="text-align:center">0 - 6 （0 表示周日）</td>
</tr>
<tr>
<td style="text-align:center">7</td>
<td style="text-align:center">tm_yday (一年中的第几天)</td>
<td style="text-align:center">1-366</td>
</tr>
<tr>
<td style="text-align:center">8</td>
<td style="text-align:center">tm_isdst (是否是夏令时)</td>
<td style="text-align:center">默认为 -1</td>
</tr>
</tbody>
</table>
<h2 id="时间获取"><a class="markdownIt-Anchor" href="#时间获取"></a> 时间获取</h2>
<h3 id="获取时间戳"><a class="markdownIt-Anchor" href="#获取时间戳"></a> 获取时间戳</h3>
<p><code>time.time()</code> 返回当前时间的时间戳</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">t1 = time.time()</span><br><span class="line">t1</span><br></pre></td></tr></tbody></table></figure>
<pre><code>1719481545.882565
</code></pre>
<h3 id="获取时间元组"><a class="markdownIt-Anchor" href="#获取时间元组"></a> 获取时间元组</h3>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 返回当前时间的时间元组 (struct_time)</span></span><br><span class="line">t2 = time.localtime()</span><br><span class="line">t2</span><br></pre></td></tr></tbody></table></figure>
<pre><code>time.struct_time(tm_year=2024, tm_mon=6, tm_mday=27, tm_hour=17, tm_min=53, tm_sec=20, tm_wday=3, tm_yday=179, tm_isdst=0)
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 返回当前时间的 UTC 时区的时间元组 (struct_time)</span></span><br><span class="line">t3 = time.gmtime()</span><br><span class="line">t3</span><br></pre></td></tr></tbody></table></figure>
<pre><code>time.struct_time(tm_year=2024, tm_mon=6, tm_mday=27, tm_hour=9, tm_min=53, tm_sec=20, tm_wday=3, tm_yday=179, tm_isdst=0)
</code></pre>
<p>struct_time 元组共有 9 个元素，如果想自定义构造时间元组，则可以通过传入一个数组来实现，如下：</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">t3_1 = time.struct_time([<span class="number">2024</span>,<span class="number">6</span>,<span class="number">27</span>,<span class="number">17</span>,<span class="number">54</span>,<span class="number">34</span>,<span class="number">3</span>,<span class="number">179</span>,<span class="number">0</span>])</span><br><span class="line">t3_1</span><br></pre></td></tr></tbody></table></figure>
<pre><code>time.struct_time(tm_year=2024, tm_mon=6, tm_mday=27, tm_hour=17, tm_min=54, tm_sec=34, tm_wday=3, tm_yday=179, tm_isdst=0)
</code></pre>
<h2 id="时间转换-2"><a class="markdownIt-Anchor" href="#时间转换-2"></a> 时间转换</h2>
<h3 id="时间元组转为时间戳"><a class="markdownIt-Anchor" href="#时间元组转为时间戳"></a> 时间元组转为时间戳</h3>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 将 一 个 struct_time 转 化 为 时 间 戳</span></span><br><span class="line">t4 = time.mktime(t2)</span><br><span class="line">t4</span><br></pre></td></tr></tbody></table></figure>
<pre><code>1719482000.0
</code></pre>
<h3 id="时间元组为字符串"><a class="markdownIt-Anchor" href="#时间元组为字符串"></a> 时间元组为字符串</h3>
<p><code>time.asctime()</code> 函数将由 <code>gmtime()</code> 或 <code>localtime()</code> 返回的时间元组或 <code>struct_time</code> 对象转换为字符串。</p>
<p>格式如下：<code>'Mon Dec 25 15:30:45 2023'</code>。</p>
<p>简单来说，这个函数的作用是将时间元组转换为可读的字符串形式。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 转 换 时 间 元 组 为 字 符 串 形 式</span></span><br><span class="line">t5 = time.asctime(t2)</span><br><span class="line">t5</span><br></pre></td></tr></tbody></table></figure>
<pre><code>'Thu Jun 27 17:53:20 2024'
</code></pre>
<p>如果想自定义字符串的格式，可以通过 <code>strftime()</code> 函数来实现。<code>strftime()</code> 可以将时间元组转换为由 <code>format</code> 参数指定的字符串。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">t5_1 = time.strftime(<span class="string">'%Y-%m-%d'</span>,t2)</span><br><span class="line">t5_1</span><br></pre></td></tr></tbody></table></figure>
<pre><code>'2024-06-27'
</code></pre>
<h3 id="时间戳转换为字符串"><a class="markdownIt-Anchor" href="#时间戳转换为字符串"></a> 时间戳转换为字符串</h3>
<p><code>time.ctime()</code> 函数将以距离初始纪元（1970 年 1 月 1 日）的秒数表示的时间转换为以下形式的字符串：<code>'Mon Dec 25 15:30:45 2023'</code>，该字符串表示本地时间。</p>
<p>简单来说，这个函数的作用是将时间戳转换为可读的字符串形式。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 转换时间戳为字符串形式</span></span><br><span class="line">t6 = time.ctime(t4)</span><br><span class="line">t6</span><br></pre></td></tr></tbody></table></figure>
<pre><code>'Thu Jun 27 17:53:20 2024'
</code></pre>
<h3 id="字符串转换为时间元组"><a class="markdownIt-Anchor" href="#字符串转换为时间元组"></a> 字符串转换为时间元组</h3>
<p><code>strptime()</code> 函数可以将特定格式的字符串解析为时间元组。字符串的默认匹配格式为 <code>"%a %b %d %H:%M:%S %Y"</code>。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">time.strptime(<span class="string">'Mon Dec 25 15:30:45 2023'</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>time.struct_time(tm_year=2023, tm_mon=12, tm_mday=25, tm_hour=15, tm_min=30, tm_sec=45, tm_wday=0, tm_yday=359, tm_isdst=-1)
</code></pre>
<p>指令表格：</p>
<table>
<thead>
<tr>
<th style="text-align:center">指令</th>
<th style="text-align:left">意义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">%a</td>
<td style="text-align:left">本地化的缩写星期中每日的名称。</td>
</tr>
<tr>
<td style="text-align:center">%A</td>
<td style="text-align:left">本地化的星期中每日的完整名称。</td>
</tr>
<tr>
<td style="text-align:center">%b</td>
<td style="text-align:left">本地化的月缩写名称。</td>
</tr>
<tr>
<td style="text-align:center">%B</td>
<td style="text-align:left">本地化的月完整名称。</td>
</tr>
<tr>
<td style="text-align:center">%c</td>
<td style="text-align:left">本地化的适当日期和时间表示。</td>
</tr>
<tr>
<td style="text-align:center">%d</td>
<td style="text-align:left">十进制数 [01,31] 表示的月中日。</td>
</tr>
<tr>
<td style="text-align:center">%H</td>
<td style="text-align:left">十进制数 [00,23] 表示的小时（24 小时制）。</td>
</tr>
<tr>
<td style="text-align:center">%I</td>
<td style="text-align:left">十进制数 [01,12] 表示的小时（12 小时制）。</td>
</tr>
<tr>
<td style="text-align:center">%j</td>
<td style="text-align:left">十进制数 [001,366] 表示的年中日。</td>
</tr>
<tr>
<td style="text-align:center">%m</td>
<td style="text-align:left">十进制数 [01,12] 表示的月。</td>
</tr>
<tr>
<td style="text-align:center">%M</td>
<td style="text-align:left">十进制数 [00,59] 表示的分钟。</td>
</tr>
<tr>
<td style="text-align:center">%p</td>
<td style="text-align:left">本地化的 AM 或 PM 。</td>
</tr>
<tr>
<td style="text-align:center">%S</td>
<td style="text-align:left">十进制数 [00,61] 表示的秒。</td>
</tr>
<tr>
<td style="text-align:center">%U</td>
<td style="text-align:left">十进制数 [00,53] 表示的一年中的周数（星期日作为一周的第一天）。<br>在第一个星期日之前的新年中的所有日子都被认为是在第 0 周。</td>
</tr>
<tr>
<td style="text-align:center">%w</td>
<td style="text-align:left">十进制数 [0(星期日),6] 表示的周中日。</td>
</tr>
<tr>
<td style="text-align:center">%W</td>
<td style="text-align:left">十进制数 [00,53] 表示的一年中的周数（星期一作为一周的第一天）。<br>在第一个星期一之前的新年中的所有日子被认为是在第 0 周。</td>
</tr>
<tr>
<td style="text-align:center">%x</td>
<td style="text-align:left">本地化的适当日期表示。</td>
</tr>
<tr>
<td style="text-align:center">%X</td>
<td style="text-align:left">本地化的适当时间表示。</td>
</tr>
<tr>
<td style="text-align:center">%y</td>
<td style="text-align:left">十进制数 [00,99] 表示的没有世纪的年份。</td>
</tr>
<tr>
<td style="text-align:center">%Y</td>
<td style="text-align:left">十进制数表示的带世纪的年份。</td>
</tr>
<tr>
<td style="text-align:center">%z</td>
<td style="text-align:left">时区偏移以格式 +HHMM 或 -HHMM 形式的 UTC/GMT 的正或负时差指示，<br>其中 H 表示十进制小时数字，M 表示十进制分钟数字 [-23:59, +23:59]。</td>
</tr>
<tr>
<td style="text-align:center">%Z</td>
<td style="text-align:left">时区名称（如果不存在时区，则不包含字符）。</td>
</tr>
<tr>
<td style="text-align:center">%%</td>
<td style="text-align:left">字面的 ‘%’ 字符。</td>
</tr>
</tbody>
</table>
<h1 id="内置时间模块calendar"><a class="markdownIt-Anchor" href="#内置时间模块calendar"></a> 内置时间模块：Calendar</h1>
<p>Python 内置的日历（<code>calendar</code>）模块主要用于输出与日历相关的内容。相对于 <code>datetime</code> 和 <code>time</code> 模块来说，<code>calendar</code> 模块的功能要简单一些。</p>
<p>最常用的两个功能是输出某年的日历以及某个月的日历。</p>
<h2 id="获取某年的日历"><a class="markdownIt-Anchor" href="#获取某年的日历"></a> 获取某年的日历</h2>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> calendar</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 获 取 某 年 的 日 历 并 打 印 出 来</span></span><br><span class="line">calendar.prcal(<span class="number">2024</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>                                  2024

      January                   February                   March
Mo Tu We Th Fr Sa Su      Mo Tu We Th Fr Sa Su      Mo Tu We Th Fr Sa Su
 1  2  3  4  5  6  7                1  2  3  4                   1  2  3
 8  9 10 11 12 13 14       5  6  7  8  9 10 11       4  5  6  7  8  9 10
15 16 17 18 19 20 21      12 13 14 15 16 17 18      11 12 13 14 15 16 17
22 23 24 25 26 27 28      19 20 21 22 23 24 25      18 19 20 21 22 23 24
29 30 31                  26 27 28 29               25 26 27 28 29 30 31

       April                      May                       June
Mo Tu We Th Fr Sa Su      Mo Tu We Th Fr Sa Su      Mo Tu We Th Fr Sa Su
 1  2  3  4  5  6  7             1  2  3  4  5                      1  2
 8  9 10 11 12 13 14       6  7  8  9 10 11 12       3  4  5  6  7  8  9
15 16 17 18 19 20 21      13 14 15 16 17 18 19      10 11 12 13 14 15 16
22 23 24 25 26 27 28      20 21 22 23 24 25 26      17 18 19 20 21 22 23
29 30                     27 28 29 30 31            24 25 26 27 28 29 30

        July                     August                  September
Mo Tu We Th Fr Sa Su      Mo Tu We Th Fr Sa Su      Mo Tu We Th Fr Sa Su
 1  2  3  4  5  6  7                1  2  3  4                         1
 8  9 10 11 12 13 14       5  6  7  8  9 10 11       2  3  4  5  6  7  8
15 16 17 18 19 20 21      12 13 14 15 16 17 18       9 10 11 12 13 14 15
22 23 24 25 26 27 28      19 20 21 22 23 24 25      16 17 18 19 20 21 22
29 30 31                  26 27 28 29 30 31         23 24 25 26 27 28 29
                                                    30

      October                   November                  December
Mo Tu We Th Fr Sa Su      Mo Tu We Th Fr Sa Su      Mo Tu We Th Fr Sa Su
    1  2  3  4  5  6                   1  2  3                         1
 7  8  9 10 11 12 13       4  5  6  7  8  9 10       2  3  4  5  6  7  8
14 15 16 17 18 19 20      11 12 13 14 15 16 17       9 10 11 12 13 14 15
21 22 23 24 25 26 27      18 19 20 21 22 23 24      16 17 18 19 20 21 22
28 29 30 31               25 26 27 28 29 30         23 24 25 26 27 28 29
                                                    30 31
</code></pre>
<h2 id="获取某月的日历"><a class="markdownIt-Anchor" href="#获取某月的日历"></a> 获取某月的日历</h2>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(calendar.month(<span class="number">2024</span>,<span class="number">6</span>))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>     June 2024
Mo Tu We Th Fr Sa Su
                1  2
 3  4  5  6  7  8  9
10 11 12 13 14 15 16
17 18 19 20 21 22 23
24 25 26 27 28 29 30
</code></pre>
<p>也可以用 <code>prmonth()</code> 函数将结果直接打印出来，效果也是一样的。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">calendar.prmonth(<span class="number">2024</span>,<span class="number">6</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>     June 2024
Mo Tu We Th Fr Sa Su
                1  2
 3  4  5  6  7  8  9
10 11 12 13 14 15 16
17 18 19 20 21 22 23
24 25 26 27 28 29 30
</code></pre>
<h2 id="其他方法"><a class="markdownIt-Anchor" href="#其他方法"></a> 其他方法</h2>
<p><code>calendar.monthcalendar()</code></p>
<p>返回表示一个月的日历的矩阵。每一行代表一周；此月份外的日子由零表示。每周从周一开始，除非使用 <code>setfirstweekday()</code> 改变设置。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(calendar.monthcalendar(<span class="number">2024</span>,<span class="number">6</span>))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[[0, 0, 0, 0, 0, 1, 2], [3, 4, 5, 6, 7, 8, 9], [10, 11, 12, 13, 14, 15, 16], [17, 18, 19, 20, 21, 22, 23], [24, 25, 26, 27, 28, 29, 30]]
</code></pre>
<p><code>calendar.weekday()</code></p>
<p>返回某天是星期几，默认情况下 0-6 代表周一到周日。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(calendar.weekday(<span class="number">2024</span>,<span class="number">6</span>,<span class="number">27</span>))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>3
</code></pre>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">calendar.setfirstweekday(weekday)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<p>设置每一周的开始日（0 表示星期一，6 表示星期天）。<code>calendar</code> 模块还提供了 <code>MONDAY</code>, <code>TUESDAY</code>, <code>WEDNESDAY</code>, <code>THURSDAY</code>, <code>FRIDAY</code>, <code>SATURDAY</code> 和 <code>SUNDAY</code> 几个常量，方便使用。例如，设置每周的第一天为星期天：</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">calendar.setfirstweekday(calendar.SUNDAY)</span><br></pre></td></tr></tbody></table></figure>
<p><code>calendar.weekheader(n)</code></p>
<p>返回一个包含星期几的缩写名的头。n 指定星期几缩写的字符宽度。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(calendar.weekheader(<span class="number">3</span>))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>Sun Mon Tue Wed Thu Fri Sat
</code></pre>
<h1 id="numpy-的基本用法"><a class="markdownIt-Anchor" href="#numpy-的基本用法"></a> Numpy 的基本用法</h1>
<div>
    <p style="color: red;">
        注意: 本节内容只是一些基本语法，numpy还有很多的用处，后续会专门开一篇文章来讲述numpy的各种语法。
    </p>
</div>
<p>Numpy 是一个开源的 Python 科学计算库，它是 python 科学计算库的基础库，许多其他著名的科学计算库如<br>
Pandas，Scikit-learn 等都要用到 Numpy 库的一些功能。本文主要内容如下：</p>
<ol>
<li>Numpy 数组对象</li>
<li>创建 ndarray 数组</li>
<li>Numpy 的数值类型</li>
<li>ndarray 数组的属性</li>
<li>ndarray 数组的切片和索引</li>
<li>处理数组形状</li>
<li>数组的类型转换</li>
<li>numpy 常用统计函数</li>
<li>数组的广播</li>
<li>Numpy 的 random 函数</li>
</ol>
<h2 id="numpy-数组对象"><a class="markdownIt-Anchor" href="#numpy-数组对象"></a> Numpy 数组对象</h2>
<p><strong>Numpy 的多维数组 (ndarray)</strong></p>
<p>Numpy 中的多维数组称为 <code>ndarray</code>，这是 Numpy 中最常见的数组对象。<code>ndarray</code> 对象通常包含两个部分：</p>
<ol>
<li><strong>数据部分</strong>：实际存储的数据。</li>
<li><strong>元数据部分</strong>：描述数据的信息。</li>
</ol>
<p><strong>Numpy 数组的优势</strong></p>
<ol>
<li>
<p><strong>一致的数据类型</strong>：</p>
<ul>
<li>Numpy 数组中的所有元素类型相同。</li>
<li>这有助于快速确定存储数据所需的空间大小。</li>
</ul>
</li>
<li>
<p><strong>向量化运算</strong>：</p>
<ul>
<li>Numpy 数组可以使用向量化运算处理整个数组。</li>
<li>这种方式比 Python 列表需要循环遍历的方式更快。</li>
</ul>
</li>
<li>
<p><strong>优化的 C API</strong>：</p>
<ul>
<li>Numpy 使用优化过的 C API，运算速度非常快。</li>
</ul>
</li>
</ol>
<p><strong>总结</strong></p>
<ul>
<li><strong>数据类型一致</strong>：Numpy 数组的所有元素类型一致，确定存储空间大小更容易。</li>
<li><strong>高效运算</strong>：Numpy 支持向量化运算，处理数组数据更快速。</li>
<li><strong>优化性能</strong>：Numpy 使用优化过的 C API，确保运算速度快。</li>
</ul>
<p>关于<strong>向量化</strong>和<strong>标量化</strong>运算，对比下面的参考例子就可以看出差异</p>
<ul>
<li>使用 python 的 list 进行循环遍历运算</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">pySum</span>():</span><br><span class="line">    a = <span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">100000</span>))</span><br><span class="line">    b = <span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">100000</span>))</span><br><span class="line">    c = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(a)):</span><br><span class="line">        c.append(a[i]**<span class="number">2</span> + b[i]**<span class="number">2</span>)</span><br><span class="line">        <span class="keyword">return</span> c</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">%timeit pySum()</span><br></pre></td></tr></tbody></table></figure>
<pre><code>3.89 ms ± 214 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
</code></pre>
<ul>
<li>使用 numpy 进行向量化运算</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">npSum</span>():</span><br><span class="line">    a = np.arange(<span class="number">100000</span>)</span><br><span class="line">    b = np.arange(<span class="number">100000</span>)</span><br><span class="line">    c = a**<span class="number">2</span> + b**<span class="number">2</span></span><br><span class="line">    <span class="keyword">return</span> c</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">%timeit npSum()</span><br></pre></td></tr></tbody></table></figure>
<pre><code>456 µs ± 12.3 µs per loop (mean ± std. dev. of 7 runs, 1,000 loops each)
</code></pre>
<p>从上面的运行结果可以看出，numpy 的向量化运算的效率要远远高于 python 的循环遍历运算（效率相差好几<br>
百倍）。（1ms=1000µs）</p>
<h2 id="创建-ndarray-数组"><a class="markdownIt-Anchor" href="#创建-ndarray-数组"></a> 创建 ndarray 数组</h2>
<p>首先需要导入 numpy 库，在导入 numpy 库时通常使用 “np” 作为简写，这也是 Numpy 官方倡导的写法。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br></pre></td></tr></tbody></table></figure>
<p>创建 ndarray 数组的方式有很多种，这里介绍使用的较多的几种：</p>
<ol>
<li>基于 list 或 tuple</li>
</ol>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 一维数组</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 基于list</span></span><br><span class="line">arr_list = np.array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])</span><br><span class="line"><span class="built_in">print</span>(arr_list)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 基于tuple</span></span><br><span class="line">arr_tuple = np.array((<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>))</span><br><span class="line"><span class="built_in">print</span>(arr_tuple)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[1 2 3 4]
[1 2 3 4]
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 二维数组</span></span><br><span class="line"><span class="comment"># 2*3数组</span></span><br><span class="line">arr2 = np.array([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]])</span><br><span class="line"><span class="built_in">print</span>(arr2)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[[1 2 3]
 [4 5 6]]
</code></pre>
<p>请注意：</p>
<ul>
<li>
<p>一维数组用 <code>print</code> 输出的时候为 [1 2 3 4]，跟 python 的列表是有些差异的，没有 “,”</p>
</li>
<li>
<p>在创建二维数组时，在每个子 <code>list</code> 外面还有一个 <code>[]</code>，形式为 <code>[[list1], [list2]]</code></p>
</li>
</ul>
<ol start="2">
<li>基于 np.arange</li>
</ol>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 一维数组</span></span><br><span class="line">arr1 = np.arange(<span class="number">5</span>)</span><br><span class="line"><span class="built_in">print</span>(arr1)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 二维数组</span></span><br><span class="line">arr2 = np.array([np.arange(<span class="number">4</span>), np.arange(<span class="number">4</span>)])</span><br><span class="line"><span class="built_in">print</span>(arr2)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[0 1 2 3 4]
[[0 1 2 3]
 [0 1 2 3]]
</code></pre>
<ol start="3">
<li>基于 arange 以及 reshape 创建多维数组</li>
</ol>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 创建多维数组</span></span><br><span class="line">arr = np.arange(<span class="number">24</span>).reshape(<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line"><span class="built_in">print</span>(arr)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[[[ 0  1  2  3]
  [ 4  5  6  7]
  [ 8  9 10 11]]

 [[12 13 14 15]
  [16 17 18 19]
  [20 21 22 23]]]
</code></pre>
<ul>
<li>
<p>请注意：arange 的长度与 ndarray 的维度的乘积要相等，即 24 = 2×3×4</p>
</li>
<li>
<p>还有其他创建 ndarray 的方法，这里不再过多赘述</p>
</li>
</ul>
<h2 id="numpy-的数值类型"><a class="markdownIt-Anchor" href="#numpy-的数值类型"></a> Numpy 的数值类型</h2>
<p>Numpy 的数值类型如下：</p>
<table>
<thead>
<tr>
<th style="text-align:center">数据类型</th>
<th style="text-align:center">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">bool</td>
<td style="text-align:center">布尔类型, True或False, 占用1比特</td>
</tr>
<tr>
<td style="text-align:center">inti</td>
<td style="text-align:center">其长度取决于平台的整数,一一般是int32或int64</td>
</tr>
<tr>
<td style="text-align:center">int8</td>
<td style="text-align:center">字节长度的整数, 取值：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mo>−</mo><mn>128</mn><mo separator="true">,</mo><mn>127</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[-128,127]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">−</span><span class="mord">1</span><span class="mord">2</span><span class="mord">8</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mord">2</span><span class="mord">7</span><span class="mclose">]</span></span></span></span></td>
</tr>
<tr>
<td style="text-align:center">int16</td>
<td style="text-align:center">16位长度的整数, 取值： <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mo>−</mo><mn>32768</mn><mo separator="true">,</mo><mn>32767</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[-32768,32767]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">−</span><span class="mord">3</span><span class="mord">2</span><span class="mord">7</span><span class="mord">6</span><span class="mord">8</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">3</span><span class="mord">2</span><span class="mord">7</span><span class="mord">6</span><span class="mord">7</span><span class="mclose">]</span></span></span></span></td>
</tr>
<tr>
<td style="text-align:center">int32</td>
<td style="text-align:center">32位长度的整数, 取值: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo fence="true">[</mo><mo>−</mo><msup><mn>2</mn><mn>31</mn></msup><mo separator="true">,</mo><msup><mn>2</mn><mn>31</mn></msup><mo>−</mo><mn>1</mn><mo fence="true">]</mo></mrow><annotation encoding="application/x-tex">\left[-2^{31}, 2^{31}-1\right]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.20001em;vertical-align:-0.35001em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size1">[</span></span><span class="mord">−</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size1">]</span></span></span></span></span></span></td>
</tr>
<tr>
<td style="text-align:center">int64</td>
<td style="text-align:center">64位长度的整数, 取值: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo fence="true">[</mo><mo>−</mo><msup><mn>2</mn><mn>63</mn></msup><mo separator="true">,</mo><msup><mn>2</mn><mn>63</mn></msup><mo>−</mo><mn>1</mn><mo fence="true">]</mo></mrow><annotation encoding="application/x-tex">\left[-2^{63}, 2^{63}-1\right]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.20001em;vertical-align:-0.35001em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size1">[</span></span><span class="mord">−</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">6</span><span class="mord mtight">3</span></span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">6</span><span class="mord mtight">3</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size1">]</span></span></span></span></span></span></td>
</tr>
<tr>
<td style="text-align:center">uint8</td>
<td style="text-align:center">8位无符号整数，取傎：[0,255]</td>
</tr>
<tr>
<td style="text-align:center">uint16</td>
<td style="text-align:center">16位无符号整数, 取值：[0,65535]</td>
</tr>
<tr>
<td style="text-align:center">uint 32</td>
<td style="text-align:center">32位无符号整数, 取值: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo fence="true">[</mo><mn>0</mn><mo separator="true">,</mo><msup><mn>2</mn><mn>32</mn></msup><mo>−</mo><mn>1</mn><mo fence="true">]</mo></mrow><annotation encoding="application/x-tex">\left[0,2^{32}-1\right]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.20001em;vertical-align:-0.35001em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size1">[</span></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size1">]</span></span></span></span></span></span></td>
</tr>
<tr>
<td style="text-align:center">uint64</td>
<td style="text-align:center">32位无符号整数, 取值： <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo fence="true">[</mo><mn>0</mn><mo separator="true">,</mo><msup><mn>2</mn><mn>64</mn></msup><mo>−</mo><mn>1</mn><mo fence="true">]</mo></mrow><annotation encoding="application/x-tex">\left[0,2^{64}-1\right]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.20001em;vertical-align:-0.35001em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size1">[</span></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">6</span><span class="mord mtight">4</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size1">]</span></span></span></span></span></span></td>
</tr>
<tr>
<td style="text-align:center">float16</td>
<td style="text-align:center">16位半精度浮点数：1位符号位, 5 位指数，10位 <br> 尾数</td>
</tr>
<tr>
<td style="text-align:center">float32</td>
<td style="text-align:center">32 位半精度浮点数：1位符号位, 8位指数，23位 <br> 尾数</td>
</tr>
<tr>
<td style="text-align:center">float64或 <br> float</td>
<td style="text-align:center">双精度浮点数：1位符号位，11位指数，52位尾 <br> 数</td>
</tr>
<tr>
<td style="text-align:center">complex64</td>
<td style="text-align:center">复数类型, 实部和虚部都是32位浮点数</td>
</tr>
<tr>
<td style="text-align:center">complex128或 <br> complex</td>
<td style="text-align:center">复数类型, 实部和虚部都是 64 位浮点数</td>
</tr>
</tbody>
</table>
<p>每一种数据类型都有相应的数据转换函数，参考示例如下：</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(np.int8(<span class="number">3.14</span>))</span><br><span class="line"><span class="built_in">print</span>(np.float64(<span class="number">3</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">bool</span>(<span class="number">1</span>))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>3
3.0
True
</code></pre>
<p>在创建 ndarray 数组时，可以指定数值类型：</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">arr = np.arange(<span class="number">5</span>,dtype = <span class="built_in">float</span>)</span><br><span class="line">arr</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([0., 1., 2., 3., 4.])
</code></pre>
<p>请注意，复数不能转换成为整数类型或者浮点数，比如下面的代码会运行出错</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">float</span>(<span class="number">1</span>+<span class="number">1j</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>---------------------------------------------------------------------------

TypeError                                 Traceback (most recent call last)

Cell In[11], line 1
----&gt; 1 float(1+1j)


TypeError: can't convert complex to float
</code></pre>
<h2 id="ndarray-数组的属性"><a class="markdownIt-Anchor" href="#ndarray-数组的属性"></a> ndarray 数组的属性</h2>
<ol>
<li><strong>dtype</strong> 属性，ndarray 数组的数据类型</li>
</ol>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">np.arange(<span class="number">5</span>, dtype = <span class="built_in">float</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([0., 1., 2., 3., 4.])
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 'D'代表复数类型</span></span><br><span class="line">np.arange(<span class="number">5</span>, dtype = <span class="string">'D'</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([0.+0.j, 1.+0.j, 2.+0.j, 3.+0.j, 4.+0.j])
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">np.array([<span class="number">1.23</span>,<span class="number">3.14</span>,<span class="number">2.718</span>], dtype=<span class="string">'int8'</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([1, 3, 2], dtype=int8)
</code></pre>
<ol start="2">
<li><strong>ndim</strong> 属性，数组维度的数量</li>
</ol>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">arr = np.array([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]])</span><br><span class="line">arr.ndim</span><br></pre></td></tr></tbody></table></figure>
<pre><code>2
</code></pre>
<ol start="3">
<li><strong>shape</strong> 属性，数组对象的尺度，对于矩阵，即 n 行 m 列，shape 是一个元组（tuple）</li>
</ol>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">arr.shape</span><br></pre></td></tr></tbody></table></figure>
<pre><code>(2, 3)
</code></pre>
<ol start="4">
<li><strong>size</strong> 属性用来保存元素的数量，相当于 shape 中 n × m 的值</li>
</ol>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">arr.size</span><br></pre></td></tr></tbody></table></figure>
<pre><code>6
</code></pre>
<ol start="5">
<li><strong>itemsize</strong> 属性返回数组中各个元素所占用的字节数大小。</li>
</ol>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">arr.itemsize</span><br></pre></td></tr></tbody></table></figure>
<pre><code>4
</code></pre>
<ol start="6">
<li>
<p>nbytes 属性，如果想知道整个数组所需的字节数量，可以使用 nbytes 属性。</p>
<p>其值等于数组的 size 属性值乘以itemsize 属性值。</p>
</li>
</ol>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(arr.nbytes)</span><br><span class="line"><span class="built_in">print</span>(arr.size * arr.itemsize)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>24
24
</code></pre>
<ol start="7">
<li><strong>T</strong> 属性，数组转置</li>
</ol>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">arr = np.arange(<span class="number">24</span>).reshape(<span class="number">4</span>,<span class="number">6</span>)</span><br><span class="line">arr</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([[ 0,  1,  2,  3,  4,  5],
       [ 6,  7,  8,  9, 10, 11],
       [12, 13, 14, 15, 16, 17],
       [18, 19, 20, 21, 22, 23]])
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">arr.T</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([[ 0,  6, 12, 18],
       [ 1,  7, 13, 19],
       [ 2,  8, 14, 20],
       [ 3,  9, 15, 21],
       [ 4, 10, 16, 22],
       [ 5, 11, 17, 23]])
</code></pre>
<ol start="8">
<li>复数的实部和虚部属性，<strong>real</strong> 和 <strong>imag</strong> 属性</li>
</ol>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">arr = np.array([<span class="number">1</span>+<span class="number">2j</span>, <span class="number">3</span>+<span class="number">4j</span>])</span><br><span class="line"><span class="comment"># real 属性返回数组的实部</span></span><br><span class="line"><span class="built_in">print</span>(arr.real)</span><br><span class="line"></span><br><span class="line"><span class="comment"># imag 属性返回数组的虚部</span></span><br><span class="line"><span class="built_in">print</span>(arr.imag)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[1. 3.]
[2. 4.]
</code></pre>
<ol start="9">
<li><strong>flat</strong> 属性，返回一个 <code>numpy.flatiter</code> 对象，即可迭代的对象。</li>
</ol>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">arr = np.arange(<span class="number">12</span>).reshape(<span class="number">4</span>,<span class="number">3</span>)</span><br><span class="line">arr</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([[ 0,  1,  2],
       [ 3,  4,  5],
       [ 6,  7,  8],
       [ 9, 10, 11]])
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">f = arr.flat</span><br><span class="line">f</span><br></pre></td></tr></tbody></table></figure>
<pre><code>&lt;numpy.flatiter at 0x18b66060cd0&gt;
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> f:</span><br><span class="line">    <span class="built_in">print</span>(item)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>0
1
2
3
4
5
6
7
8
9
10
11
</code></pre>
<p>并且可通过位置进行索引，如下：</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">f[<span class="number">2</span>]</span><br></pre></td></tr></tbody></table></figure>
<pre><code>2
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">f[[<span class="number">1</span>,<span class="number">4</span>]]</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([1, 4])
</code></pre>
<p>也可以进行赋值:</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">arr.flat = <span class="number">1</span></span><br><span class="line">arr</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([[1, 1, 1],
       [1, 1, 1],
       [1, 1, 1],
       [1, 1, 1]])
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">arr.flat[[<span class="number">1</span>,<span class="number">4</span>]] = <span class="number">2</span></span><br><span class="line">arr</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([[1, 2, 1],
       [1, 2, 1],
       [1, 1, 1],
       [1, 1, 1]])
</code></pre>
<h2 id="ndarray-数组的切片和索引"><a class="markdownIt-Anchor" href="#ndarray-数组的切片和索引"></a> ndarray 数组的切片和索引</h2>
<ol>
<li>
<p>一维数组</p>
<p>一维数组的切片和索引与 python 的 list 索引类似。</p>
</li>
</ol>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">arr = np.arange(<span class="number">7</span>)</span><br><span class="line">arr </span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([0, 1, 2, 3, 4, 5, 6])
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">arr[<span class="number">0</span>:<span class="number">3</span>]</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([0, 1, 2])
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">arr[:<span class="number">7</span>:<span class="number">2</span>]</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([0, 2, 4, 6])
</code></pre>
<ol start="2">
<li>二维数组的切片和索引</li>
</ol>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">arr = np.arange(<span class="number">12</span>).reshape(<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line">arr</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11]])
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">arr[:<span class="number">2</span>,:<span class="number">3</span>]</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([[0, 1, 2],
       [4, 5, 6]])
</code></pre>
<h2 id="处理数组形状"><a class="markdownIt-Anchor" href="#处理数组形状"></a> 处理数组形状</h2>
<h3 id="形状转换"><a class="markdownIt-Anchor" href="#形状转换"></a> 形状转换</h3>
<ol>
<li>reshape() 和 resize()</li>
</ol>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">arr = np.arange(<span class="number">12</span>).reshape(<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line">arr</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11]])
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">arr.reshape(<span class="number">4</span>,<span class="number">3</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([[ 0,  1,  2],
       [ 3,  4,  5],
       [ 6,  7,  8],
       [ 9, 10, 11]])
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">arr</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11]])
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">arr.resize(<span class="number">4</span>,<span class="number">3</span>)</span><br><span class="line">arr</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([[ 0,  1,  2],
       [ 3,  4,  5],
       [ 6,  7,  8],
       [ 9, 10, 11]])



resize（）的作用跟 reshape（）类似，但是会改变所作用的数组，相当于有 inplace=True 的效
</code></pre>
<ol start="2">
<li>ravel() 和 flatten()，将多维数组转换成一维数组</li>
</ol>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">arr.ravel()</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11])
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">arr.flatten()</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11])



两者的区别在于返回拷贝（copy）还是返回视图（view），flatten() 返回一份拷贝，需要分配新的内存空间，对拷贝所做的修改不会影响原始矩阵，而 ravel() 返回的是视图（view），会影响原始矩阵。

参考如下代码：
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># flatten() 返回的是拷贝，不会影响原始数组</span></span><br><span class="line">arr.flatten()[<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line">arr</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([[ 0,  1,  2],
       [ 3,  4,  5],
       [ 6,  7,  8],
       [ 9, 10, 11]])
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># ravel() 返回的是视图，会影响原始数组</span></span><br><span class="line">arr.ravel()[<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line">arr</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([[100,   1,   2],
       [  3,   4,   5],
       [  6,   7,   8],
       [  9,  10,  11]])
</code></pre>
<ol start="3">
<li>用 tuple 指定数组的形状</li>
</ol>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">arr.shape = (<span class="number">2</span>,<span class="number">6</span>)</span><br><span class="line">arr</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([[100,   1,   2,   3,   4,   5],
       [  6,   7,   8,   9,  10,  11]])
</code></pre>
<ol start="4">
<li>
<p>转置</p>
<p>前面描述了数组转置的属性（T），也可以通过 transpose() 函数来实现</p>
</li>
</ol>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">arr.transpose()</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([[100,   6],
       [  1,   7],
       [  2,   8],
       [  3,   9],
       [  4,  10],
       [  5,  11]])
</code></pre>
<h3 id="堆叠数组"><a class="markdownIt-Anchor" href="#堆叠数组"></a> 堆叠数组</h3>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">arr_1 = np.arange(<span class="number">12</span>).reshape(<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line">arr_1</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11]])
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">arr_2 = arr_1 * <span class="number">2</span> + arr_1</span><br><span class="line">arr_2</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([[ 0,  3,  6,  9],
       [12, 15, 18, 21],
       [24, 27, 30, 33]])
</code></pre>
<ul>
<li>
<p>水平叠加</p>
<p><code>hstack()</code> 是 NumPy 库中的一个函数，用于水平堆叠数组。</p>
</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">np.hstack((arr_1, arr_2))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([[ 0,  1,  2,  3,  0,  3,  6,  9],
       [ 4,  5,  6,  7, 12, 15, 18, 21],
       [ 8,  9, 10, 11, 24, 27, 30, 33]])



`column_stack()` 函数以列方式对数组进行叠加，功能类似 `hstack（）`
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">np.column_stack((arr_1,arr_2))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([[ 0,  1,  2,  3,  0,  3,  6,  9],
       [ 4,  5,  6,  7, 12, 15, 18, 21],
       [ 8,  9, 10, 11, 24, 27, 30, 33]])
</code></pre>
<ul>
<li>
<p>垂直叠加</p>
<p><code>vstack()</code> 是 NumPy 库中的一个函数，用于垂直堆叠数组。</p>
</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">np.vstack((arr_1,arr_2))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11],
       [ 0,  3,  6,  9],
       [12, 15, 18, 21],
       [24, 27, 30, 33]])



`row_stack()` 函数以行方式对数组进行叠加，功能类似 vstack（）
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">np.row_stack((arr_1,arr_2))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11],
       [ 0,  3,  6,  9],
       [12, 15, 18, 21],
       [24, 27, 30, 33]])
</code></pre>
<ul>
<li>
<p><code>concatenate()</code> 方法，通过设置 <code>axis</code> 的值来设置叠加方向</p>
<ul>
<li>
<p>axis=1 时，沿水平方向叠加</p>
</li>
<li>
<p>axis=0 时，沿垂直方向叠加</p>
</li>
</ul>
</li>
<li>
<p>深度叠加</p>
<p>深度叠加是 NumPy 中的一种叠加方法，通过 dstack 函数实现。</p>
<p>dstack 是 “depth stack” 的缩写，表示将数组沿着深度方向进行堆叠。</p>
</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 一维数组</span></span><br><span class="line"></span><br><span class="line">arr1 = np.array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line">arr2 = np.array([<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>])</span><br><span class="line"></span><br><span class="line">result = np.dstack((arr1, arr2))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"一维数组 1:"</span>)</span><br><span class="line"><span class="built_in">print</span>(arr1)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"一维数组 2:"</span>)</span><br><span class="line"><span class="built_in">print</span>(arr2)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"深度堆叠后的数组:"</span>)</span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>一维数组 1:
[1 2 3]
一维数组 2:
[4 5 6]
深度堆叠后的数组:
[[[1 4]
  [2 5]
  [3 6]]]
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 三维数组</span></span><br><span class="line">arr1 = np.array([[[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>]], [[<span class="number">5</span>, <span class="number">6</span>], [<span class="number">7</span>, <span class="number">8</span>]]])</span><br><span class="line">arr2 = np.array([[[<span class="number">9</span>, <span class="number">10</span>], [<span class="number">11</span>, <span class="number">12</span>]], [[<span class="number">13</span>, <span class="number">14</span>], [<span class="number">15</span>, <span class="number">16</span>]]])</span><br><span class="line"></span><br><span class="line">result = np.dstack((arr1, arr2))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"三维数组 1:"</span>)</span><br><span class="line"><span class="built_in">print</span>(arr1)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"三维数组 2:"</span>)</span><br><span class="line"><span class="built_in">print</span>(arr2)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"深度堆叠后的数组:"</span>)</span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>三维数组 1:
[[[1 2]
  [3 4]]

 [[5 6]
  [7 8]]]
三维数组 2:
[[[ 9 10]
  [11 12]]

 [[13 14]
  [15 16]]]
深度堆叠后的数组:
[[[ 1  2  9 10]
  [ 3  4 11 12]]

 [[ 5  6 13 14]
  [ 7  8 15 16]]]
</code></pre>
<h3 id="数组的拆分"><a class="markdownIt-Anchor" href="#数组的拆分"></a> 数组的拆分</h3>
<p>跟数组的叠加类似，数组的拆分可以分为横向拆分、纵向拆分以及深度拆分。</p>
<p>涉及的函数为 <code>hsplit()</code>,<code>split()</code>,<code>dsplit()</code>,<code>split()</code></p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">arr</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11]])
</code></pre>
<ul>
<li>沿横向轴拆分（axis=1）</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">np.hsplit(arr,<span class="number">2</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[array([[0, 1],
        [4, 5],
        [8, 9]]),
 array([[ 2,  3],
        [ 6,  7],
        [10, 11]])]
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">np.split(arr,<span class="number">2</span>,axis=<span class="number">1</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[array([[0, 1],
        [4, 5],
        [8, 9]]),
 array([[ 2,  3],
        [ 6,  7],
        [10, 11]])]
</code></pre>
<ul>
<li>沿纵向轴拆分（axis=0）</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">np.vsplit(arr,<span class="number">3</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[array([[0, 1, 2, 3]]), array([[4, 5, 6, 7]]), array([[ 8,  9, 10, 11]])]
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">np.split(arr,<span class="number">3</span>,axis=<span class="number">0</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[array([[0, 1, 2, 3]]), array([[4, 5, 6, 7]]), array([[ 8,  9, 10, 11]])]
</code></pre>
<ul>
<li>深度拆分</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">arr_ = np.array([[[<span class="number">1</span>,<span class="number">2</span>,<span class="number">9</span>,<span class="number">10</span>],</span><br><span class="line">                 [<span class="number">3</span>,<span class="number">4</span>,<span class="number">11</span>,<span class="number">12</span>]],</span><br><span class="line">                [[<span class="number">5</span>,<span class="number">6</span>,<span class="number">13</span>,<span class="number">14</span>],</span><br><span class="line">                 [<span class="number">7</span>,<span class="number">8</span>,<span class="number">15</span>,<span class="number">16</span>]]])</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">np.dsplit(arr_,<span class="number">2</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[array([[[1, 2],
         [3, 4]],
 
        [[5, 6],
         [7, 8]]]),
 array([[[ 9, 10],
         [11, 12]],
 
        [[13, 14],
         [15, 16]]])]
</code></pre>
<h2 id="数组的类型转换"><a class="markdownIt-Anchor" href="#数组的类型转换"></a> 数组的类型转换</h2>
<ul>
<li>数组转换成 <code>list</code>，使用 <code>tolist()</code></li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">arr</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11]])
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">arr.tolist()</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[[0, 1, 2, 3], [4, 5, 6, 7], [8, 9, 10, 11]]
</code></pre>
<ul>
<li>转换成指定类型，使用 <code>astype()</code></li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">arr.astype(<span class="built_in">float</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([[ 0.,  1.,  2.,  3.],
       [ 4.,  5.,  6.,  7.],
       [ 8.,  9., 10., 11.]])
</code></pre>
<h2 id="numpy-常用统计函数"><a class="markdownIt-Anchor" href="#numpy-常用统计函数"></a> numpy 常用统计函数</h2>
<p>常用的一些函数如下, 请注意函数在使用时需要指定 <code>axis</code> 轴的方向，若不指定，则默认统计整个数组</p>
<ul>
<li>
<p>np.sum()，返回求和</p>
</li>
<li>
<p>np.mean()，返回均值</p>
</li>
<li>
<p>np.max()，返回最大值</p>
</li>
<li>
<p>np.min()，返回最小值</p>
</li>
<li>
<p>np.ptp()，数组沿指定轴返回最大值减去最小值，即（max-min）</p>
</li>
<li>
<p>np.std()，返回标准偏差（standard deviation）</p>
</li>
<li>
<p>np.var()，返回方差（variance）</p>
</li>
<li>
<p>np.cumsum()，返回累加值</p>
</li>
<li>
<p>np.cumprod()，返回累乘积值</p>
</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">arr</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11]])
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">"arr的最大值："</span>,np.<span class="built_in">max</span>(arr))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"沿 axis=1 轴方向最大值"</span>,np.<span class="built_in">max</span>(arr,axis=<span class="number">1</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"沿 axis=0 轴方向最大值"</span>,np.<span class="built_in">max</span>(arr,axis=<span class="number">0</span>))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>arr的最大值： 11
沿 axis=1 轴方向最大值 [ 3  7 11]
沿 axis=0 轴方向最大值 [ 8  9 10 11]
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">"整个数组的最大值减去最小值："</span>,np.ptp(arr))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"沿 axis=1 轴方向最大值减去最小值："</span>,np.ptp(arr,axis=<span class="number">1</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"沿 axis=0 轴方向最大值减去最小值："</span>,np.ptp(arr,axis=<span class="number">0</span>))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>整个数组的最大值减去最小值： 11
沿 axis=1 轴方向最大值减去最小值： [3 3 3]
沿 axis=0 轴方向最大值减去最小值： [8 8 8 8]
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">"沿 axis=1 轴方向累加和："</span>)</span><br><span class="line"><span class="built_in">print</span>(np.cumsum(arr,axis=<span class="number">1</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"沿 axis=0 轴方向累加和："</span>)</span><br><span class="line"><span class="built_in">print</span>(np.cumsum(arr,axis=<span class="number">0</span>))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>沿 axis=1 轴方向累加和：
[[ 0  1  3  6]
 [ 4  9 15 22]
 [ 8 17 27 38]]
沿 axis=0 轴方向累加和：
[[ 0  1  2  3]
 [ 4  6  8 10]
 [12 15 18 21]]
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">"沿 axis=1 轴方向累积乘积："</span>)</span><br><span class="line"><span class="built_in">print</span>(np.cumprod(arr,axis=<span class="number">1</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"沿 axis=0 轴方向累积乘积："</span>)</span><br><span class="line"><span class="built_in">print</span>(np.cumprod(arr,axis=<span class="number">0</span>))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>沿 axis=1 轴方向累积乘积：
[[   0    0    0    0]
 [   4   20  120  840]
 [   8   72  720 7920]]
沿 axis=0 轴方向累积乘积：
[[  0   1   2   3]
 [  0   5  12  21]
 [  0  45 120 231]]
</code></pre>
<h2 id="数组的广播"><a class="markdownIt-Anchor" href="#数组的广播"></a> 数组的广播</h2>
<p>数组的广播（Broadcasting）是 NumPy 中一个非常强大且灵活的特性，它允许不同形状的数组在一起进行数学运算，而不需要显式地复制数据。</p>
<p>广播通过扩展较小的数组，使其与较大的数组具有兼容的形状，从而在元素级别进行操作。</p>
<p><strong>广播规则</strong></p>
<ol>
<li>
<p>如果数组的形状不同，将在较小的形状前面添加 1，以便两个形状具有相同的长度。</p>
</li>
<li>
<p>从最后一个维度开始，比较两个维度：</p>
<ul>
<li>
<p>如果维度大小相同，或者其中一个是 1，则认为它们是兼容的。</p>
</li>
<li>
<p>如果维度大小不同且都不是 1，则引发错误。</p>
</li>
</ul>
</li>
</ol>
<p>示例：</p>
<ol>
<li>标量与数组的运算</li>
</ol>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">arr</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11]])
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">arr*<span class="number">2</span>+<span class="number">1</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([[ 1,  3,  5,  7],
       [ 9, 11, 13, 15],
       [17, 19, 21, 23]])
</code></pre>
<ol start="2">
<li>二维数组的运算</li>
</ol>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">arr_1</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([[ 1,  2,  3,  4],
       [ 5,  6,  7,  8],
       [ 9, 10, 11, 12]])
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">arr_2</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([[ 0,  3,  6,  9],
       [12, 15, 18, 21],
       [24, 27, 30, 33]])
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">arr_1+arr_2</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([[ 1,  5,  9, 13],
       [17, 21, 25, 29],
       [33, 37, 41, 45]])
</code></pre>
<h2 id="numpy-的-random-函数"><a class="markdownIt-Anchor" href="#numpy-的-random-函数"></a> Numpy 的 random 函数</h2>
<ol>
<li>
<p>numpy.random.rand()</p>
<p>该函数用于生成指定形状的数组，其元素为 0 到 1 之间的均匀分布的随机数。该函数非常适合用于生成随机数据进行测试或模拟。</p>
<p><code>numpy.random.rand(d0,d1,…,dn)</code></p>
<ul>
<li>
<p>rand 函数根据给定维度生成 [0,1) 之间的数据（包含 0，不包含 1）</p>
</li>
<li>
<p>d0, d1, …, dn：指定生成数组的每个维度的大小</p>
</li>
<li>
<p>返回一个包含 [0,1) 之间均匀分布随机数的指定维度的数组</p>
</li>
</ul>
</li>
</ol>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">np.random.rand()</span><br></pre></td></tr></tbody></table></figure>
<pre><code>0.9275328714539103
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">np.random.rand(<span class="number">4</span>,<span class="number">3</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([[0.75233067, 0.82095025, 0.36643711],
       [0.79428356, 0.01397488, 0.10248809],
       [0.61569004, 0.08950066, 0.02238753],
       [0.7213211 , 0.30312626, 0.73917971]])
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">np.random.rand(<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([[[0.87139841, 0.32516229],
        [0.01337808, 0.13244377],
        [0.338692  , 0.64150368]],

       [[0.79550202, 0.02392306],
        [0.33995334, 0.87024638],
        [0.99535425, 0.85067413]],

       [[0.69452464, 0.80871016],
        [0.37206753, 0.61024403],
        [0.82416604, 0.89410615]],

       [[0.41647433, 0.39254687],
        [0.1450737 , 0.21654519],
        [0.17012655, 0.49773808]]])
</code></pre>
<ol start="2">
<li>
<p>numpy.random.randn()</p>
<p><code>numpy.random.randn(d0, d1, ..., dn)</code></p>
<ul>
<li>
<p>randn 函数用于生成具有标准正态分布（均值为 0，标准差为 1）的随机数数组的函数</p>
</li>
<li>
<p>d0, d1, …, dn：指定生成数组的每个维度的大小</p>
</li>
<li>
<p>array：返回一个包含标准正态分布随机数的指定维度的数组</p>
</li>
</ul>
</li>
</ol>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">np.random.randn()</span><br></pre></td></tr></tbody></table></figure>
<pre><code>0.70572219460596
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">np.random.randn(<span class="number">4</span>,<span class="number">3</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([[ 1.03290592, -0.87932927, -0.34623251],
       [-0.25474483, -0.37125692,  0.05302508],
       [ 0.25811333,  0.30662382,  0.42724665],
       [ 0.38291888,  0.3112302 ,  0.73444847]])
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">np.random.randn(<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([[[-0.08648492,  1.50660536],
        [-0.11826765,  0.13625975],
        [ 0.27656786,  0.78882986]],

       [[-1.19332833,  0.13552823],
        [ 0.84400032,  1.15895589],
        [ 0.38409222, -0.06949491]],

       [[ 1.24734602,  0.40178125],
        [-0.65134712,  2.15807478],
        [ 2.13394338,  0.52419029]],

       [[-0.54897288,  0.79037642],
        [ 0.21960147, -0.13598927],
        [-0.16807024,  0.33676257]]])
</code></pre>
<ol start="3">
<li>
<p>numpy.random.randint()</p>
<p><code>numpy.random.randint(low, high=None, size=None, dtype=‘l’)</code></p>
<ul>
<li>
<p>返回随机整数，范围区间为 [low,high），包含 low，不包含 high</p>
</li>
<li>
<p>参数：</p>
<ul>
<li>low：生成的随机整数的最小值（包含）。</li>
<li>high：生成的随机整数的最大值（不包含）。如果未指定，则默认范围为 [0, low)。</li>
<li>size：生成随机整数的数组维度。如果为 None，则返回单个整数。</li>
<li>dtype：输出数组的数据类型，默认值为 np.int。</li>
</ul>
</li>
<li>
<p>array：返回一个包含随机整数的数组，数组的形状由 size 参数指定。</p>
</li>
</ul>
</li>
</ol>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"> <span class="comment"># 返回 [0,1) 之间的整数，所以只有0</span></span><br><span class="line">np.random.randint(<span class="number">1</span>,size=<span class="number">5</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([0, 0, 0, 0, 0])
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 返回1个 [1,5) 的随机整数</span></span><br><span class="line">np.random.randint(<span class="number">1</span>,<span class="number">5</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>3
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">np.random.randint(-<span class="number">5</span>,<span class="number">5</span>,size=(<span class="number">4</span>,<span class="number">3</span>))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([[-4,  2, -2],
       [ 3, -4, -4],
       [ 3,  0, -5],
       [ 4,  0, -1]])
</code></pre>
<ol start="4">
<li>
<p>生成 [0,1) 之间的浮点数</p>
<ul>
<li>
<p>numpy.random.random_sample(size=None)</p>
</li>
<li>
<p>numpy.random.random(size=None)</p>
</li>
<li>
<p>numpy.random.ranf(size=None)</p>
</li>
<li>
<p>numpy.random.sample(size=None)</p>
</li>
</ul>
<p>这几个函数实际上是相同的</p>
</li>
</ol>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">'-----------random_sample--------------'</span>)</span><br><span class="line"><span class="built_in">print</span>(np.random.random_sample(size=(<span class="number">2</span>,<span class="number">2</span>)))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">'-----------random--------------'</span>)</span><br><span class="line"><span class="built_in">print</span>(np.random.random(size=(<span class="number">2</span>,<span class="number">2</span>)))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">'-----------ranf--------------'</span>)</span><br><span class="line"><span class="built_in">print</span>(np.random.ranf(size=(<span class="number">2</span>,<span class="number">2</span>)))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">'-----------sample--------------'</span>)</span><br><span class="line"><span class="built_in">print</span>(np.random.sample(size=(<span class="number">2</span>,<span class="number">2</span>)))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>-----------random_sample--------------
[[0.39828533 0.96752729]
 [0.86836258 0.79362494]]
-----------random--------------
[[0.24605324 0.67787384]
 [0.14464191 0.02003403]]
-----------ranf--------------
[[0.72525769 0.01519561]
 [0.35272189 0.07521095]]
-----------sample--------------
[[0.42113849 0.72383149]
 [0.74008451 0.80918369]]
</code></pre>
<ol start="5">
<li>
<p>numpy.random.choice()</p>
<p><code>numpy.random.choice(a, size=None, replace=True, p=None)</code></p>
<ul>
<li>
<p>从给定的一维数组中生成随机数</p>
</li>
<li>
<p>参数:</p>
<ul>
<li>
<p>a：一维数组或整数。如果是整数，则生成的数组为 np.arange(a)。</p>
</li>
<li>
<p>size：输出数组的维度。如果是整数，则返回该长度的一维数组；如果是元组，则返回指定形状的数组。如果为 None，则返回一个单一的元素。</p>
</li>
<li>
<p>replace：布尔值，是否有放回抽样。如果为 False，则不重复抽样。</p>
</li>
<li>
<p>p：一维数组，与 a 的长度相同，表示每个元素被抽取的概率。如果为 None，则默认均匀分布。</p>
</li>
</ul>
</li>
<li>
<p>返回值 array：返回一个包含随机抽取元素的数组，形状由 size 参数指定。</p>
</li>
</ul>
</li>
</ol>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">np.random.choice(<span class="number">5</span>,<span class="number">3</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([2, 0, 3])
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">np.random.choice(<span class="number">5</span>,<span class="number">3</span>,replace=<span class="number">0</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([2, 3, 4])
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">np.random.choice(<span class="number">5</span>,size=(<span class="number">4</span>,<span class="number">3</span>))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([[1, 3, 4],
       [3, 3, 0],
       [3, 4, 3],
       [1, 1, 4]])
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">demo_list = [<span class="string">'lenovo'</span>, <span class="string">'sansumg'</span>,<span class="string">'moto'</span>,<span class="string">'xiaomi'</span>, <span class="string">'iphone'</span>]</span><br><span class="line">np.random.choice(demo_list,size=(<span class="number">3</span>,<span class="number">3</span>))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([['lenovo', 'iphone', 'lenovo'],
       ['iphone', 'lenovo', 'lenovo'],
       ['xiaomi', 'sansumg', 'iphone']], dtype='&lt;U7')



- 参数 p 的长度与参数 a 的长度需要一致；
- 参数 p 为概率，p 里的数据之和应为 1
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">demo_list = [<span class="string">'lenovo'</span>, <span class="string">'sansumg'</span>,<span class="string">'moto'</span>,<span class="string">'xiaomi'</span>, <span class="string">'iphone'</span>]</span><br><span class="line">np.random.choice(demo_list,size=(<span class="number">4</span>,<span class="number">3</span>), p=[<span class="number">0.1</span>,<span class="number">0.6</span>,<span class="number">0.1</span>,<span class="number">0.1</span>,<span class="number">0.1</span>])</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([['sansumg', 'sansumg', 'sansumg'],
       ['iphone', 'moto', 'sansumg'],
       ['xiaomi', 'sansumg', 'sansumg'],
       ['sansumg', 'sansumg', 'sansumg']], dtype='&lt;U7')
</code></pre>
<ol start="6">
<li>
<p>numpy.random.seed()</p>
<ul>
<li>
<p>np.random.seed() 的作用：使得随机数据可预测。</p>
</li>
<li>
<p>当我们设置相同的 seed，每次生成的随机数相同。如果不设置 seed，则每次会生成不同的随机数</p>
</li>
</ul>
</li>
</ol>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">np.random.seed(<span class="number">0</span>)</span><br><span class="line">np.random.rand(<span class="number">4</span>,<span class="number">3</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([[0.5488135 , 0.71518937, 0.60276338],
       [0.54488318, 0.4236548 , 0.64589411],
       [0.43758721, 0.891773  , 0.96366276],
       [0.38344152, 0.79172504, 0.52889492]])
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">np.random.seed(<span class="number">0</span>)</span><br><span class="line">np.random.rand(<span class="number">4</span>,<span class="number">3</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([[0.5488135 , 0.71518937, 0.60276338],
       [0.54488318, 0.4236548 , 0.64589411],
       [0.43758721, 0.891773  , 0.96366276],
       [0.38344152, 0.79172504, 0.52889492]])
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">np.random.seed(<span class="number">10</span>)</span><br><span class="line">np.random.rand(<span class="number">4</span>,<span class="number">3</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>array([[0.77132064, 0.02075195, 0.63364823],
       [0.74880388, 0.49850701, 0.22479665],
       [0.19806286, 0.76053071, 0.16911084],
       [0.08833981, 0.68535982, 0.95339335]])
</code></pre>
<h1 id="numpy-中的-meshgrid-函数"><a class="markdownIt-Anchor" href="#numpy-中的-meshgrid-函数"></a> Numpy 中的 Meshgrid 函数</h1>
<h2 id="meshgrid-函数的基本用法"><a class="markdownIt-Anchor" href="#meshgrid-函数的基本用法"></a> Meshgrid 函数的基本用法</h2>
<p><code>meshgrid</code> 函数用于生成坐标矩阵，常用于在平面或空间上绘制网格。它的主要作用是将两个或多个坐标轴上的点扩展成一个多维的网格点矩阵，适用于二维和三维空间的函数计算和绘图。</p>
<ul>
<li>
<p>[X,Y]=meshgrid(x,y)</p>
</li>
<li>
<p>[X,Y]=meshgrid(x) 与 [X,Y]=meshgrid(x,x) 是等同的</p>
</li>
<li>
<p>[X,Y,Z]=meshgrid(x,y,z) 生成三维数组，可用来计算三变量的函数和绘制三维立体图</p>
</li>
</ul>
<p>这里，主要以 <code>[X,Y]=meshgrid(x,y)</code> 为例，来对该函数进行介绍。</p>
<p><code>[X,Y] = meshgrid(x,y)</code> 将向量 <strong>x</strong> 和 <strong>y</strong> 定义的区域转换成矩阵 <strong>X</strong> 和 <strong>Y</strong> , 其中矩阵 <strong>X</strong> 的行向量是向量 <strong>x</strong> 的简单复制，而矩阵 <strong>Y</strong> 的列向量是向量 <strong>y</strong> 的简单复制 (注：下面代码中 X 和 Y 均是数组，在文中统一称为矩阵了)。</p>
<p>假设 <strong>x</strong> 是长度为 m 的向量，<strong>y</strong> 是长度为 n 的向量，则最终生成<br>
的矩阵 <strong>X</strong> 和 <strong>Y</strong> 的维度都是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>×</mo><mi>m</mi></mrow><annotation encoding="application/x-tex">n \times m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">m</span></span></span></span> （注意不是 $ m \times n $）。</p>
<p><img src="../../../../images/pylearn/meshgrid.png" alt></p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">%matplotlib inline</span><br><span class="line"></span><br><span class="line">m, n = (<span class="number">5</span>, <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">x = np.linspace(<span class="number">0</span>, <span class="number">1</span>, m)</span><br><span class="line">y = np.linspace(<span class="number">0</span>, <span class="number">1</span>, n)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"x:"</span>)</span><br><span class="line"><span class="built_in">print</span>(x)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"y:"</span>)</span><br><span class="line"><span class="built_in">print</span>(y)</span><br><span class="line"></span><br><span class="line">X, Y = np.meshgrid(x, y)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"X:"</span>)</span><br><span class="line"><span class="built_in">print</span>(X)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"Y:"</span>)</span><br><span class="line"><span class="built_in">print</span>(Y)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"X的维度："</span>,X.shape)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"Y的维度："</span>,Y.shape)</span><br><span class="line"></span><br><span class="line">plt.plot(X, Y, marker=<span class="string">'.'</span>, color=<span class="string">'k'</span>, linestyle=<span class="string">'none'</span>)</span><br><span class="line">plt.title(<span class="string">'Meshgrid Example'</span>)</span><br><span class="line">plt.xlabel(<span class="string">'X-axis'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'Y-axis'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></tbody></table></figure>
<pre><code>x:
[0.   0.25 0.5  0.75 1.  ]
y:
[0.  0.5 1. ]
X:
[[0.   0.25 0.5  0.75 1.  ]
 [0.   0.25 0.5  0.75 1.  ]
 [0.   0.25 0.5  0.75 1.  ]]
Y:
[[0.  0.  0.  0.  0. ]
 [0.5 0.5 0.5 0.5 0.5]
 [1.  1.  1.  1.  1. ]]
X的维度： (3, 5)
Y的维度： (3, 5)
</code></pre>
<p><img src="../../../../images/pylearn/output_412_1.png" alt></p>
<p>当然，我们也可以获得网格平面上坐标点的数据，如下：</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">z = [i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">zip</span>(X.flat,Y.flat)]</span><br><span class="line">z</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[(0.0, 0.0),
 (0.25, 0.0),
 (0.5, 0.0),
 (0.75, 0.0),
 (1.0, 0.0),
 (0.0, 0.5),
 (0.25, 0.5),
 (0.5, 0.5),
 (0.75, 0.5),
 (1.0, 0.5),
 (0.0, 1.0),
 (0.25, 1.0),
 (0.5, 1.0),
 (0.75, 1.0),
 (1.0, 1.0)]
</code></pre>
<h2 id="meshgrid-函数的一些应用场景"><a class="markdownIt-Anchor" href="#meshgrid-函数的一些应用场景"></a> Meshgrid 函数的一些应用场景</h2>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sinus2d</span>(<span class="params">x, y</span>):</span><br><span class="line">    <span class="keyword">return</span> np.sin(x) + np.sin(y)</span><br><span class="line"></span><br><span class="line">xx, yy = np.meshgrid(np.linspace(<span class="number">0</span>, <span class="number">2</span> * np.pi, <span class="number">10</span>), np.linspace(<span class="number">0</span>, <span class="number">2</span> * np.pi, <span class="number">10</span>))</span><br><span class="line">z = sinus2d(xx, yy)</span><br><span class="line"></span><br><span class="line">plt.imshow(z, origin=<span class="string">'lower'</span>, interpolation=<span class="string">'none'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></tbody></table></figure>
<p><img src="../../../../images/pylearn/output_416_0.png" alt></p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 增加坐标矩阵的密集程度</span></span><br><span class="line">xx, yy = np.meshgrid(np.linspace(<span class="number">0</span>, <span class="number">2</span> * np.pi, <span class="number">100</span>), np.linspace(<span class="number">0</span>, <span class="number">2</span> * np.pi, <span class="number">100</span>))</span><br><span class="line">z = sinus2d(xx, yy)</span><br><span class="line"></span><br><span class="line">plt.imshow(z, origin=<span class="string">'lower'</span>, interpolation=<span class="string">'none'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></tbody></table></figure>
<p><img src="../../../../images/pylearn/output_417_0.png" alt></p>
<div>
    <p style="color: red;">
        注意 meshgrid 函数的用法和用途还有很多，这里不再过多赘述，可以在具体项目实战中体会 meshgrid 的具体用途。
    </p>
</div>
<h1 id="pandas-的基本用法"><a class="markdownIt-Anchor" href="#pandas-的基本用法"></a> Pandas 的基本用法</h1>
<p>Pandas 可以说是在 Python 数据科学领域应用最为广泛的工具之一。</p>
<p>Pandas 是一种高效的数据处理库，它以 dataframe 和 series 为基本数据类型，呈现出类似 excel 的二维数据。</p>
<h2 id="query-函数"><a class="markdownIt-Anchor" href="#query-函数"></a> query 函数</h2>
<p>在数据处理过程中我们经常会用到数据筛选，而 Pandas 中提供了数据筛选的多种方法，这里主要讲解下在 Pandas 中应用 query 函数来进行数据筛选。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f'pandas version: <span class="subst">{pd.__version__}</span>'</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>pandas version: 1.3.2
</code></pre>
<p>先创建一份数据，供后续使用：</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">data = {</span><br><span class="line">    <span class="string">'brand'</span>: [<span class="string">'数据科学指南'</span>, <span class="string">'StudyInCAU'</span>, <span class="string">'初学者数据'</span>, <span class="string">'Python编程'</span>, <span class="string">'JavaScript开发'</span>],</span><br><span class="line">    <span class="string">'A'</span>: [<span class="number">22</span>, <span class="number">5</span>, <span class="number">12</span>, <span class="number">30</span>, <span class="number">25</span>],</span><br><span class="line">    <span class="string">'B'</span>: [<span class="number">6</span>, <span class="number">10</span>, <span class="number">15</span>, <span class="number">20</span>, <span class="number">18</span>],</span><br><span class="line">    <span class="string">'C'</span>: [<span class="number">11</span>, <span class="number">16</span>, <span class="number">22</span>, <span class="number">14</span>, <span class="number">6</span>],</span><br><span class="line">    <span class="string">'D'</span>: [<span class="number">8</span>, <span class="number">22</span>, <span class="number">19</span>, <span class="number">10</span>, <span class="number">16</span>],</span><br><span class="line">    <span class="string">'till years'</span>: [<span class="number">6</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">28</span>, <span class="number">35</span>]</span><br><span class="line">}</span><br><span class="line">df = pd.DataFrame(data=data)</span><br><span class="line">df</span><br></pre></td></tr></tbody></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>brand</th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
      <th>till years</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>数据科学指南</td>
      <td>22</td>
      <td>6</td>
      <td>11</td>
      <td>8</td>
      <td>6</td>
    </tr>
    <tr>
      <th>1</th>
      <td>StudyInCAU</td>
      <td>5</td>
      <td>10</td>
      <td>16</td>
      <td>22</td>
      <td>3</td>
    </tr>
    <tr>
      <th>2</th>
      <td>初学者数据</td>
      <td>12</td>
      <td>15</td>
      <td>22</td>
      <td>19</td>
      <td>2</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Python编程</td>
      <td>30</td>
      <td>20</td>
      <td>14</td>
      <td>10</td>
      <td>28</td>
    </tr>
    <tr>
      <th>4</th>
      <td>JavaScript开发</td>
      <td>25</td>
      <td>18</td>
      <td>6</td>
      <td>16</td>
      <td>35</td>
    </tr>
  </tbody>
</table>
</div>
<ol>
<li>
<p>常用方法</p>
<p>筛选 “brand” 列中值为 “数据科学指南” 的行，如下：</p>
</li>
</ol>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">df.query(<span class="string">'brand == "数据科学指南"'</span>)</span><br></pre></td></tr></tbody></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>brand</th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
      <th>till years</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>数据科学指南</td>
      <td>22</td>
      <td>6</td>
      <td>11</td>
      <td>8</td>
      <td>6</td>
    </tr>
  </tbody>
</table>
</div>
<p>上面代码中的单引号和双引号是可以互换的，其结果也是一样的：</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">df.query(<span class="string">"brand == '数据科学指南'"</span>)</span><br></pre></td></tr></tbody></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>brand</th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
      <th>till years</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>数据科学指南</td>
      <td>22</td>
      <td>6</td>
      <td>11</td>
      <td>8</td>
      <td>6</td>
    </tr>
  </tbody>
</table>
</div>
<p>上面用 query 函数筛选数据，用下面的方法也是可以实现的：</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">df[df[<span class="string">'brand'</span>]==<span class="string">'数据科学指南'</span>]</span><br></pre></td></tr></tbody></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>brand</th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
      <th>till years</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>数据科学指南</td>
      <td>22</td>
      <td>6</td>
      <td>11</td>
      <td>8</td>
      <td>6</td>
    </tr>
  </tbody>
</table>
</div>
<p>也可以筛选数字：</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">df.query(<span class="string">'A==22'</span>)</span><br></pre></td></tr></tbody></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>brand</th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
      <th>till years</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>数据科学指南</td>
      <td>22</td>
      <td>6</td>
      <td>11</td>
      <td>8</td>
      <td>6</td>
    </tr>
  </tbody>
</table>
</div>
<ol start="2">
<li>
<p>通过数学表达式筛选</p>
<p>除了直接通过等于某个值来筛选，query 函数还支持通过数学表达式来进行数据筛选，包括 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>&gt;</mo></mrow><annotation encoding="application/x-tex">&gt;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">&gt;</span></span></span></span>、<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>&lt;</mo></mrow><annotation encoding="application/x-tex">&lt;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">&lt;</span></span></span></span>、<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>+</mo></mrow><annotation encoding="application/x-tex">+</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord">+</span></span></span></span>、<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo></mrow><annotation encoding="application/x-tex">-</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord">−</span></span></span></span>、<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>∗</mo></mrow><annotation encoding="application/x-tex">*</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.46528em;vertical-align:0em;"></span><span class="mord">∗</span></span></span></span>、<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">/</mi></mrow><annotation encoding="application/x-tex">/</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">/</span></span></span></span> 等</p>
</li>
</ol>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">df.query(<span class="string">'A&gt;B'</span>)</span><br></pre></td></tr></tbody></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>brand</th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
      <th>till years</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>数据科学指南</td>
      <td>22</td>
      <td>6</td>
      <td>11</td>
      <td>8</td>
      <td>6</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Python编程</td>
      <td>30</td>
      <td>20</td>
      <td>14</td>
      <td>10</td>
      <td>28</td>
    </tr>
    <tr>
      <th>4</th>
      <td>JavaScript开发</td>
      <td>25</td>
      <td>18</td>
      <td>6</td>
      <td>16</td>
      <td>35</td>
    </tr>
  </tbody>
</table>
</div>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">df.query(<span class="string">'A*B &lt; C*D'</span>)</span><br></pre></td></tr></tbody></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>brand</th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
      <th>till years</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>StudyInCAU</td>
      <td>5</td>
      <td>10</td>
      <td>16</td>
      <td>22</td>
      <td>3</td>
    </tr>
    <tr>
      <th>2</th>
      <td>初学者数据</td>
      <td>12</td>
      <td>15</td>
      <td>22</td>
      <td>19</td>
      <td>2</td>
    </tr>
  </tbody>
</table>
</div>
<ol start="3">
<li>
<p>通过变量筛选</p>
<p>在程序比较长的时候，经常会使用变量来作为筛选条件。</p>
<p>query 函数在使用变量作为判断标准时，通过在变量前面添加 <code>@</code> 符号来实现。</p>
</li>
</ol>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">id_ = <span class="string">'StudyInCAU'</span></span><br><span class="line">df.query(<span class="string">'brand == @id_'</span>)</span><br></pre></td></tr></tbody></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>brand</th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
      <th>till years</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>StudyInCAU</td>
      <td>5</td>
      <td>10</td>
      <td>16</td>
      <td>22</td>
      <td>3</td>
    </tr>
  </tbody>
</table>
</div>
<ol start="4">
<li>
<p>列表数据筛选</p>
<p>当需要在某列中筛选多个符合要求的值的时候，可以通过列表（list）来实现，示例如下：</p>
</li>
</ol>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 需要注意下双引号和单引号的分开使用</span></span><br><span class="line"></span><br><span class="line">df.query(<span class="string">'brand in ["数据科学指南","StudyInCAU"]'</span>)</span><br></pre></td></tr></tbody></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>brand</th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
      <th>till years</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>数据科学指南</td>
      <td>22</td>
      <td>6</td>
      <td>11</td>
      <td>8</td>
      <td>6</td>
    </tr>
    <tr>
      <th>1</th>
      <td>StudyInCAU</td>
      <td>5</td>
      <td>10</td>
      <td>16</td>
      <td>22</td>
      <td>3</td>
    </tr>
  </tbody>
</table>
</div>
<ol start="5">
<li>
<p>多条件筛选</p>
<p>有很多情况下可能需要通过多个条件来筛选数据，query 函数支持多种条件的组合</p>
<ul>
<li>
<p>两者都需要满足的并列条件使用符号 &amp;, 或单词 and</p>
</li>
<li>
<p>只需要满足其中之一的条件使用符号 |, 或单词 or</p>
</li>
</ul>
</li>
</ol>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">df.query(<span class="string">'brand in ["数据科学指南","StudyInCAU"] &amp; A&gt;10'</span>)</span><br></pre></td></tr></tbody></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>brand</th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
      <th>till years</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>数据科学指南</td>
      <td>22</td>
      <td>6</td>
      <td>11</td>
      <td>8</td>
      <td>6</td>
    </tr>
  </tbody>
</table>
</div>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">df.query(<span class="string">'brand in ["数据科学指南","StudyInCAU"] or A&gt;20'</span>)</span><br></pre></td></tr></tbody></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>brand</th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
      <th>till years</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>数据科学指南</td>
      <td>22</td>
      <td>6</td>
      <td>11</td>
      <td>8</td>
      <td>6</td>
    </tr>
    <tr>
      <th>1</th>
      <td>StudyInCAU</td>
      <td>5</td>
      <td>10</td>
      <td>16</td>
      <td>22</td>
      <td>3</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Python编程</td>
      <td>30</td>
      <td>20</td>
      <td>14</td>
      <td>10</td>
      <td>28</td>
    </tr>
    <tr>
      <th>4</th>
      <td>JavaScript开发</td>
      <td>25</td>
      <td>18</td>
      <td>6</td>
      <td>16</td>
      <td>35</td>
    </tr>
  </tbody>
</table>
</div>
<ol start="6">
<li>
<p>列名称有空格的情况</p>
<p>当 dataframe 的列名称中有空格或其他特殊符号的时候，需要使用 反引号（backtick mark）来将列名包裹起来，示例如下：</p>
</li>
</ol>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">df.query(<span class="string">"`till years` &lt; 5"</span>)</span><br></pre></td></tr></tbody></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>brand</th>
      <th>A</th>
      <th>B</th>
      <th>C</th>
      <th>D</th>
      <th>till years</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>StudyInCAU</td>
      <td>5</td>
      <td>10</td>
      <td>16</td>
      <td>22</td>
      <td>3</td>
    </tr>
    <tr>
      <th>2</th>
      <td>初学者数据</td>
      <td>12</td>
      <td>15</td>
      <td>22</td>
      <td>19</td>
      <td>2</td>
    </tr>
  </tbody>
</table>
</div>
<ol start="7">
<li>
<p>筛选后选取数据列</p>
<p>在数据筛选后，还可以选择需要的数据列</p>
</li>
</ol>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">df.query(<span class="string">"A+B&lt;C+D"</span>)[[<span class="string">'brand'</span>,<span class="string">'A'</span>,<span class="string">'B'</span>]]</span><br></pre></td></tr></tbody></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>brand</th>
      <th>A</th>
      <th>B</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>StudyInCAU</td>
      <td>5</td>
      <td>10</td>
    </tr>
    <tr>
      <th>2</th>
      <td>初学者数据</td>
      <td>12</td>
      <td>15</td>
    </tr>
  </tbody>
</table>
</div>
<h2 id="groupby-操作"><a class="markdownIt-Anchor" href="#groupby-操作"></a> Groupby 操作</h2>
<p>Pandas 的 groupby 操作是一种用于对数据进行分组并应用聚合函数的强大工具。它通常用于数据聚合、汇总和分析。</p>
<ol>
<li>
<p>groupby 的基础操作</p>
<p>groupby 可以对 pandas 中 dataframe 的各列进行统计，包括求和、求均值等。</p>
</li>
</ol>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">df = pd.DataFrame({</span><br><span class="line">    <span class="string">'department'</span>: [<span class="string">'Sales'</span>, <span class="string">'Sales'</span>, <span class="string">'HR'</span>, <span class="string">'HR'</span>, <span class="string">'IT'</span>, <span class="string">'IT'</span>, <span class="string">'IT'</span>, <span class="string">'Sales'</span>, <span class="string">'HR'</span>, <span class="string">'IT'</span>, <span class="string">'Sales'</span>, <span class="string">'HR'</span>, </span><br><span class="line">                   <span class="string">'Marketing'</span>, <span class="string">'Marketing'</span>, <span class="string">'Finance'</span>, <span class="string">'Finance'</span>, <span class="string">'Sales'</span>, <span class="string">'HR'</span>, <span class="string">'IT'</span>, <span class="string">'Marketing'</span>, </span><br><span class="line">                   <span class="string">'Finance'</span>, <span class="string">'Sales'</span>, <span class="string">'HR'</span>, <span class="string">'IT'</span>],</span><br><span class="line">    <span class="string">'employee'</span>: [<span class="string">'Alice'</span>, <span class="string">'Bob'</span>, <span class="string">'Charlie'</span>, <span class="string">'David'</span>, <span class="string">'Eve'</span>, <span class="string">'Frank'</span>, <span class="string">'Grace'</span>, <span class="string">'Hank'</span>, <span class="string">'Ivy'</span>, <span class="string">'Jack'</span>, </span><br><span class="line">                 <span class="string">'Ken'</span>, <span class="string">'Liam'</span>, <span class="string">'Megan'</span>, <span class="string">'Nancy'</span>, <span class="string">'Oliver'</span>, <span class="string">'Paul'</span>, <span class="string">'Quincy'</span>, <span class="string">'Rachel'</span>, <span class="string">'Steve'</span>, <span class="string">'Tina'</span>, </span><br><span class="line">                 <span class="string">'Uma'</span>, <span class="string">'Vera'</span>, <span class="string">'Will'</span>, <span class="string">'Xander'</span>],</span><br><span class="line">    <span class="string">'salary'</span>: [<span class="number">50000</span>, <span class="number">60000</span>, <span class="number">45000</span>, <span class="number">48000</span>, <span class="number">70000</span>, <span class="number">72000</span>, <span class="number">68000</span>, <span class="number">55000</span>, <span class="number">47000</span>, <span class="number">73000</span>, <span class="number">56000</span>, <span class="number">46000</span>, </span><br><span class="line">               <span class="number">75000</span>, <span class="number">52000</span>, <span class="number">90000</span>, <span class="number">88000</span>, <span class="number">65000</span>, <span class="number">54000</span>, <span class="number">76000</span>, <span class="number">59000</span>, <span class="number">92000</span>, <span class="number">57000</span>, <span class="number">43000</span>, <span class="number">81000</span>],</span><br><span class="line">    <span class="string">'age'</span>: [<span class="number">25</span>, <span class="number">30</span>, <span class="number">35</span>, <span class="number">40</span>, <span class="number">28</span>, <span class="number">33</span>, <span class="number">29</span>, <span class="number">27</span>, <span class="number">38</span>, <span class="number">31</span>, <span class="number">26</span>, <span class="number">36</span>, </span><br><span class="line">            <span class="number">34</span>, <span class="number">28</span>, <span class="number">41</span>, <span class="number">39</span>, <span class="number">32</span>, <span class="number">37</span>, <span class="number">30</span>, <span class="number">29</span>, <span class="number">45</span>, <span class="number">33</span>, <span class="number">31</span>, <span class="number">42</span>],</span><br><span class="line">    <span class="string">'years_of_service'</span>: [<span class="number">2</span>, <span class="number">5</span>, <span class="number">10</span>, <span class="number">12</span>, <span class="number">3</span>, <span class="number">8</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">11</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">13</span>, </span><br><span class="line">                         <span class="number">5</span>, <span class="number">4</span>, <span class="number">20</span>, <span class="number">18</span>, <span class="number">15</span>, <span class="number">8</span>, <span class="number">6</span>, <span class="number">4</span>, <span class="number">22</span>, <span class="number">10</span>, <span class="number">7</span>, <span class="number">16</span>]</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line">df</span><br></pre></td></tr></tbody></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>department</th>
      <th>employee</th>
      <th>salary</th>
      <th>age</th>
      <th>years_of_service</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Sales</td>
      <td>Alice</td>
      <td>50000</td>
      <td>25</td>
      <td>2</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Sales</td>
      <td>Bob</td>
      <td>60000</td>
      <td>30</td>
      <td>5</td>
    </tr>
    <tr>
      <th>2</th>
      <td>HR</td>
      <td>Charlie</td>
      <td>45000</td>
      <td>35</td>
      <td>10</td>
    </tr>
    <tr>
      <th>3</th>
      <td>HR</td>
      <td>David</td>
      <td>48000</td>
      <td>40</td>
      <td>12</td>
    </tr>
    <tr>
      <th>4</th>
      <td>IT</td>
      <td>Eve</td>
      <td>70000</td>
      <td>28</td>
      <td>3</td>
    </tr>
    <tr>
      <th>5</th>
      <td>IT</td>
      <td>Frank</td>
      <td>72000</td>
      <td>33</td>
      <td>8</td>
    </tr>
    <tr>
      <th>6</th>
      <td>IT</td>
      <td>Grace</td>
      <td>68000</td>
      <td>29</td>
      <td>4</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Sales</td>
      <td>Hank</td>
      <td>55000</td>
      <td>27</td>
      <td>6</td>
    </tr>
    <tr>
      <th>8</th>
      <td>HR</td>
      <td>Ivy</td>
      <td>47000</td>
      <td>38</td>
      <td>11</td>
    </tr>
    <tr>
      <th>9</th>
      <td>IT</td>
      <td>Jack</td>
      <td>73000</td>
      <td>31</td>
      <td>7</td>
    </tr>
    <tr>
      <th>10</th>
      <td>Sales</td>
      <td>Ken</td>
      <td>56000</td>
      <td>26</td>
      <td>9</td>
    </tr>
    <tr>
      <th>11</th>
      <td>HR</td>
      <td>Liam</td>
      <td>46000</td>
      <td>36</td>
      <td>13</td>
    </tr>
    <tr>
      <th>12</th>
      <td>Marketing</td>
      <td>Megan</td>
      <td>75000</td>
      <td>34</td>
      <td>5</td>
    </tr>
    <tr>
      <th>13</th>
      <td>Marketing</td>
      <td>Nancy</td>
      <td>52000</td>
      <td>28</td>
      <td>4</td>
    </tr>
    <tr>
      <th>14</th>
      <td>Finance</td>
      <td>Oliver</td>
      <td>90000</td>
      <td>41</td>
      <td>20</td>
    </tr>
    <tr>
      <th>15</th>
      <td>Finance</td>
      <td>Paul</td>
      <td>88000</td>
      <td>39</td>
      <td>18</td>
    </tr>
    <tr>
      <th>16</th>
      <td>Sales</td>
      <td>Quincy</td>
      <td>65000</td>
      <td>32</td>
      <td>15</td>
    </tr>
    <tr>
      <th>17</th>
      <td>HR</td>
      <td>Rachel</td>
      <td>54000</td>
      <td>37</td>
      <td>8</td>
    </tr>
    <tr>
      <th>18</th>
      <td>IT</td>
      <td>Steve</td>
      <td>76000</td>
      <td>30</td>
      <td>6</td>
    </tr>
    <tr>
      <th>19</th>
      <td>Marketing</td>
      <td>Tina</td>
      <td>59000</td>
      <td>29</td>
      <td>4</td>
    </tr>
    <tr>
      <th>20</th>
      <td>Finance</td>
      <td>Uma</td>
      <td>92000</td>
      <td>45</td>
      <td>22</td>
    </tr>
    <tr>
      <th>21</th>
      <td>Sales</td>
      <td>Vera</td>
      <td>57000</td>
      <td>33</td>
      <td>10</td>
    </tr>
    <tr>
      <th>22</th>
      <td>HR</td>
      <td>Will</td>
      <td>43000</td>
      <td>31</td>
      <td>7</td>
    </tr>
    <tr>
      <th>23</th>
      <td>IT</td>
      <td>Xander</td>
      <td>81000</td>
      <td>42</td>
      <td>16</td>
    </tr>
  </tbody>
</table>
</div>
<pre><code>按 A 列分组（groupby），获取其他列的均值
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">df.groupby(<span class="string">'department'</span>).mean()</span><br></pre></td></tr></tbody></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>salary</th>
      <th>age</th>
      <th>years_of_service</th>
    </tr>
    <tr>
      <th>department</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Finance</th>
      <td>90000.000000</td>
      <td>41.666667</td>
      <td>20.000000</td>
    </tr>
    <tr>
      <th>HR</th>
      <td>47166.666667</td>
      <td>36.166667</td>
      <td>10.166667</td>
    </tr>
    <tr>
      <th>IT</th>
      <td>73333.333333</td>
      <td>32.166667</td>
      <td>7.333333</td>
    </tr>
    <tr>
      <th>Marketing</th>
      <td>62000.000000</td>
      <td>30.333333</td>
      <td>4.333333</td>
    </tr>
    <tr>
      <th>Sales</th>
      <td>57166.666667</td>
      <td>28.833333</td>
      <td>7.833333</td>
    </tr>
  </tbody>
</table>
</div>
<pre><code>按多列进行分组（groupby）
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">df.groupby([<span class="string">'department'</span>,<span class="string">'employee'</span>]).mean()</span><br></pre></td></tr></tbody></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>salary</th>
      <th>age</th>
      <th>years_of_service</th>
    </tr>
    <tr>
      <th>department</th>
      <th>employee</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="3" valign="top">Finance</th>
      <th>Oliver</th>
      <td>90000.0</td>
      <td>41.0</td>
      <td>20.0</td>
    </tr>
    <tr>
      <th>Paul</th>
      <td>88000.0</td>
      <td>39.0</td>
      <td>18.0</td>
    </tr>
    <tr>
      <th>Uma</th>
      <td>92000.0</td>
      <td>45.0</td>
      <td>22.0</td>
    </tr>
    <tr>
      <th rowspan="6" valign="top">HR</th>
      <th>Charlie</th>
      <td>45000.0</td>
      <td>35.0</td>
      <td>10.0</td>
    </tr>
    <tr>
      <th>David</th>
      <td>48000.0</td>
      <td>40.0</td>
      <td>12.0</td>
    </tr>
    <tr>
      <th>Ivy</th>
      <td>47000.0</td>
      <td>38.0</td>
      <td>11.0</td>
    </tr>
    <tr>
      <th>Liam</th>
      <td>46000.0</td>
      <td>36.0</td>
      <td>13.0</td>
    </tr>
    <tr>
      <th>Rachel</th>
      <td>54000.0</td>
      <td>37.0</td>
      <td>8.0</td>
    </tr>
    <tr>
      <th>Will</th>
      <td>43000.0</td>
      <td>31.0</td>
      <td>7.0</td>
    </tr>
    <tr>
      <th rowspan="6" valign="top">IT</th>
      <th>Eve</th>
      <td>70000.0</td>
      <td>28.0</td>
      <td>3.0</td>
    </tr>
    <tr>
      <th>Frank</th>
      <td>72000.0</td>
      <td>33.0</td>
      <td>8.0</td>
    </tr>
    <tr>
      <th>Grace</th>
      <td>68000.0</td>
      <td>29.0</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>Jack</th>
      <td>73000.0</td>
      <td>31.0</td>
      <td>7.0</td>
    </tr>
    <tr>
      <th>Steve</th>
      <td>76000.0</td>
      <td>30.0</td>
      <td>6.0</td>
    </tr>
    <tr>
      <th>Xander</th>
      <td>81000.0</td>
      <td>42.0</td>
      <td>16.0</td>
    </tr>
    <tr>
      <th rowspan="3" valign="top">Marketing</th>
      <th>Megan</th>
      <td>75000.0</td>
      <td>34.0</td>
      <td>5.0</td>
    </tr>
    <tr>
      <th>Nancy</th>
      <td>52000.0</td>
      <td>28.0</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>Tina</th>
      <td>59000.0</td>
      <td>29.0</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th rowspan="6" valign="top">Sales</th>
      <th>Alice</th>
      <td>50000.0</td>
      <td>25.0</td>
      <td>2.0</td>
    </tr>
    <tr>
      <th>Bob</th>
      <td>60000.0</td>
      <td>30.0</td>
      <td>5.0</td>
    </tr>
    <tr>
      <th>Hank</th>
      <td>55000.0</td>
      <td>27.0</td>
      <td>6.0</td>
    </tr>
    <tr>
      <th>Ken</th>
      <td>56000.0</td>
      <td>26.0</td>
      <td>9.0</td>
    </tr>
    <tr>
      <th>Quincy</th>
      <td>65000.0</td>
      <td>32.0</td>
      <td>15.0</td>
    </tr>
    <tr>
      <th>Vera</th>
      <td>57000.0</td>
      <td>33.0</td>
      <td>10.0</td>
    </tr>
  </tbody>
</table>
</div>
<ol start="2">
<li>
<p>分组后选择列进行运算</p>
<p>分组后，可以选取单列数据，或者多个列组成的列表（list）进行运算</p>
</li>
</ol>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">df_1 = df.groupby(<span class="string">"department"</span>)</span><br><span class="line"></span><br><span class="line">df_1[<span class="string">"salary"</span>].mean()</span><br></pre></td></tr></tbody></table></figure>
<pre><code>department
Finance      90000.000000
HR           47166.666667
IT           73333.333333
Marketing    62000.000000
Sales        57166.666667
Name: salary, dtype: float64
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">df_1[[<span class="string">"salary"</span>,<span class="string">"age"</span>]].mean()</span><br></pre></td></tr></tbody></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>salary</th>
      <th>age</th>
    </tr>
    <tr>
      <th>department</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Finance</th>
      <td>90000.000000</td>
      <td>41.666667</td>
    </tr>
    <tr>
      <th>HR</th>
      <td>47166.666667</td>
      <td>36.166667</td>
    </tr>
    <tr>
      <th>IT</th>
      <td>73333.333333</td>
      <td>32.166667</td>
    </tr>
    <tr>
      <th>Marketing</th>
      <td>62000.000000</td>
      <td>30.333333</td>
    </tr>
    <tr>
      <th>Sales</th>
      <td>57166.666667</td>
      <td>28.833333</td>
    </tr>
  </tbody>
</table>
</div>
<p>还可以针对不同的列选用不同的聚合方法</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">df_1.agg({<span class="string">'salary'</span>:<span class="string">'sum'</span>, <span class="string">'age'</span>:<span class="string">'mean'</span>})</span><br></pre></td></tr></tbody></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>salary</th>
      <th>age</th>
    </tr>
    <tr>
      <th>department</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Finance</th>
      <td>270000</td>
      <td>41.666667</td>
    </tr>
    <tr>
      <th>HR</th>
      <td>283000</td>
      <td>36.166667</td>
    </tr>
    <tr>
      <th>IT</th>
      <td>440000</td>
      <td>32.166667</td>
    </tr>
    <tr>
      <th>Marketing</th>
      <td>186000</td>
      <td>30.333333</td>
    </tr>
    <tr>
      <th>Sales</th>
      <td>343000</td>
      <td>28.833333</td>
    </tr>
  </tbody>
</table>
</div>
<h2 id="聚合方法"><a class="markdownIt-Anchor" href="#聚合方法"></a> 聚合方法</h2>
<p>聚合方法有 size() 和 count()</p>
<p>size 跟 count 的区别：</p>
<ul>
<li>
<p>size 计数时包含 NaN 值</p>
</li>
<li>
<p>count 不包含 NaN 值</p>
</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">df = pd.DataFrame({</span><br><span class="line">    <span class="string">'department'</span>: [<span class="string">'Sales'</span>, <span class="string">'Sales'</span>, <span class="string">'HR'</span>, <span class="string">'HR'</span>, <span class="string">'IT'</span>, <span class="string">'IT'</span>, <span class="string">'IT'</span>, <span class="string">'Sales'</span>, <span class="string">'HR'</span>, <span class="string">'IT'</span>, <span class="string">'Sales'</span>, <span class="string">'HR'</span>, </span><br><span class="line">                   <span class="string">'Marketing'</span>, <span class="string">'Marketing'</span>, <span class="string">'Finance'</span>, <span class="string">'Finance'</span>, <span class="string">'Sales'</span>, <span class="string">'HR'</span>, <span class="string">'IT'</span>, <span class="string">'Marketing'</span>, </span><br><span class="line">                   <span class="string">'Finance'</span>, <span class="string">'Sales'</span>, <span class="string">'HR'</span>, <span class="string">'IT'</span>],</span><br><span class="line">    <span class="string">'employee'</span>: [<span class="string">'Alice'</span>, <span class="string">'Bob'</span>, <span class="string">'Charlie'</span>, <span class="string">'David'</span>, <span class="string">'Eve'</span>, <span class="string">'Frank'</span>, <span class="string">'Grace'</span>, <span class="string">'Hank'</span>, <span class="string">'Ivy'</span>, <span class="string">'Jack'</span>, </span><br><span class="line">                 <span class="string">'Ken'</span>, <span class="string">'Liam'</span>, <span class="string">'Megan'</span>, <span class="string">'Nancy'</span>, <span class="string">'Oliver'</span>, <span class="string">'Paul'</span>, <span class="string">'Quincy'</span>, <span class="string">'Rachel'</span>, <span class="string">'Steve'</span>, <span class="string">'Tina'</span>, </span><br><span class="line">                 <span class="string">'Uma'</span>, <span class="string">'Vera'</span>, <span class="string">'Will'</span>, <span class="string">'Xander'</span>],</span><br><span class="line">    <span class="string">'salary'</span>: [<span class="number">50000</span>, <span class="number">60000</span>, <span class="number">45000</span>, np.nan, <span class="number">70000</span>, <span class="number">72000</span>, <span class="number">68000</span>, <span class="number">55000</span>, <span class="number">47000</span>, <span class="number">73000</span>, <span class="number">56000</span>, np.nan, </span><br><span class="line">               <span class="number">75000</span>, <span class="number">52000</span>, <span class="number">90000</span>, <span class="number">88000</span>, <span class="number">65000</span>, <span class="number">54000</span>, np.nan, <span class="number">59000</span>, <span class="number">92000</span>, <span class="number">57000</span>, <span class="number">43000</span>, <span class="number">81000</span>],</span><br><span class="line">    <span class="string">'age'</span>: [<span class="number">25</span>, <span class="number">30</span>, <span class="number">35</span>, <span class="number">40</span>, <span class="number">28</span>, np.nan, <span class="number">29</span>, <span class="number">27</span>, <span class="number">38</span>, <span class="number">31</span>, <span class="number">26</span>, <span class="number">36</span>, </span><br><span class="line">            <span class="number">34</span>, <span class="number">28</span>, <span class="number">41</span>, <span class="number">39</span>, <span class="number">32</span>, <span class="number">37</span>, <span class="number">30</span>, np.nan, <span class="number">45</span>, <span class="number">33</span>, <span class="number">31</span>, <span class="number">42</span>],</span><br><span class="line">    <span class="string">'years_of_service'</span>: [<span class="number">2</span>, <span class="number">5</span>, <span class="number">10</span>, <span class="number">12</span>, <span class="number">3</span>, <span class="number">8</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">11</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">13</span>, </span><br><span class="line">                         <span class="number">5</span>, np.nan, <span class="number">20</span>, <span class="number">18</span>, <span class="number">15</span>, <span class="number">8</span>, <span class="number">6</span>, <span class="number">4</span>, <span class="number">22</span>, <span class="number">10</span>, <span class="number">7</span>, <span class="number">16</span>]</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line">df</span><br></pre></td></tr></tbody></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>department</th>
      <th>employee</th>
      <th>salary</th>
      <th>age</th>
      <th>years_of_service</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Sales</td>
      <td>Alice</td>
      <td>50000.0</td>
      <td>25.0</td>
      <td>2.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Sales</td>
      <td>Bob</td>
      <td>60000.0</td>
      <td>30.0</td>
      <td>5.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>HR</td>
      <td>Charlie</td>
      <td>45000.0</td>
      <td>35.0</td>
      <td>10.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>HR</td>
      <td>David</td>
      <td>NaN</td>
      <td>40.0</td>
      <td>12.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>IT</td>
      <td>Eve</td>
      <td>70000.0</td>
      <td>28.0</td>
      <td>3.0</td>
    </tr>
    <tr>
      <th>5</th>
      <td>IT</td>
      <td>Frank</td>
      <td>72000.0</td>
      <td>NaN</td>
      <td>8.0</td>
    </tr>
    <tr>
      <th>6</th>
      <td>IT</td>
      <td>Grace</td>
      <td>68000.0</td>
      <td>29.0</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Sales</td>
      <td>Hank</td>
      <td>55000.0</td>
      <td>27.0</td>
      <td>6.0</td>
    </tr>
    <tr>
      <th>8</th>
      <td>HR</td>
      <td>Ivy</td>
      <td>47000.0</td>
      <td>38.0</td>
      <td>11.0</td>
    </tr>
    <tr>
      <th>9</th>
      <td>IT</td>
      <td>Jack</td>
      <td>73000.0</td>
      <td>31.0</td>
      <td>7.0</td>
    </tr>
    <tr>
      <th>10</th>
      <td>Sales</td>
      <td>Ken</td>
      <td>56000.0</td>
      <td>26.0</td>
      <td>9.0</td>
    </tr>
    <tr>
      <th>11</th>
      <td>HR</td>
      <td>Liam</td>
      <td>NaN</td>
      <td>36.0</td>
      <td>13.0</td>
    </tr>
    <tr>
      <th>12</th>
      <td>Marketing</td>
      <td>Megan</td>
      <td>75000.0</td>
      <td>34.0</td>
      <td>5.0</td>
    </tr>
    <tr>
      <th>13</th>
      <td>Marketing</td>
      <td>Nancy</td>
      <td>52000.0</td>
      <td>28.0</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>14</th>
      <td>Finance</td>
      <td>Oliver</td>
      <td>90000.0</td>
      <td>41.0</td>
      <td>20.0</td>
    </tr>
    <tr>
      <th>15</th>
      <td>Finance</td>
      <td>Paul</td>
      <td>88000.0</td>
      <td>39.0</td>
      <td>18.0</td>
    </tr>
    <tr>
      <th>16</th>
      <td>Sales</td>
      <td>Quincy</td>
      <td>65000.0</td>
      <td>32.0</td>
      <td>15.0</td>
    </tr>
    <tr>
      <th>17</th>
      <td>HR</td>
      <td>Rachel</td>
      <td>54000.0</td>
      <td>37.0</td>
      <td>8.0</td>
    </tr>
    <tr>
      <th>18</th>
      <td>IT</td>
      <td>Steve</td>
      <td>NaN</td>
      <td>30.0</td>
      <td>6.0</td>
    </tr>
    <tr>
      <th>19</th>
      <td>Marketing</td>
      <td>Tina</td>
      <td>59000.0</td>
      <td>NaN</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>20</th>
      <td>Finance</td>
      <td>Uma</td>
      <td>92000.0</td>
      <td>45.0</td>
      <td>22.0</td>
    </tr>
    <tr>
      <th>21</th>
      <td>Sales</td>
      <td>Vera</td>
      <td>57000.0</td>
      <td>33.0</td>
      <td>10.0</td>
    </tr>
    <tr>
      <th>22</th>
      <td>HR</td>
      <td>Will</td>
      <td>43000.0</td>
      <td>31.0</td>
      <td>7.0</td>
    </tr>
    <tr>
      <th>23</th>
      <td>IT</td>
      <td>Xander</td>
      <td>81000.0</td>
      <td>42.0</td>
      <td>16.0</td>
    </tr>
  </tbody>
</table>
</div>
<ol>
<li>
<p>count()</p>
<ul>
<li>
<p>功能: 返回分组后的每个组中非 NaN 值的数量。</p>
</li>
<li>
<p>返回值: 返回一个包含每个组非 NaN 值数量的 Series 对象（或 DataFrame 对象，如果指定了多个列）。</p>
</li>
</ul>
</li>
</ol>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">df.groupby(<span class="string">"department"</span>, as_index=<span class="literal">False</span>)[<span class="string">'salary'</span>].count()</span><br></pre></td></tr></tbody></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>department</th>
      <th>salary</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Finance</td>
      <td>3</td>
    </tr>
    <tr>
      <th>1</th>
      <td>HR</td>
      <td>4</td>
    </tr>
    <tr>
      <th>2</th>
      <td>IT</td>
      <td>5</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Marketing</td>
      <td>3</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Sales</td>
      <td>6</td>
    </tr>
  </tbody>
</table>
</div>
<ol start="2">
<li>
<p>size()</p>
<ul>
<li>
<p>功能: 返回分组后的每个组的大小，即每个组中元素的总数，包括 NaN 值。</p>
</li>
<li>
<p>返回值: 返回一个包含每个组大小的 Series 对象。</p>
</li>
</ul>
</li>
</ol>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">df.groupby(<span class="string">"department"</span>, as_index=<span class="literal">False</span>)[<span class="string">'salary'</span>].size()</span><br></pre></td></tr></tbody></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>department</th>
      <th>size</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Finance</td>
      <td>3</td>
    </tr>
    <tr>
      <th>1</th>
      <td>HR</td>
      <td>6</td>
    </tr>
    <tr>
      <th>2</th>
      <td>IT</td>
      <td>6</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Marketing</td>
      <td>3</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Sales</td>
      <td>6</td>
    </tr>
  </tbody>
</table>
</div>
<h2 id="分组运算方法-agg"><a class="markdownIt-Anchor" href="#分组运算方法-agg"></a> 分组运算方法 agg()</h2>
<p>agg() 方法（全称：aggregate）用于对 DataFrame 或 Series 进行分组聚合操作。</p>
<p>它可以同时对不同的列应用多个聚合函数，非常灵活和强大。我们可以传递一个函数、一组函数、或者一个字典，来指定对每个列应用哪些聚合操作。</p>
<p><strong>使用 agg() 的基本方法</strong></p>
<ul>
<li>
<p>函数: 可以是单个函数，如 mean、sum 等，也可以是多个函数的列表。</p>
</li>
<li>
<p>字典: 如果是字典，键是列名，值是要应用于该列的函数或函数列表。</p>
</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 对 salary 列进行聚合操作（自动忽略 NaN 值）</span></span><br><span class="line">result = df.groupby(<span class="string">'department'</span>)[<span class="string">'salary'</span>].agg([<span class="string">'mean'</span>, <span class="string">'sum'</span>,<span class="string">'std'</span>])</span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>                    mean       sum           std
department                                      
Finance     90000.000000  270000.0   2000.000000
HR          47250.000000  189000.0   4787.135539
IT          72800.000000  364000.0   4969.909456
Marketing   62000.000000  186000.0  11789.826123
Sales       57166.666667  343000.0   5036.533199
</code></pre>
<p>或者：</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">result = df.groupby(<span class="string">'department'</span>)[<span class="string">'salary'</span>].agg(mean=np.mean, <span class="built_in">sum</span>=np.<span class="built_in">sum</span>, std=np.std)</span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>                    mean       sum           std
department                                      
Finance     90000.000000  270000.0   2000.000000
HR          47250.000000  189000.0   4787.135539
IT          72800.000000  364000.0   4969.909456
Marketing   62000.000000  186000.0  11789.826123
Sales       57166.666667  343000.0   5036.533199
</code></pre>
<p>针对不同的列应用多种不同的统计方法:</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">df.groupby(<span class="string">'department'</span>).agg({<span class="string">'salary'</span>:[<span class="string">'mean'</span>, <span class="string">'std'</span>,<span class="string">'sum'</span>], <span class="string">'age'</span>:[<span class="string">'mean'</span>,<span class="string">'std'</span>]})</span><br></pre></td></tr></tbody></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead tr th &#123;
    text-align: left;
&#125;

.dataframe thead tr:last-of-type th &#123;
    text-align: right;
&#125;
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th colspan="3" halign="left">salary</th>
      <th colspan="2" halign="left">age</th>
    </tr>
    <tr>
      <th></th>
      <th>mean</th>
      <th>std</th>
      <th>sum</th>
      <th>mean</th>
      <th>std</th>
    </tr>
    <tr>
      <th>department</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Finance</th>
      <td>90000.000000</td>
      <td>2000.000000</td>
      <td>270000.0</td>
      <td>41.666667</td>
      <td>3.055050</td>
    </tr>
    <tr>
      <th>HR</th>
      <td>47250.000000</td>
      <td>4787.135539</td>
      <td>189000.0</td>
      <td>36.166667</td>
      <td>3.060501</td>
    </tr>
    <tr>
      <th>IT</th>
      <td>72800.000000</td>
      <td>4969.909456</td>
      <td>364000.0</td>
      <td>32.000000</td>
      <td>5.700877</td>
    </tr>
    <tr>
      <th>Marketing</th>
      <td>62000.000000</td>
      <td>11789.826123</td>
      <td>186000.0</td>
      <td>31.000000</td>
      <td>4.242641</td>
    </tr>
    <tr>
      <th>Sales</th>
      <td>57166.666667</td>
      <td>5036.533199</td>
      <td>343000.0</td>
      <td>28.833333</td>
      <td>3.311596</td>
    </tr>
  </tbody>
</table>
</div>
<h2 id="分组运算方法-apply"><a class="markdownIt-Anchor" href="#分组运算方法-apply"></a> 分组运算方法 apply()</h2>
<p>Pandas 中的 apply() 方法是一个强大且灵活的工具，它可以对 DataFrame 或 Series 的行或列应用任意函数。</p>
<p>apply() 方法在分组运算中同样适用，可以在 groupby 对象上使用，从而对每个组应用自定义的聚合或转换函数。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">df.groupby(<span class="string">'department'</span>).apply(np.mean)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>E:\software\Anaconda\envs\pylearn39\lib\site-packages\numpy\core\fromnumeric.py:3438: FutureWarning: Dropping of nuisance columns in DataFrame reductions (with 'numeric_only=None') is deprecated; in a future version this will raise TypeError.  Select only valid columns before calling the reduction.
  return mean(axis=axis, dtype=dtype, out=out, **kwargs)
</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>salary</th>
      <th>age</th>
      <th>years_of_service</th>
    </tr>
    <tr>
      <th>department</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Finance</th>
      <td>90000.000000</td>
      <td>41.666667</td>
      <td>20.000000</td>
    </tr>
    <tr>
      <th>HR</th>
      <td>47250.000000</td>
      <td>36.166667</td>
      <td>10.166667</td>
    </tr>
    <tr>
      <th>IT</th>
      <td>72800.000000</td>
      <td>32.000000</td>
      <td>7.333333</td>
    </tr>
    <tr>
      <th>Marketing</th>
      <td>62000.000000</td>
      <td>31.000000</td>
      <td>4.500000</td>
    </tr>
    <tr>
      <th>Sales</th>
      <td>57166.666667</td>
      <td>28.833333</td>
      <td>7.833333</td>
    </tr>
  </tbody>
</table>
</div>
<p>可以看到由于数据中包含非数值列，导致发出了警告。但其实这里 Pandas 自动忽略掉了包含非数值列。</p>
<p>为了避免这种情况，我们可以在调用 apply() 方法之前选择数值列。</p>
<p>可以使用<code>df.dropna()</code>, <code>select_dtypes(include=[np.number])</code> 方法来选择数值列。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 删除包含缺失值的行</span></span><br><span class="line">df_cleaned = df.dropna()</span><br><span class="line"><span class="built_in">print</span>(df_cleaned)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>   department employee   salary   age  years_of_service
0       Sales    Alice  50000.0  25.0               2.0
1       Sales      Bob  60000.0  30.0               5.0
2          HR  Charlie  45000.0  35.0              10.0
4          IT      Eve  70000.0  28.0               3.0
6          IT    Grace  68000.0  29.0               4.0
7       Sales     Hank  55000.0  27.0               6.0
8          HR      Ivy  47000.0  38.0              11.0
9          IT     Jack  73000.0  31.0               7.0
10      Sales      Ken  56000.0  26.0               9.0
12  Marketing    Megan  75000.0  34.0               5.0
14    Finance   Oliver  90000.0  41.0              20.0
15    Finance     Paul  88000.0  39.0              18.0
16      Sales   Quincy  65000.0  32.0              15.0
17         HR   Rachel  54000.0  37.0               8.0
20    Finance      Uma  92000.0  45.0              22.0
21      Sales     Vera  57000.0  33.0              10.0
22         HR     Will  43000.0  31.0               7.0
23         IT   Xander  81000.0  42.0              16.0
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 选择数值列进行分组运算</span></span><br><span class="line">num_cl_df = df_cleaned.select_dtypes(include=[np.number])</span><br><span class="line"><span class="built_in">print</span>(num_cl_df)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>     salary   age  years_of_service
0   50000.0  25.0               2.0
1   60000.0  30.0               5.0
2   45000.0  35.0              10.0
4   70000.0  28.0               3.0
6   68000.0  29.0               4.0
7   55000.0  27.0               6.0
8   47000.0  38.0              11.0
9   73000.0  31.0               7.0
10  56000.0  26.0               9.0
12  75000.0  34.0               5.0
14  90000.0  41.0              20.0
15  88000.0  39.0              18.0
16  65000.0  32.0              15.0
17  54000.0  37.0               8.0
20  92000.0  45.0              22.0
21  57000.0  33.0              10.0
22  43000.0  31.0               7.0
23  81000.0  42.0              16.0
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 按部门分组，并计算均值</span></span><br><span class="line">result = num_cl_df.groupby(df_cleaned[<span class="string">'department'</span>]).apply(np.mean)</span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>                  salary        age  years_of_service
department                                           
Finance     90000.000000  41.666667         20.000000
HR          47250.000000  35.250000          9.000000
IT          73000.000000  32.500000          7.500000
Marketing   75000.000000  34.000000          5.000000
Sales       57166.666667  28.833333          7.833333
</code></pre>
<p>可以看到去除非数值数据和缺失值后的计算结果与不去除是一样的，因为 Pandas 在计算时可以忽略非数值数据，但是会发出警告。</p>
<p><code>apply()</code> 方法可以应用 lambda 函数：</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">df.groupby(<span class="string">'department'</span>).apply(<span class="keyword">lambda</span> x: x[<span class="string">'age'</span>]-x[<span class="string">'years_of_service'</span>])</span><br></pre></td></tr></tbody></table></figure>
<pre><code>department    
Finance     14    21.0
            15    21.0
            20    23.0
HR          2     25.0
            3     28.0
            8     27.0
            11    23.0
            17    29.0
            22    24.0
IT          4     25.0
            5      NaN
            6     25.0
            9     24.0
            18    24.0
            23    26.0
Marketing   12    29.0
            13     NaN
            19     NaN
Sales       0     23.0
            1     25.0
            7     21.0
            10    17.0
            16    17.0
            21    23.0
dtype: float64
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">df.groupby(<span class="string">'department'</span>).apply(<span class="keyword">lambda</span> x: (x[<span class="string">'age'</span>]-x[<span class="string">'years_of_service'</span>]).mean())</span><br></pre></td></tr></tbody></table></figure>
<pre><code>department
Finance      21.666667
HR           26.000000
IT           24.800000
Marketing    29.000000
Sales        21.000000
dtype: float64
</code></pre>
<h2 id="分组运算方法-transform"><a class="markdownIt-Anchor" href="#分组运算方法-transform"></a> 分组运算方法 transform()</h2>
<p>在进行分组运算（Groupby 操作）时，我们得到的结果通常是一个以分组名为索引的结果对象。</p>
<p>如果我们希望保留原始数据框的索引（index），而不是以分组名为索引，那么可以使用 transform 方法。</p>
<p>transform 方法可以将指定的函数（func）应用到每一个分组，并将结果重新放回到原数据框中，使得结果与原数据框的索引对应。</p>
<p>如果函数的结果是一个标量值，transform 方法会对其进行广播，使其适应原数据框的形状。</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">df = pd.DataFrame({</span><br><span class="line">    <span class="string">'group1'</span>: [<span class="string">'A'</span>, <span class="string">'A'</span>, <span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'B'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>, <span class="string">'C'</span>, <span class="string">'C'</span>, <span class="string">'C'</span>, <span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>, <span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>, <span class="string">'C'</span>, <span class="string">'B'</span>, <span class="string">'A'</span>, <span class="string">'A'</span>],</span><br><span class="line">    <span class="string">'group2'</span>: [<span class="string">'X'</span>, <span class="string">'X'</span>, <span class="string">'Y'</span>, <span class="string">'X'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'X'</span>, <span class="string">'X'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'X'</span>, <span class="string">'X'</span>, <span class="string">'X'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'X'</span>, <span class="string">'Y'</span>, <span class="string">'X'</span>, <span class="string">'Y'</span>],</span><br><span class="line">    <span class="string">'B'</span>: [<span class="number">1</span>, <span class="number">2</span>, np.nan, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, np.nan, <span class="number">9</span>, <span class="number">10</span>, <span class="number">3</span>, np.nan, <span class="number">8</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">5</span>, np.nan, <span class="number">1</span>],</span><br><span class="line">    <span class="string">'C'</span>: [np.nan, <span class="number">1.1</span>, <span class="number">1.2</span>, <span class="number">1.3</span>, np.nan, <span class="number">1.5</span>, <span class="number">1.6</span>, <span class="number">1.7</span>, <span class="number">1.8</span>, np.nan, <span class="number">1.0</span>, <span class="number">1.4</span>, <span class="number">1.9</span>, <span class="number">1.1</span>, np.nan, <span class="number">1.6</span>, <span class="number">1.2</span>, <span class="number">1.3</span>, <span class="number">1.5</span>, <span class="number">1.0</span>]</span><br><span class="line">})</span><br><span class="line">df</span><br></pre></td></tr></tbody></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>group1</th>
      <th>group2</th>
      <th>B</th>
      <th>C</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>A</td>
      <td>X</td>
      <td>1.0</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>A</td>
      <td>X</td>
      <td>2.0</td>
      <td>1.1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>A</td>
      <td>Y</td>
      <td>NaN</td>
      <td>1.2</td>
    </tr>
    <tr>
      <th>3</th>
      <td>B</td>
      <td>X</td>
      <td>4.0</td>
      <td>1.3</td>
    </tr>
    <tr>
      <th>4</th>
      <td>B</td>
      <td>Y</td>
      <td>5.0</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>5</th>
      <td>B</td>
      <td>Y</td>
      <td>6.0</td>
      <td>1.5</td>
    </tr>
    <tr>
      <th>6</th>
      <td>C</td>
      <td>X</td>
      <td>7.0</td>
      <td>1.6</td>
    </tr>
    <tr>
      <th>7</th>
      <td>C</td>
      <td>X</td>
      <td>NaN</td>
      <td>1.7</td>
    </tr>
    <tr>
      <th>8</th>
      <td>C</td>
      <td>Y</td>
      <td>9.0</td>
      <td>1.8</td>
    </tr>
    <tr>
      <th>9</th>
      <td>C</td>
      <td>Y</td>
      <td>10.0</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>10</th>
      <td>A</td>
      <td>Y</td>
      <td>3.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>11</th>
      <td>B</td>
      <td>X</td>
      <td>NaN</td>
      <td>1.4</td>
    </tr>
    <tr>
      <th>12</th>
      <td>C</td>
      <td>X</td>
      <td>8.0</td>
      <td>1.9</td>
    </tr>
    <tr>
      <th>13</th>
      <td>A</td>
      <td>X</td>
      <td>2.0</td>
      <td>1.1</td>
    </tr>
    <tr>
      <th>14</th>
      <td>B</td>
      <td>Y</td>
      <td>5.0</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>15</th>
      <td>C</td>
      <td>Y</td>
      <td>6.0</td>
      <td>1.6</td>
    </tr>
    <tr>
      <th>16</th>
      <td>C</td>
      <td>X</td>
      <td>7.0</td>
      <td>1.2</td>
    </tr>
    <tr>
      <th>17</th>
      <td>B</td>
      <td>Y</td>
      <td>5.0</td>
      <td>1.3</td>
    </tr>
    <tr>
      <th>18</th>
      <td>A</td>
      <td>X</td>
      <td>NaN</td>
      <td>1.5</td>
    </tr>
    <tr>
      <th>19</th>
      <td>A</td>
      <td>Y</td>
      <td>1.0</td>
      <td>1.0</td>
    </tr>
  </tbody>
</table>
</div>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">df.groupby([<span class="string">'group1'</span>, <span class="string">'group2'</span>])[<span class="string">'B'</span>].transform(<span class="string">'count'</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>0     3
1     3
2     2
3     1
4     4
5     4
6     3
7     3
8     3
9     3
10    2
11    1
12    3
13    3
14    4
15    3
16    3
17    4
18    3
19    2
Name: B, dtype: int64
</code></pre>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">df[<span class="string">'count_B'</span>]=df.groupby([<span class="string">'group1'</span>, <span class="string">'group2'</span>])[<span class="string">'B'</span>].transform(<span class="string">'count'</span>)</span><br><span class="line">df</span><br></pre></td></tr></tbody></table></figure>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>group1</th>
      <th>group2</th>
      <th>B</th>
      <th>C</th>
      <th>count_B</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>A</td>
      <td>X</td>
      <td>1.0</td>
      <td>NaN</td>
      <td>3</td>
    </tr>
    <tr>
      <th>1</th>
      <td>A</td>
      <td>X</td>
      <td>2.0</td>
      <td>1.1</td>
      <td>3</td>
    </tr>
    <tr>
      <th>2</th>
      <td>A</td>
      <td>Y</td>
      <td>NaN</td>
      <td>1.2</td>
      <td>2</td>
    </tr>
    <tr>
      <th>3</th>
      <td>B</td>
      <td>X</td>
      <td>4.0</td>
      <td>1.3</td>
      <td>1</td>
    </tr>
    <tr>
      <th>4</th>
      <td>B</td>
      <td>Y</td>
      <td>5.0</td>
      <td>NaN</td>
      <td>4</td>
    </tr>
    <tr>
      <th>5</th>
      <td>B</td>
      <td>Y</td>
      <td>6.0</td>
      <td>1.5</td>
      <td>4</td>
    </tr>
    <tr>
      <th>6</th>
      <td>C</td>
      <td>X</td>
      <td>7.0</td>
      <td>1.6</td>
      <td>3</td>
    </tr>
    <tr>
      <th>7</th>
      <td>C</td>
      <td>X</td>
      <td>NaN</td>
      <td>1.7</td>
      <td>3</td>
    </tr>
    <tr>
      <th>8</th>
      <td>C</td>
      <td>Y</td>
      <td>9.0</td>
      <td>1.8</td>
      <td>3</td>
    </tr>
    <tr>
      <th>9</th>
      <td>C</td>
      <td>Y</td>
      <td>10.0</td>
      <td>NaN</td>
      <td>3</td>
    </tr>
    <tr>
      <th>10</th>
      <td>A</td>
      <td>Y</td>
      <td>3.0</td>
      <td>1.0</td>
      <td>2</td>
    </tr>
    <tr>
      <th>11</th>
      <td>B</td>
      <td>X</td>
      <td>NaN</td>
      <td>1.4</td>
      <td>1</td>
    </tr>
    <tr>
      <th>12</th>
      <td>C</td>
      <td>X</td>
      <td>8.0</td>
      <td>1.9</td>
      <td>3</td>
    </tr>
    <tr>
      <th>13</th>
      <td>A</td>
      <td>X</td>
      <td>2.0</td>
      <td>1.1</td>
      <td>3</td>
    </tr>
    <tr>
      <th>14</th>
      <td>B</td>
      <td>Y</td>
      <td>5.0</td>
      <td>NaN</td>
      <td>4</td>
    </tr>
    <tr>
      <th>15</th>
      <td>C</td>
      <td>Y</td>
      <td>6.0</td>
      <td>1.6</td>
      <td>3</td>
    </tr>
    <tr>
      <th>16</th>
      <td>C</td>
      <td>X</td>
      <td>7.0</td>
      <td>1.2</td>
      <td>3</td>
    </tr>
    <tr>
      <th>17</th>
      <td>B</td>
      <td>Y</td>
      <td>5.0</td>
      <td>1.3</td>
      <td>4</td>
    </tr>
    <tr>
      <th>18</th>
      <td>A</td>
      <td>X</td>
      <td>NaN</td>
      <td>1.5</td>
      <td>3</td>
    </tr>
    <tr>
      <th>19</th>
      <td>A</td>
      <td>Y</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>2</td>
    </tr>
  </tbody>
</table>
</div>
<p>每一行的 <code>count_B</code> 列显示该行所在分组的计数值。</p>
<p>例如，<code>group1</code> 为 <code>A</code> 且 <code>group2</code> 为 <code>X</code> 的分组中，有 3 个 B 列的值（<strong>不包括 NaN</strong>），所以 count_B 列中的对应计数值是 3。</p>
<p>同样，其他分组的计数值也进行了计算。</p>
<h1 id="未完待续"><a class="markdownIt-Anchor" href="#未完待续"></a> 未完待续！！！</h1>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://studyincau.github.io">小楼一夜听春雨 &amp; Rico</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://studyincau.github.io/2024/07/22/pylearn/">https://studyincau.github.io/2024/07/22/pylearn/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://studyincau.github.io" target="_blank">StudyinCAU</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Python/">Python</a></div><div class="post_share"><div class="social-share" data-image="/../images/python3.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/07/28/shu-li-tong-ji-7-1-jia-she-jian-yan-de-ji-ben-si-xiang-yu-gai-nian/" title="第一节 假设检验的基本思想与概念"><img class="cover" src="/../images/background47.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">第一节 假设检验的基本思想与概念</div></div></a></div><div class="next-post pull-right"><a href="/2024/07/19/dian-li-yu-ce/" title="电力需求预测赛"><img class="cover" src="/../images/xunfei.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">电力需求预测赛</div></div></a></div></nav><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">小楼一夜听春雨 &amp; Rico</div><div class="author-info__description">Study</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">126</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">225</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">57</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/StudyinCAU"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/StudyinCAU" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:3187248635@qq.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">这是一个分享学习笔记(资料)的网站，欢迎一起学习、交流。如果你有好的文章也想分享，可以发邮箱(邮箱在公告上方~)[若出现渲染问题或加载过慢，推荐用谷歌或Edge浏览器打开]</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#python%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95%E6%80%BB%E7%BB%93"><span class="toc-text"> Python基本语法总结</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-text"> 字符串</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-text"> 创建字符串</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%AD%E7%9A%84%E5%80%BC"><span class="toc-text"> 访问字符串中的值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A0%BC%E5%BC%8F%E5%8C%96"><span class="toc-text"> 字符串格式化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E5%AD%97%E6%A0%BC%E5%BC%8F%E5%8C%96"><span class="toc-text"> 数字格式化</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%BF%90%E7%AE%97"><span class="toc-text"> 字符串的基本运算</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8B%BC%E6%8E%A5%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-text"> 拼接字符串</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E5%A4%A7%E5%B0%8F%E5%86%99%E8%BD%AC%E6%8D%A2"><span class="toc-text"> 字符串的大小写转换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%8D%A2%E8%A1%8C%E5%92%8C%E5%88%B6%E8%A1%A8%E7%AC%A6"><span class="toc-text"> 使用换行和制表符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%88%86%E5%89%B2"><span class="toc-text"> 字符串分割</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%BB%E9%99%A4%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%A4%E8%BE%B9%E7%9A%84%E7%A9%BA%E7%99%BD"><span class="toc-text"> 去除字符串两边的空白</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E4%B8%80%E4%BA%9B%E8%BF%90%E7%AE%97"><span class="toc-text"> 其他一些运算</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#list"><span class="toc-text"> List</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9D%E8%AF%86-list"><span class="toc-text"> 初识 list</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE%E5%88%97%E8%A1%A8%E4%B8%AD%E7%9A%84%E5%80%BC"><span class="toc-text"> 访问列表中的值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E7%9A%84%E6%93%8D%E4%BD%9C-%E5%87%BD%E6%95%B0%E5%8F%8A%E6%96%B9%E6%B3%95"><span class="toc-text"> 列表的操作、函数及方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#list-%E4%B8%AD%E5%85%83%E7%B4%A0%E7%9A%84%E5%A2%9E-%E6%94%B9-%E5%88%A0%E7%AD%89%E6%93%8D%E4%BD%9C"><span class="toc-text"> list 中元素的增、改、删等操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-text"> 列表操作符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E5%87%BD%E6%95%B0-%E6%96%B9%E6%B3%95"><span class="toc-text"> 列表函数 &amp; 方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#list-%E4%B8%AD%E5%85%83%E7%B4%A0%E7%9A%84%E7%B1%BB%E5%9E%8B"><span class="toc-text"> list 中元素的类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#list-%E7%9A%84%E5%88%87%E7%89%87slices"><span class="toc-text"> list 的切片（slices）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E6%8E%A8%E5%AF%BC%E5%BC%8F"><span class="toc-text"> 列表推导式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E6%8E%A8%E5%AF%BC%E5%BC%8F%E7%9A%84%E4%B8%80%E8%88%AC%E6%83%85%E5%86%B5"><span class="toc-text"> 列表推导式的一般情况</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%A4%E5%B1%82-for-%E5%BE%AA%E7%8E%AF%E7%9A%84%E5%88%97%E8%A1%A8%E6%8E%A8%E5%AF%BC%E5%BC%8F"><span class="toc-text"> 两层 for 循环的列表推导式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E4%B8%A4%E4%B8%AA%E5%8F%98%E9%87%8F%E6%9D%A5%E7%94%9F%E6%88%90-list"><span class="toc-text"> 使用两个变量来生成 list</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%AB-if-%E8%AF%AD%E5%8F%A5%E7%9A%84%E5%88%97%E8%A1%A8%E6%8E%A8%E5%AF%BC%E5%BC%8F"><span class="toc-text"> 含 if 语句的列表推导式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93"><span class="toc-text"> 小结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AD%97%E5%85%B8"><span class="toc-text"> 字典</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95"><span class="toc-text"> 基本用法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%AD%97%E5%85%B8"><span class="toc-text"> 创建字典</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E5%AD%97%E5%85%B8%E4%B8%AD%E7%9A%84%E5%85%83%E7%B4%A0"><span class="toc-text"> 获取字典中的元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8%E5%AD%97%E5%85%B8%E4%B8%AD%E4%BF%AE%E6%94%B9%E6%88%96%E6%B7%BB%E5%8A%A0%E5%85%83%E7%B4%A0"><span class="toc-text"> 在字典中修改或添加元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8E%E5%AD%97%E5%85%B8%E4%B8%AD%E5%88%A0%E9%99%A4%E5%85%83%E7%B4%A0"><span class="toc-text"> 从字典中删除元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E5%85%B8%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0-%E6%96%B9%E6%B3%95"><span class="toc-text"> 字典内置函数 &amp; 方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E5%85%B8%E6%8E%A8%E5%AF%BC%E5%BC%8F"><span class="toc-text"> 字典推导式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E5%85%B8%E5%90%88%E5%B9%B6"><span class="toc-text"> 字典合并</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E5%AD%97%E5%85%B8%E8%A7%A3%E5%8C%85"><span class="toc-text"> 1.字典解包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E8%87%AA%E5%AE%9A%E4%B9%89%E5%87%BD%E6%95%B0"><span class="toc-text"> 2.自定义函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E5%A4%9A%E4%B8%AA-dict-%E8%BF%9B%E8%A1%8C%E5%90%88%E5%B9%B6"><span class="toc-text"> 3.多个 dict 进行合并</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B5%8C%E5%A5%97%E5%9E%8B%E5%AD%97%E5%85%B8"><span class="toc-text"> 嵌套型字典</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%B5%8C%E5%A5%97%E5%9E%8B%E5%AD%97%E5%85%B8"><span class="toc-text"> 创建一个嵌套型字典</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8E%E5%B5%8C%E5%A5%97%E5%9E%8B%E5%AD%97%E5%85%B8%E4%B8%AD%E8%8E%B7%E5%8F%96%E5%85%83%E7%B4%A0"><span class="toc-text"> 从嵌套型字典中获取元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E5%B5%8C%E5%A5%97%E5%9E%8B%E5%AD%97%E5%85%B8%E7%9A%84%E5%85%83%E7%B4%A0%E6%9B%B4%E6%94%B9-%E5%A2%9E%E5%8A%A0%E6%88%96%E5%88%A0%E9%99%A4%E5%85%83%E7%B4%A0"><span class="toc-text"> 修改嵌套型字典的元素（更改、增加或删除元素）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9A%E8%BF%87-for-%E5%BE%AA%E7%8E%AF%E6%9D%A5%E8%8E%B7%E5%8F%96%E5%B5%8C%E5%A5%97%E5%AD%97%E5%85%B8%E5%86%85%E7%9A%84%E5%85%83%E7%B4%A0"><span class="toc-text"> 通过 for 循环来获取嵌套字典内的元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8-pprint-%E8%BE%93%E5%87%BA%E5%B5%8C%E5%A5%97%E5%9E%8B%E5%AD%97%E5%85%B8"><span class="toc-text"> 用 pprint 输出嵌套型字典</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B5%8C%E5%A5%97%E5%9E%8B%E5%AD%97%E5%85%B8%E7%9A%84%E4%B8%80%E4%BA%9B%E7%94%A8%E9%80%94"><span class="toc-text"> 嵌套型字典的一些用途</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%86%85%E7%BD%AE%E6%97%B6%E9%97%B4%E6%A8%A1%E5%9D%97datetime"><span class="toc-text"> 内置时间模块：Datetime</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-text"> 简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%84%E5%BB%BA%E6%97%B6%E9%97%B4%E5%AF%B9%E8%B1%A1%E5%AE%9E%E4%BE%8B"><span class="toc-text"> 构建时间对象实例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E6%9C%9Fdate%E5%AE%9E%E4%BE%8B%E7%9A%84%E6%9E%84%E9%80%A0"><span class="toc-text"> 日期（date）实例的构造</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%B6%E9%97%B4-time-%E5%AE%9E%E4%BE%8B%E7%9A%84%E6%9E%84%E9%80%A0"><span class="toc-text"> 时间 time 实例的构造</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#datetime-%E5%AE%9E%E4%BE%8B%E7%9A%84%E6%9E%84%E9%80%A0"><span class="toc-text"> datetime 实例的构造</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#timedelta-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%9E%84%E9%80%A0"><span class="toc-text"> timedelta 对象的构造</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tzinfo-%E4%BB%8B%E7%BB%8D"><span class="toc-text"> tzinfo 介绍</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E8%BD%AC%E6%8D%A2"><span class="toc-text"> 时间转换</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E5%AF%B9%E8%B1%A1%E8%BD%AC%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-text"> 时间对象转字符串</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E6%97%B6%E9%97%B4%E5%AF%B9%E8%B1%A1"><span class="toc-text"> 字符串转时间对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E6%88%B3%E8%BD%AC%E6%8D%A2%E4%B8%BA%E6%97%B6%E9%97%B4%E5%AF%B9%E8%B1%A1"><span class="toc-text"> 时间戳转换为时间对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%86%E6%97%B6%E9%97%B4%E5%AF%B9%E8%B1%A1%E8%BD%AC%E6%8D%A2%E4%B8%BA%E6%97%B6%E9%97%B4%E6%88%B3"><span class="toc-text"> 将时间对象转换为时间戳</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E5%AF%B9%E8%B1%A1%E7%9A%84%E8%BF%90%E7%AE%97"><span class="toc-text"> 时间对象的运算</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E5%BD%93%E5%A4%A9%E6%9C%80%E5%B0%8F%E6%97%B6%E9%97%B4%E5%92%8C%E6%9C%80%E5%A4%A7%E6%97%B6%E9%97%B4"><span class="toc-text"> 获取当天最小时间和最大时间</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E6%97%A5%E6%9C%9F%E7%9A%84%E5%89%8D%E5%87%A0%E5%A4%A9%E5%90%8E%E5%87%A0%E5%A4%A9"><span class="toc-text"> 获取当前日期的前几天&#x2F;后几天</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E6%9C%AC%E5%91%A8%E6%88%96%E6%9C%AC%E6%9C%88%E7%AC%AC%E4%B8%80%E5%A4%A9%E5%8F%8A%E6%9C%80%E5%90%8E%E4%B8%80%E5%A4%A9"><span class="toc-text"> 获取本周或本月第一天及最后一天</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E4%B8%A4%E4%B8%AA%E6%97%A5%E6%9C%9F%E7%9B%B8%E5%B7%AE%E5%A4%9A%E5%B0%91%E5%A4%A9"><span class="toc-text"> 计算两个日期相差多少天</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%86%85%E7%BD%AE%E6%97%B6%E9%97%B4%E6%A8%A1%E5%9D%97time"><span class="toc-text"> 内置时间模块:Time</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B-2"><span class="toc-text"> 简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E8%8E%B7%E5%8F%96"><span class="toc-text"> 时间获取</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E6%97%B6%E9%97%B4%E6%88%B3"><span class="toc-text"> 获取时间戳</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E6%97%B6%E9%97%B4%E5%85%83%E7%BB%84"><span class="toc-text"> 获取时间元组</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E8%BD%AC%E6%8D%A2-2"><span class="toc-text"> 时间转换</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E5%85%83%E7%BB%84%E8%BD%AC%E4%B8%BA%E6%97%B6%E9%97%B4%E6%88%B3"><span class="toc-text"> 时间元组转为时间戳</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E5%85%83%E7%BB%84%E4%B8%BA%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-text"> 时间元组为字符串</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E6%88%B3%E8%BD%AC%E6%8D%A2%E4%B8%BA%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-text"> 时间戳转换为字符串</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E6%8D%A2%E4%B8%BA%E6%97%B6%E9%97%B4%E5%85%83%E7%BB%84"><span class="toc-text"> 字符串转换为时间元组</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%86%85%E7%BD%AE%E6%97%B6%E9%97%B4%E6%A8%A1%E5%9D%97calendar"><span class="toc-text"> 内置时间模块：Calendar</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E6%9F%90%E5%B9%B4%E7%9A%84%E6%97%A5%E5%8E%86"><span class="toc-text"> 获取某年的日历</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E6%9F%90%E6%9C%88%E7%9A%84%E6%97%A5%E5%8E%86"><span class="toc-text"> 获取某月的日历</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E6%96%B9%E6%B3%95"><span class="toc-text"> 其他方法</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#numpy-%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95"><span class="toc-text"> Numpy 的基本用法</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#numpy-%E6%95%B0%E7%BB%84%E5%AF%B9%E8%B1%A1"><span class="toc-text"> Numpy 数组对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA-ndarray-%E6%95%B0%E7%BB%84"><span class="toc-text"> 创建 ndarray 数组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#numpy-%E7%9A%84%E6%95%B0%E5%80%BC%E7%B1%BB%E5%9E%8B"><span class="toc-text"> Numpy 的数值类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ndarray-%E6%95%B0%E7%BB%84%E7%9A%84%E5%B1%9E%E6%80%A7"><span class="toc-text"> ndarray 数组的属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ndarray-%E6%95%B0%E7%BB%84%E7%9A%84%E5%88%87%E7%89%87%E5%92%8C%E7%B4%A2%E5%BC%95"><span class="toc-text"> ndarray 数组的切片和索引</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E6%95%B0%E7%BB%84%E5%BD%A2%E7%8A%B6"><span class="toc-text"> 处理数组形状</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BD%A2%E7%8A%B6%E8%BD%AC%E6%8D%A2"><span class="toc-text"> 形状转换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A0%86%E5%8F%A0%E6%95%B0%E7%BB%84"><span class="toc-text"> 堆叠数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E7%9A%84%E6%8B%86%E5%88%86"><span class="toc-text"> 数组的拆分</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E7%9A%84%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2"><span class="toc-text"> 数组的类型转换</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#numpy-%E5%B8%B8%E7%94%A8%E7%BB%9F%E8%AE%A1%E5%87%BD%E6%95%B0"><span class="toc-text"> numpy 常用统计函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E7%9A%84%E5%B9%BF%E6%92%AD"><span class="toc-text"> 数组的广播</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#numpy-%E7%9A%84-random-%E5%87%BD%E6%95%B0"><span class="toc-text"> Numpy 的 random 函数</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#numpy-%E4%B8%AD%E7%9A%84-meshgrid-%E5%87%BD%E6%95%B0"><span class="toc-text"> Numpy 中的 Meshgrid 函数</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#meshgrid-%E5%87%BD%E6%95%B0%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95"><span class="toc-text"> Meshgrid 函数的基本用法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#meshgrid-%E5%87%BD%E6%95%B0%E7%9A%84%E4%B8%80%E4%BA%9B%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-text"> Meshgrid 函数的一些应用场景</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#pandas-%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95"><span class="toc-text"> Pandas 的基本用法</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#query-%E5%87%BD%E6%95%B0"><span class="toc-text"> query 函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#groupby-%E6%93%8D%E4%BD%9C"><span class="toc-text"> Groupby 操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%81%9A%E5%90%88%E6%96%B9%E6%B3%95"><span class="toc-text"> 聚合方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E8%BF%90%E7%AE%97%E6%96%B9%E6%B3%95-agg"><span class="toc-text"> 分组运算方法 agg()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E8%BF%90%E7%AE%97%E6%96%B9%E6%B3%95-apply"><span class="toc-text"> 分组运算方法 apply()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E8%BF%90%E7%AE%97%E6%96%B9%E6%B3%95-transform"><span class="toc-text"> 分组运算方法 transform()</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9C%AA%E5%AE%8C%E5%BE%85%E7%BB%AD"><span class="toc-text"> 未完待续！！！</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/07/31/shu-li-tong-ji-8-2-yi-yuan-xian-xing-hui-gui/" title="第二节 一元线性回归"><img src="/../images/background48.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="第二节 一元线性回归"/></a><div class="content"><a class="title" href="/2024/07/31/shu-li-tong-ji-8-2-yi-yuan-xian-xing-hui-gui/" title="第二节 一元线性回归">第二节 一元线性回归</a><time datetime="2024-07-31T15:01:11.000Z" title="发表于 2024-07-31 23:01:11">2024-07-31</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/07/31/shu-li-tong-ji-8-1-fang-chai-fen-xi/" title="第一节 方差分析"><img src="/../images/background48.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="第一节 方差分析"/></a><div class="content"><a class="title" href="/2024/07/31/shu-li-tong-ji-8-1-fang-chai-fen-xi/" title="第一节 方差分析">第一节 方差分析</a><time datetime="2024-07-31T14:38:37.000Z" title="发表于 2024-07-31 22:38:37">2024-07-31</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/07/28/shu-li-tong-ji-7-4-fen-bu-ni-he-jian-yan/" title="第四节 分布拟合检验"><img src="/../images/background47.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="第四节 分布拟合检验"/></a><div class="content"><a class="title" href="/2024/07/28/shu-li-tong-ji-7-4-fen-bu-ni-he-jian-yan/" title="第四节 分布拟合检验">第四节 分布拟合检验</a><time datetime="2024-07-28T15:34:58.000Z" title="发表于 2024-07-28 23:34:58">2024-07-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/07/28/shu-li-tong-ji-7-3-qi-ta-fen-bu-de-can-shu-jia-she-jian-yan/" title="第三节 其他分布的参数假设检验"><img src="/../images/background47.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="第三节 其他分布的参数假设检验"/></a><div class="content"><a class="title" href="/2024/07/28/shu-li-tong-ji-7-3-qi-ta-fen-bu-de-can-shu-jia-she-jian-yan/" title="第三节 其他分布的参数假设检验">第三节 其他分布的参数假设检验</a><time datetime="2024-07-28T14:33:24.000Z" title="发表于 2024-07-28 22:33:24">2024-07-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/07/28/shu-li-tong-ji-7-2-zheng-tai-zong-ti-can-shu-jia-she-jian-yan/" title="第二节 正态总体参数假设检验"><img src="/../images/background47.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="第二节 正态总体参数假设检验"/></a><div class="content"><a class="title" href="/2024/07/28/shu-li-tong-ji-7-2-zheng-tai-zong-ti-can-shu-jia-she-jian-yan/" title="第二节 正态总体参数假设检验">第二节 正态总体参数假设检验</a><time datetime="2024-07-28T14:11:06.000Z" title="发表于 2024-07-28 22:11:06">2024-07-28</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2023 - 2024 By 小楼一夜听春雨 & Rico</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      tags: 'ams'
    },
    chtml: {
      scale: 1.1
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, '']
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typesetPromise()
}</script><script>(() => {
  const initValine = () => {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'xFi1vMHzzqw1qFKQbyK4WtAo-gzGzoHsz',
      appKey: 'hGyKCk4AFAr9aPSCHioyb0hH',
      avatar: 'monsterid',
      serverURLs: '',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: false
    }, null))
  }

  const loadValine = async () => {
    if (typeof Valine === 'function') initValine()
    else {
      await getScript('https://cdn.jsdelivr.net/npm/valine@1.5.1/dist/Valine.min.js')
      initValine()
    }
  }

  if ('Valine' === 'Valine' || !true) {
    if (true) btf.loadComment(document.getElementById('vcomment'),loadValine)
    else setTimeout(loadValine, 0)
  } else {
    window.loadOtherComment = loadValine
  }
})()</script></div><link rel="stylesheet" href="/css/title.css"><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=4.13.0"></script></div></div></body></html>